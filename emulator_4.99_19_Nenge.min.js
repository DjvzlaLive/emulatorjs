var EJS=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=336)}([function(e,t,n){var r=n(2),o=n(9),a=n(16),i=n(13),s=n(19),c=function(e,t,n){var l,u,d,f,p=e&c.F,h=e&c.G,m=e&c.S,v=e&c.P,_=e&c.B,g=h?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,y=h?o:o[t]||(o[t]={}),b=y.prototype||(y.prototype={});for(l in h&&(n=t),n)d=((u=!p&&g&&void 0!==g[l])?g:n)[l],f=_&&u?s(d,r):v&&"function"==typeof d?s(Function.call,d):d,g&&i(g,l,d,e&c.U),y[l]!=d&&a(y,l,f),v&&b[l]!=d&&(b[l]=d)};r.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){!function(e){"use strict";var t=function(){},n={getType:function(){return"null"},isSupported:function(){return!1},update:t},r=function(e){var n=this,r=window;this.update=t,this.requestAnimationFrame=e||r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame,this.tickFunction=function(){n.update(),n.startTicker()},this.startTicker=function(){n.requestAnimationFrame.apply(r,[n.tickFunction])}};r.prototype.start=function(e){this.update=e||t,this.startTicker()};var o=function(){};o.prototype.update=t,o.prototype.start=function(e){this.update=e||t};var a=function(e,t){this.listener=e,this.gamepadGetter=t,this.knownGamepads=[]};a.factory=function(e){var t=n,r=window&&window.navigator;return r&&(void 0!==r.getGamepads?t=new a(e,(function(){return r.getGamepads()})):void 0!==r.webkitGamepads?t=new a(e,(function(){return r.webkitGamepads()})):void 0!==r.webkitGetGamepads&&(t=new a(e,(function(){return r.webkitGetGamepads()})))),t},a.getType=function(){return"WebKit"},a.prototype.getType=function(){return a.getType()},a.prototype.isSupported=function(){return!0},a.prototype.update=function(){var e,t,n=Array.prototype.slice.call(this.gamepadGetter(),0);for(t=this.knownGamepads.length-1;t>=0;t--)e=this.knownGamepads[t],n.indexOf(e)<0&&(this.knownGamepads.splice(t,1),this.listener._disconnect(e));for(t=0;t<n.length;t++)(e=n[t])&&this.knownGamepads.indexOf(e)<0&&(this.knownGamepads.push(e),this.listener._connect(e))};var i=function(e){this.listener=e,-1!==(window&&window.navigator).userAgent.indexOf("Firefox")&&(window.addEventListener("gamepadconnected",(function(t){e._connect(t.gamepad)})),window.addEventListener("gamepaddisconnected",(function(t){e._disconnect(t.gamepad)})))};i.factory=function(e){var t=n;return window&&void 0!==window.addEventListener&&(t=new i(e)),t},i.getType=function(){return"Firefox"},i.prototype.getType=function(){return i.getType()},i.prototype.isSupported=function(){return-1!==(window&&window.navigator).userAgent.indexOf("Firefox")},i.prototype.update=t;var s=function(e){this.updateStrategy=e||new r,this.gamepads=[],this.listeners={},this.platform=n,this.deadzone=.03,this.maximizeThreshold=.97};s.UpdateStrategies={AnimFrameUpdateStrategy:r,ManualUpdateStrategy:o},s.PlatformFactories=[i.factory,a.factory],s.Type={N64:"n64",PLAYSTATION:"playstation",PLAYSTATION4:"playstation4",LOGITECH:"logitech",XBOX:"xbox",ECKA:"ecka",USBJOYSTICK:"usbjoystick",UNKNOWN:"unknown"},s.Event={CONNECTED:"connected",UNSUPPORTED:"unsupported",DISCONNECTED:"disconnected",TICK:"tick",BUTTON_DOWN:"button-down",BUTTON_UP:"button-up",AXIS_CHANGED:"axis-changed"},s.StandardButtons=["BUTTON_1","BUTTON_2","BUTTON_3","BUTTON_4","LEFT_TOP_SHOULDER","RIGHT_TOP_SHOULDER","LEFT_BOTTOM_SHOULDER","RIGHT_BOTTOM_SHOULDER","SELECT_BACK","START_FORWARD","LEFT_STICK","RIGHT_STICK","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT","HOME"],s.StandardAxes=["LEFT_STICK_X","LEFT_STICK_Y","RIGHT_STICK_X","RIGHT_STICK_Y"];var c,l,u=function(e,t,n){return t<e.length?e[t]:n+(t-e.length+1)};s.StandardMapping={env:{},buttons:{byButton:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},axes:{byAxis:[0,1,2,3]}},s.Mappings=[{env:{platform:i.getType(),type:s.Type.N64},buttons:{byButton:[2,1,3,0,4,5,-1,-1,8,9,-1,-1,12,13,14,15,-1]},axes:{byAxis:[1,2,-1,-1]}},{env:{platform:a.getType(),type:s.Type.N64},buttons:{byButton:[2,1,3,0,4,5,-1,-1,8,9,-1,-1,12,13,14,15,-1]},axes:{byAxis:[0,1,-1,-1]}},{env:{platform:i.getType(),type:s.Type.XBOX},buttons:{byButton:[0,1,2,3,4,5,15,16,9,8,6,7,11,12,13,14,10]},axes:{byAxis:[0,1,2,3]}},{env:{platform:i.getType(),type:s.Type.PLAYSTATION},buttons:{byButton:[14,13,15,12,10,11,8,9,0,3,1,2,4,6,7,5,16]},axes:{byAxis:[0,1,2,3]}},{env:{platform:i.getType(),type:s.Type.PLAYSTATION4},buttons:{byButton:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},axes:{byAxis:[0,1,2,3]}},{env:{platform:a.getType(),type:s.Type.PLAYSTATION4},buttons:{byButton:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},axes:{byAxis:[0,1,2,3]}},{env:{platform:a.getType(),type:s.Type.LOGITECH},buttons:{byButton:[1,2,0,3,4,5,6,7,8,9,10,11,11,12,13,14,10]},axes:{byAxis:[0,1,2,3]}},{env:{platform:i.getType(),type:s.Type.LOGITECH},buttons:{byButton:[0,1,2,3,4,5,-1,-1,6,7,8,9,11,12,13,14,10],byAxis:[-1,-1,-1,-1,-1,-1,[2,0,1],[2,0,-1]]},axes:{byAxis:[0,1,3,4]}},{env:{platform:a.getType(),type:s.Type.ECKA},buttons:{byButton:[2,1,3,0,4,5,6,7,8,9,10,11,11,12,13,14,10],byAxis:[-1,-1,-1,-1,-1,-1,[2,0,1],[2,0,-1]]},axes:{byAxis:[0,1,3,4]}},{env:{platform:i.getType(),type:s.Type.USBJOYSTICK},buttons:{byButton:[2,1,3,0,4,5,6,7,8,9,10,11,12,13,14,15,16]},axes:{byAxis:[0,1,2,5]}},{env:{platform:a.getType(),type:s.Type.USBJOYSTICK},buttons:{byButton:[2,1,3,0,4,5,6,7,8,9,10,11,12,13,14,15,16]},axes:{byAxis:[0,1,2,5]}},{env:{platform:a.getType(),type:s.Type.UNKNOWN},buttons:{byButton:[0,1,2,3,4,5,-1,-1,6,7,8,9,11,12,13,14,15,16,17,10]},axes:{byAxis:[0,1,2,5]}}],s.prototype.init=function(){var e=s.resolvePlatform(this),t=this;return this.platform=e,this.updateStrategy.start((function(){t._update()})),this.buttonState=[],this.extraButtonState=[],e.isSupported()},s.prototype.bind=function(e,t){return void 0===this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].push(t),this},s.prototype.unbind=function(e,t){if(void 0!==e){if(void 0!==t){if(void 0===this.listeners[e])return!1;for(var n=0;n<this.listeners[e].length;n++)if(this.listeners[e][n]===t)return this.listeners[e].splice(n,1),!0;return!1}this.listeners[e]=[]}else this.listeners={}},s.prototype.count=function(){return this.gamepads.length},s.prototype._fire=function(e,t){if(void 0!==this.listeners[e]){for(var n=0;n<this.listeners[e].length;n++)this.listeners[e][n].apply(this.listeners[e][n],[t]);var r=this;t.gamepad&&t.gamepad.extra_buttons&&t.gamepad.extra_buttons.forEach((function(e,n){r.extraButtonState[t.gamepad.index]||(r.extraButtonState[t.gamepad.index]=[]),r.extraButtonState[t.gamepad.index][n]=e}))}},s.getNullPlatform=function(){return Object.create(n)},s.resolvePlatform=function(e){var t,r=n;for(t=0;!r.isSupported()&&t<s.PlatformFactories.length;t++)r=s.PlatformFactories[t](e);return r},s.prototype._connect=function(e){var t,n,r=this._resolveMapping(e);for(e.state={},e.lastState={},e.updater=[],this.buttonState[e.index]||(this.buttonState[e.index]=[]),this.extraButtonState[e.index]||(this.extraButtonState[e.index]=[]),t=r.buttons.byButton.length,n=0;n<t;n++)this._addButtonUpdater(e,r,n);for(t=r.axes.byAxis.length,n=0;n<t;n++)this._addAxisUpdater(e,r,n);if(this.gamepads[e.index]=e,!this.gamepads[e.index].extra_buttons)for(this.gamepads[e.index].extra_buttons=[],n=12;n<16;n++)this.extraButtonState[e.index][n]?this.gamepads[e.index].extra_buttons[n]=this.extraButtonState[e.index][n]:this.gamepads[e.index].extra_buttons[n]={pressed:!1,value:0};this._fire(s.Event.CONNECTED,e)},s.prototype._addButtonUpdater=function(e,t,n){var r,o=u(s.StandardButtons,n,"EXTRA_BUTTON_"),a=this._createButtonGetter(e,t.buttons,n),i=this,c={gamepad:e,control:o,index:n,gamepadIndex:e.index};e.state[o]=0,e.lastState[o]=0,null==this.buttonState[e.index][o]&&(this.buttonState[e.index][o]=0),r=function(){var t=a(),n=e.lastState[o],r=t>.5,l=n>.5;e.state[o]=t,r&&!l?i._fire(s.Event.BUTTON_DOWN,Object.create(c)):(!r&&l||i.buttonState[e.index][o]!=t)&&i._fire(s.Event.BUTTON_UP,Object.create(c)),0!==t&&1!==t&&t!==n&&i._fireAxisChangedEvent(e,o,t),e.lastState[o]=t,i.buttonState[e.index][o]=t},e.updater.push(r)},s.prototype._addAxisUpdater=function(e,t,n){var r,o=u(s.StandardAxes,n,"EXTRA_AXIS_"),a=this._createAxisGetter(e,t.axes,n),i=this;e.state[o]=0,e.lastState[o]=0,null==this.buttonState[e.index][o]&&(this.buttonState[e.index][o]=0),r=function(){var t=a(),n=i.buttonState[e.index][o];e.state[o]=t,t!==n&&i._fireAxisChangedEvent(e,o,t),e.lastState[o]=t,i.buttonState[e.index][o]=t},e.updater.push(r)},s.prototype._fireAxisChangedEvent=function(e,t,n){var r={gamepad:e,axis:t,value:n};this._fire(s.Event.AXIS_CHANGED,r)},s.prototype._createButtonGetter=(c=function(){return 0},function(e,t,n){var r,o,a,i,s,l,u=c,d=this;return-1!==(r=t.byButton[n])?"number"==typeof r&&r<e.buttons.length&&(u=function(){var t=e.buttons[r];return"number"==typeof t?t:"number"==typeof t.value?t.value:0}):t.byAxis&&n<t.byAxis.length&&(o=r=t.byAxis[n],"[object Array]"===Object.prototype.toString.call(o)&&3==r.length&&r[0]<e.axes.length&&(a=u=function(){var t=e.axes[r[0]];return d._applyDeadzoneMaximize(t)},i=r[1],s=r[2],l=c,i<s?l=function(){var e=s-i,t=a();return(t=(t-i)/e)<0?0:t}:s<i&&(l=function(){var e=i-s,t=a();return(t=(t-s)/e)>1?0:1-t}),u=l)),u}),s.prototype._createAxisGetter=(l=function(){return 0},function(e,t,n){var r,o=l,a=this;return-1!==(r=t.byAxis[n])&&"number"==typeof r&&r<e.axes.length&&(o=function(){var t=e.axes[r];return a._applyDeadzoneMaximize(t)}),o}),s.prototype._disconnect=function(e){var t,n=[];for(void 0!==this.gamepads[e.index]&&delete this.gamepads[e.index],t=0;t<this.gamepads.length;t++)void 0!==this.gamepads[t]&&(n[t]=this.gamepads[t]);this.gamepads=n,this._fire(s.Event.DISCONNECTED,e)},s.prototype._resolveControllerType=function(e){return-1!==(e=e.toLowerCase().replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")).indexOf("playstation")?s.Type.PLAYSTATION:-1!==e.indexOf("vendor: 054c")?s.Type.PLAYSTATION4:-1!==e.indexOf("logitech")||-1!==e.indexOf("wireless gamepad")?s.Type.LOGITECH:-1!==e.indexOf("xbox")||-1!==e.indexOf("360")?s.Type.XBOX:-1!==e.indexOf("79-6-generic")&&-1!==e.indexOf("joystick")||-1!==e.indexOf("vendor: 0079 product: 0006")&&-1!==e.indexOf("generic usb joystick")?s.Type.N64:"usb joystick (vendor: 0e8f product: 0002)"===e?s.Type.ECKA:-1!==e.indexOf("vendor: 0079 product: 0006")?s.Type.USBJOYSTICK:s.Type.UNKNOWN},s.prototype._resolveMapping=function(e){var t,n,r=s.Mappings,o=null,a={platform:this.platform.getType(),type:this._resolveControllerType(e.id)};for(t=0;!o&&t<r.length;t++)n=r[t],s.envMatchesFilter(n.env,a)&&(o=n);return o||s.StandardMapping},s.envMatchesFilter=function(e,t){var n,r=!0;for(n in e)e[n]!==t[n]&&(r=!1);return r},s.prototype._update=function(){this.platform.update(),this.gamepads.forEach((function(e){e&&e.updater.forEach((function(e){e()}))})),this.gamepads.length>0&&this._fire(s.Event.TICK,this.gamepads)},s.prototype._applyDeadzoneMaximize=function(e,t,n){return t=void 0!==t?t:this.deadzone,n=void 0!==n?n:this.maximizeThreshold,e>=0?e<t?e=0:e>n&&(e=1):e>-t?e=0:e<-n&&(e=-1),e},e.Gamepad=s}(e.exports||window)},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(5);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){(function(e,n,r){var o,a,i,s;function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==c(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){"use strict";var r,o=n(4),a=Object.prototype.toString,i=(r=Object.create(null),function(e){var t=a.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(e){return e=e.toLowerCase(),function(t){return i(t)===e}}function l(e){return Array.isArray(e)}function u(e){return void 0===e}var d=s("ArrayBuffer");function f(e){return null!==e&&"object"==c(e)}function p(e){if("object"!==i(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var h=s("Date"),m=s("File"),v=s("Blob"),_=s("FileList");function g(e){return"[object Function]"===a.call(e)}var y=s("URLSearchParams");function b(e,t){if(null!=e)if("object"!=c(e)&&(e=[e]),l(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var x,T=(x="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return x&&e instanceof x});e.exports={isArray:l,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return e&&("function"==typeof FormData&&e instanceof FormData||"[object FormData]"===a.call(e)||g(e.toString)&&"[object FormData]"===e.toString())},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:f,isPlainObject:p,isUndefined:u,isDate:h,isFile:m,isBlob:v,isFunction:g,isStream:function(e){return f(e)&&g(e.pipe)},isURLSearchParams:y,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:b,merge:function e(){var t={};function n(n,r){p(t[r])&&p(n)?t[r]=e(t[r],n):p(n)?t[r]=e({},n):l(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)b(arguments[r],n);return t},extend:function(e,t,n){return b(t,(function(t,r){e[r]=n&&"function"==typeof t?o(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,o,a,i={};t=t||{};do{for(o=(r=Object.getOwnPropertyNames(e)).length;o-- >0;)i[a=r[o]]||(t[a]=e[a],i[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:i,kindOfTest:s,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(u(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:T,isFileList:_}},function(e,t,n){"use strict";var r=n(0);function o(e,t,n,r,o){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o)}r.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a=o.prototype,i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){i[e]={value:e}})),Object.defineProperties(o,i),Object.defineProperty(a,"isAxiosError",{value:!0}),o.from=function(e,t,n,i,s,c){var l=Object.create(a);return r.toFlatObject(e,l,(function(e){return e!==Error.prototype})),o.call(l,e.message,t,n,i,s),l.name=e.name,c&&Object.assign(l,c),l},e.exports=o},function(e,t,n){"use strict";var r=n(1);function o(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(0).inherits(o,r,{__CANCEL__:!0}),e.exports=o},function(t,n,r){"use strict";var o=r(0),a=r(19),i=r(1),s=r(6),c=r(7),l={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var d,f={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(d=r(8)),d),transformRequest:[function(e,t){if(a(t,"Accept"),a(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e))return e;if(o.isArrayBufferView(e))return e.buffer;if(o.isURLSearchParams(e))return u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,r=o.isObject(e),i=t&&t["Content-Type"];if((n=o.isFileList(e))||r&&"multipart/form-data"===i){var s=this.env&&this.env.FormData;return c(n?{"files[]":e}:e,s&&new s)}return r||"application/json"===i?(u(t,"application/json"),function(e,t,n){if(o.isString(e))try{return(0,JSON.parse)(e),o.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||f.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||r&&o.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw i.from(e,i.ERR_BAD_RESPONSE,this,null,this.response);throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:r(27)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};o.forEach(["delete","get","head"],(function(e){f.headers[e]={}})),o.forEach(["post","put","patch"],(function(e){f.headers[e]=o.merge(l)})),t.exports=f},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(0);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var i=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))})))})),a=i.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},function(e,t,n){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},function(e,t,r){"use strict";var o=r(0);e.exports=function(e,t){t=t||new FormData;var r=[];function a(e){return null===e?"":o.isDate(e)?e.toISOString():o.isArrayBuffer(e)||o.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):n.from(e):e}return function e(n,i){if(o.isPlainObject(n)||o.isArray(n)){if(-1!==r.indexOf(n))throw Error("Circular reference detected in "+i);r.push(n),o.forEach(n,(function(n,r){if(!o.isUndefined(n)){var s,l=i?i+"."+r:r;if(n&&!i&&"object"==c(n))if(o.endsWith(r,"{}"))n=JSON.stringify(n);else if(o.endsWith(r,"[]")&&(s=o.toArray(n)))return void s.forEach((function(e){!o.isUndefined(e)&&t.append(l,a(e))}));e(n,l)}})),r.pop()}else t.append(i,a(n))}(e),t}},function(e,t,n){"use strict";var r=n(0),o=n(20),a=n(21),i=n(5),s=n(9),c=n(24),l=n(25),u=n(6),d=n(1),f=n(2),p=n(26);e.exports=function(e){return new Promise((function(t,n){var h,m=e.data,v=e.headers,_=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}r.isFormData(m)&&r.isStandardBrowserEnv()&&delete v["Content-Type"];var y=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",x=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(b+":"+x)}var T=s(e.baseURL,e.url);function E(){if(y){var r="getAllResponseHeaders"in y?c(y.getAllResponseHeaders()):null,a={data:_&&"text"!==_&&"json"!==_?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y};o((function(e){t(e),g()}),(function(e){n(e),g()}),a),y=null}}if(y.open(e.method.toUpperCase(),i(T,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,"onloadend"in y?y.onloadend=E:y.onreadystatechange=function(){y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&setTimeout(E)},y.onabort=function(){y&&(n(new d("Request aborted",d.ECONNABORTED,e,y)),y=null)},y.onerror=function(){n(new d("Network Error",d.ERR_NETWORK,e,y,y)),y=null},y.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||u;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new d(t,r.clarifyTimeoutError?d.ETIMEDOUT:d.ECONNABORTED,e,y)),y=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||l(T))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;S&&(v[e.xsrfHeaderName]=S)}"setRequestHeader"in y&&r.forEach(v,(function(e,t){void 0===m&&"content-type"===t.toLowerCase()?delete v[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),_&&"json"!==_&&(y.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){y&&(n(!e||e&&e.type?new f:e),y.abort(),y=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),m||(m=null);var C=p(T);C&&-1===["http","https","file"].indexOf(C)?n(new d("Unsupported protocol "+C+":",d.ERR_BAD_REQUEST,e)):y.send(m)}))}},function(e,t,n){"use strict";var r=n(22),o=n(23);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){t=t||{};var n={};function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function i(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function c(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var l={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=l[e]||a,o=t(e);r.isUndefined(o)&&t!==c||(n[e]=o)})),n}},function(e,t){e.exports={version:"0.27.2"}},function(e,t,n){e.exports=n(14)},function(e,t,n){"use strict";var r=n(0),o=n(4),a=n(15),i=n(11),s=function e(t){var n=new a(t),s=o(a.prototype.request,n);return r.extend(s,a.prototype,n),r.extend(s,n),s.create=function(n){return e(i(t,n))},s}(n(3));s.Axios=a,s.CanceledError=n(2),s.CancelToken=n(29),s.isCancel=n(10),s.VERSION=n(12).version,s.toFormData=n(7),s.AxiosError=n(1),s.Cancel=s.CanceledError,s.all=function(e){return Promise.all(e)},s.spread=n(30),s.isAxiosError=n(31),e.exports=s,e.exports.default=s},function(e,t,n){"use strict";var r=n(0),o=n(5),a=n(16),i=n(17),s=n(11),c=n(9),l=n(28),u=l.validators;function d(e){this.defaults=e,this.interceptors={request:new a,response:new a}}d.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&l.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var a,c=[];if(this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)})),!o){var d=[i,void 0];for(Array.prototype.unshift.apply(d,r),d=d.concat(c),a=Promise.resolve(t);d.length;)a=a.then(d.shift(),d.shift());return a}for(var f=t;r.length;){var p=r.shift(),h=r.shift();try{f=p(f)}catch(e){h(e);break}}try{a=i(f)}catch(e){return Promise.reject(e)}for(;c.length;)a=a.then(c.shift(),c.shift());return a},d.prototype.getUri=function(e){e=s(this.defaults,e);var t=c(e.baseURL,e.url);return o(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){d.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(s(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}d.prototype[e]=t(),d.prototype[e+"Form"]=t(!0)})),e.exports=d},function(e,t,n){"use strict";var r=n(0);function o(){this.handlers=[]}o.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,n){"use strict";var r=n(0),o=n(18),a=n(10),i=n(3),s=n(2);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(0),o=n(3);e.exports=function(e,t,n){var a=this||o;return r.forEach(n,(function(n){e=n.call(a,e,t)})),e}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(1);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,a,i){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(a)&&s.push("domain="+a),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,i={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}})),i):i}},function(e,t,n){"use strict";var r=n(0);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},function(e,t){e.exports=null},function(e,t,n){"use strict";var r=n(12).version,o=n(1),a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return c(n)===e||"a"+(t<1?"n ":" ")+e}}));var i={};a.transitional=function(e,t,n){return function(a,s,c){if(!1===e)throw new o("[Axios v"+r+"] Transitional option '"+s+"'"+(" has been removed"+(t?" in "+t:""))+(n?". "+n:""),o.ERR_DEPRECATED);return t&&!i[s]&&(i[s]=!0),!e||e(a,s,c)}},e.exports={assertOptions:function(e,t,n){if("object"!=c(e))throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],s=t[i];if(s){var l=e[i],u=void 0===l||s(l,i,e);if(!0!==u)throw new o("option "+i+" must be "+u,o.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new o("Unknown option "+i,o.ERR_BAD_OPTION)}},validators:a}},function(e,t,n){"use strict";var r=n(2);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";var r=n(0);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}}])},"object"==c(t)&&"object"==c(r)?r.exports=s():(a=[],void 0===(i="function"==typeof(o=s)?o.apply(t,a):o)||(r.exports=i))}).call(this,n(94),n(326).Buffer,n(128)(e))},function(e,t,n){var r=n(54)("wks"),o=n(31),a=n(2).Symbol,i="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=i&&a[e]||(i?a:o)("Symbol."+e))}).store=r},function(e,t,n){var r=n(21),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(3)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(4),o=n(95),a=n(28),i=Object.defineProperty;t.f=n(10)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(26);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(2),o=n(16),a=n(15),i=n(31)("src"),s=n(138),c=(""+s).split("toString");n(9).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var l="function"==typeof n;l&&(a(n,"name")||o(n,"name",t)),e[t]!==n&&(l&&(a(n,i)||o(n,i,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[i]||s.call(this)}))},function(e,t,n){var r=n(0),o=n(3),a=n(26),i=/"/g,s=function(e,t,n,r){var o=String(a(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(i,"&quot;")+'"'),s+">"+o+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*o((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",n)}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(11),o=n(30);e.exports=n(10)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(48),o=n(26);e.exports=function(e){return r(o(e))}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,n){var r=n(20);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(49),o=n(30),a=n(17),i=n(28),s=n(15),c=n(95),l=Object.getOwnPropertyDescriptor;t.f=n(10)?l:function(e,t){if(e=a(e),t=i(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(0),o=n(9),a=n(3);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*a((function(){n(1)})),"Object",i)}},function(e,t,n){var r=n(19),o=n(48),a=n(12),i=n(8),s=n(111);e.exports=function(e,t){var n=1==e,c=2==e,l=3==e,u=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var m,v,_=a(t),g=o(_),y=r(s,h,3),b=i(g.length),x=0,T=n?p(t,b):c?p(t,0):void 0;b>x;x++)if((f||x in g)&&(v=y(m=g[x],x,_),e))if(n)T[x]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:T.push(m)}else if(u)return!1;return d?-1:l||u?u:T}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";if(n(10)){var r=n(32),o=n(2),a=n(3),i=n(0),s=n(65),c=n(90),l=n(19),u=n(44),d=n(30),f=n(16),p=n(45),h=n(21),m=n(8),v=n(122),_=n(34),g=n(28),y=n(15),b=n(50),x=n(5),T=n(12),E=n(82),S=n(35),C=n(37),w=n(36).f,O=n(84),A=n(31),P=n(7),M=n(24),N=n(55),I=n(51),R=n(86),L=n(42),B=n(58),k=n(43),D=n(85),j=n(113),F=n(11),U=n(22),G=F.f,z=U.f,H=o.RangeError,Y=o.TypeError,V=o.Uint8Array,q=Array.prototype,X=c.ArrayBuffer,W=c.DataView,K=M(0),J=M(2),$=M(3),Z=M(4),Q=M(5),ee=M(6),te=N(!0),ne=N(!1),re=R.values,oe=R.keys,ae=R.entries,ie=q.lastIndexOf,se=q.reduce,ce=q.reduceRight,le=q.join,ue=q.sort,de=q.slice,fe=q.toString,pe=q.toLocaleString,he=P("iterator"),me=P("toStringTag"),ve=A("typed_constructor"),_e=A("def_constructor"),ge=s.CONSTR,ye=s.TYPED,be=s.VIEW,xe=M(1,(function(e,t){return we(I(e,e[_e]),t)})),Te=a((function(){return 1===new V(new Uint16Array([1]).buffer)[0]})),Ee=!!V&&!!V.prototype.set&&a((function(){new V(1).set({})})),Se=function(e,t){var n=h(e);if(n<0||n%t)throw H("Wrong offset!");return n},Ce=function(e){if(x(e)&&ye in e)return e;throw Y(e+" is not a typed array!")},we=function(e,t){if(!x(e)||!(ve in e))throw Y("It is not a typed array constructor!");return new e(t)},Oe=function(e,t){return Ae(I(e,e[_e]),t)},Ae=function(e,t){for(var n=0,r=t.length,o=we(e,r);r>n;)o[n]=t[n++];return o},Pe=function(e,t,n){G(e,t,{get:function(){return this._d[n]}})},Me=function(e){var t,n,r,o,a,i,s=T(e),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,f=O(s);if(null!=f&&!E(f)){for(i=f.call(s),r=[],t=0;!(a=i.next()).done;t++)r.push(a.value);s=r}for(d&&c>2&&(u=l(u,arguments[2],2)),t=0,n=m(s.length),o=we(this,n);n>t;t++)o[t]=d?u(s[t],t):s[t];return o},Ne=function(){for(var e=0,t=arguments.length,n=we(this,t);t>e;)n[e]=arguments[e++];return n},Ie=!!V&&a((function(){pe.call(new V(1))})),Re=function(){return pe.apply(Ie?de.call(Ce(this)):Ce(this),arguments)},Le={copyWithin:function(e,t){return j.call(Ce(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Z(Ce(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return D.apply(Ce(this),arguments)},filter:function(e){return Oe(this,J(Ce(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Q(Ce(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Ce(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){K(Ce(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Ce(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Ce(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(Ce(this),arguments)},lastIndexOf:function(e){return ie.apply(Ce(this),arguments)},map:function(e){return xe(Ce(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Ce(this),arguments)},reduceRight:function(e){return ce.apply(Ce(this),arguments)},reverse:function(){for(var e,t=Ce(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return $(Ce(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ue.call(Ce(this),e)},subarray:function(e,t){var n=Ce(this),r=n.length,o=_(e,r);return new(I(n,n[_e]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,m((void 0===t?r:_(t,r))-o))}},Be=function(e,t){return Oe(this,de.call(Ce(this),e,t))},ke=function(e){Ce(this);var t=Se(arguments[1],1),n=this.length,r=T(e),o=m(r.length),a=0;if(o+t>n)throw H("Wrong length!");for(;a<o;)this[t+a]=r[a++]},De={entries:function(){return ae.call(Ce(this))},keys:function(){return oe.call(Ce(this))},values:function(){return re.call(Ce(this))}},je=function(e,t){return x(e)&&e[ye]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Fe=function(e,t){return je(e,t=g(t,!0))?d(2,e[t]):z(e,t)},Ue=function(e,t,n){return!(je(e,t=g(t,!0))&&x(n)&&y(n,"value"))||y(n,"get")||y(n,"set")||n.configurable||y(n,"writable")&&!n.writable||y(n,"enumerable")&&!n.enumerable?G(e,t,n):(e[t]=n.value,e)};ge||(U.f=Fe,F.f=Ue),i(i.S+i.F*!ge,"Object",{getOwnPropertyDescriptor:Fe,defineProperty:Ue}),a((function(){fe.call({})}))&&(fe=pe=function(){return le.call(this)});var Ge=p({},Le);p(Ge,De),f(Ge,he,De.values),p(Ge,{slice:Be,set:ke,constructor:function(){},toString:fe,toLocaleString:Re}),Pe(Ge,"buffer","b"),Pe(Ge,"byteOffset","o"),Pe(Ge,"byteLength","l"),Pe(Ge,"length","e"),G(Ge,me,{get:function(){return this[ye]}}),e.exports=function(e,t,n,c){var l=e+((c=!!c)?"Clamped":"")+"Array",d="get"+e,p="set"+e,h=o[l],_=h||{},g=h&&C(h),y=!h||!s.ABV,T={},E=h&&h.prototype,O=function(e,n){G(e,n,{get:function(){return e=n,(r=this._d).v[d](e*t+r.o,Te);var e,r},set:function(e){return r=n,o=e,a=this._d,c&&(o=(o=Math.round(o))<0?0:o>255?255:255&o),void a.v[p](r*t+a.o,o,Te);var r,o,a},enumerable:!0})};y?(h=n((function(e,n,r,o){u(e,h,l,"_d");var a,i,s,c,d=0,p=0;if(x(n)){if(!(n instanceof X||"ArrayBuffer"==(c=b(n))||"SharedArrayBuffer"==c))return ye in n?Ae(h,n):Me.call(h,n);a=n,p=Se(r,t);var _=n.byteLength;if(void 0===o){if(_%t)throw H("Wrong length!");if((i=_-p)<0)throw H("Wrong length!")}else if((i=m(o)*t)+p>_)throw H("Wrong length!");s=i/t}else s=v(n),a=new X(i=s*t);for(f(e,"_d",{b:a,o:p,l:i,e:s,v:new W(a)});d<s;)O(e,d++)})),E=h.prototype=S(Ge),f(E,"constructor",h)):a((function(){h(1)}))&&a((function(){new h(-1)}))&&B((function(e){new h,new h(null),new h(1.5),new h(e)}),!0)||(h=n((function(e,n,r,o){var a;return u(e,h,l),x(n)?n instanceof X||"ArrayBuffer"==(a=b(n))||"SharedArrayBuffer"==a?void 0!==o?new _(n,Se(r,t),o):void 0!==r?new _(n,Se(r,t)):new _(n):ye in n?Ae(h,n):Me.call(h,n):new _(v(n))})),K(g!==Function.prototype?w(_).concat(w(g)):w(_),(function(e){e in h||f(h,e,_[e])})),h.prototype=E,r||(E.constructor=h));var A=E[he],P=!!A&&("values"==A.name||null==A.name),M=De.values;f(h,ve,!0),f(E,ye,l),f(E,be,!0),f(E,_e,h),(c?new h(1)[me]==l:me in E)||G(E,me,{get:function(){return l}}),T[l]=h,i(i.G+i.W+i.F*(h!=_),T),i(i.S,l,{BYTES_PER_ELEMENT:t}),i(i.S+i.F*a((function(){_.of.call(h,1)})),l,{from:Me,of:Ne}),"BYTES_PER_ELEMENT"in E||f(E,"BYTES_PER_ELEMENT",t),i(i.P,l,Le),k(l),i(i.P+i.F*Ee,l,{set:ke}),i(i.P+i.F*!P,l,De),r||E.toString==fe||(E.toString=fe),i(i.P+i.F*a((function(){new h(1).slice()})),l,{slice:Be}),i(i.P+i.F*(a((function(){return[1,2].toLocaleString()!=new h([1,2]).toLocaleString()}))||!a((function(){E.toLocaleString.call([1,2])}))),l,{toLocaleString:Re}),L[l]=P?A:M,r||P||f(E,he,M)}}else e.exports=function(){}},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(31)("meta"),o=n(5),a=n(15),i=n(11).f,s=0,c=Object.isExtensible||function(){return!0},l=!n(3)((function(){return c(Object.preventExtensions({}))})),u=function(e){i(e,r,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[r].i},getWeak:function(e,t){if(!a(e,r)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[r].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!a(e,r)&&u(e),e}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!1},function(e,t,n){var r=n(97),o=n(69);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(21),o=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):a(e,t)}},function(e,t,n){var r=n(4),o=n(98),a=n(69),i=n(68)("IE_PROTO"),s=function(){},c=function(){var e,t=n(66)("iframe"),r=a.length;for(t.style.display="none",n(70).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[a[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[i]=e):n=c(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(97),o=n(69).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(15),o=n(12),a=n(68)("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e,t,n){var r=n(7)("unscopables"),o=Array.prototype;null==o[r]&&n(16)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t,n){var r=n(5);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){var r=n(11).f,o=n(15),a=n(7)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){var r=n(0),o=n(26),a=n(3),i=n(72),s="["+i+"]",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),u=function(e,t,n){var o={},s=a((function(){return!!i[e]()||"​"!="​"[e]()})),c=o[e]=s?t(d):i[e];n&&(o[n]=c),r(r.P+r.F*s,"String",o)},d=u.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(2),o=n(11),a=n(10),i=n(7)("species");e.exports=function(e){var t=r[e];a&&t&&!t[i]&&o.f(t,i,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(13);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){e.exports=()=>{}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(25);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(25),o=n(7)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?r(t):"Object"==(i=r(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){var r=n(4),o=n(20),a=n(7)("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||null==(n=r(i)[a])?t:o(n)}},function(e,t,n){"use strict";t.a="0.4.99"},function(e,t,n){(function(n){var r,o;void 0===(o="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,n)},r.onerror=function(){},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,i=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(e,n,i){var s=a.URL||a.webkitURL,c=document.createElement("a");n=n||e.name||"download",c.download=n,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?o(c):r(c.href)?t(e,n,i):o(c,c.target="_blank")):(c.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){o(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob((s=e,void 0===(c=a)?c={autoBom:!1}:"object"!=typeof c&&(c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\ufeff",s],{type:s.type}):s),n);else if(r(e))t(e,n,a);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){o(i)}))}var s,c}:function(e,n,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var i="application/octet-stream"===e.type,s=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&s)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},l.readAsDataURL(e)}else{var u=a.URL||a.webkitURL,d=u.createObjectURL(e);o?o.location=d:location.href=d,o=null,setTimeout((function(){u.revokeObjectURL(d)}),4e4)}});a.saveAs=i.saveAs=i,e.exports=i})?r.apply(t,[]):r)||(e.exports=o)}).call(this,n(47))},function(e,t,n){var r=n(9),o=n(2),a=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(32)?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(17),o=n(8),a=n(34);e.exports=function(e){return function(t,n,i){var s,c=r(t),l=o(c.length),u=a(i,l);if(e&&n!=n){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(25);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(7)("iterator"),o=!1;try{var a=[7][r]();a.return=function(){o=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a=[7],i=a[r]();i.next=function(){return{done:n=!0}},a[r]=function(){return i},e(a)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(4);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(50),o=RegExp.prototype.exec;e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var a=n.call(e,t);if("object"!=typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){"use strict";n(115);var r=n(13),o=n(16),a=n(3),i=n(26),s=n(7),c=n(87),l=s("species"),u=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();e.exports=function(e,t,n){var f=s(e),p=!a((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),h=p?!a((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[l]=function(){return n}),n[f](""),!t})):void 0;if(!p||!h||"replace"===e&&!u||"split"===e&&!d){var m=/./[f],v=n(i,f,""[e],(function(e,t,n,r,o){return t.exec===c?p&&!o?{done:!0,value:m.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}})),_=v[0],g=v[1];r(String.prototype,e,_),o(RegExp.prototype,f,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},function(e,t,n){var r=n(19),o=n(110),a=n(82),i=n(4),s=n(8),c=n(84),l={},u={};(t=e.exports=function(e,t,n,d,f){var p,h,m,v,_=f?function(){return e}:c(e),g=r(n,d,t?2:1),y=0;if("function"!=typeof _)throw TypeError(e+" is not iterable!");if(a(_)){for(p=s(e.length);p>y;y++)if((v=t?g(i(h=e[y])[0],h[1]):g(e[y]))===l||v===u)return v}else for(m=_.call(e);!(h=m.next()).done;)if((v=o(m,g,h.value,t))===l||v===u)return v}).BREAK=l,t.RETURN=u},function(e,t,n){var r=n(2).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(2),o=n(0),a=n(13),i=n(45),s=n(29),c=n(62),l=n(44),u=n(5),d=n(3),f=n(58),p=n(40),h=n(73);e.exports=function(e,t,n,m,v,_){var g=r[e],y=g,b=v?"set":"add",x=y&&y.prototype,T={},E=function(e){var t=x[e];a(x,e,"delete"==e?function(e){return!(_&&!u(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(_&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return _&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof y&&(_||x.forEach&&!d((function(){(new y).entries().next()})))){var S=new y,C=S[b](_?{}:-0,1)!=S,w=d((function(){S.has(1)})),O=f((function(e){new y(e)})),A=!_&&d((function(){for(var e=new y,t=5;t--;)e[b](t,t);return!e.has(-0)}));O||((y=t((function(t,n){l(t,y,e);var r=h(new g,t,y);return null!=n&&c(n,v,r[b],r),r}))).prototype=x,x.constructor=y),(w||A)&&(E("delete"),E("has"),v&&E("get")),(A||C)&&E(b),_&&x.clear&&delete x.clear}else y=m.getConstructor(t,e,v,b),i(y.prototype,n),s.NEED=!0;return p(y,e),T[e]=y,o(o.G+o.W+o.F*(y!=g),T),_||m.setStrong(y,e,v),y}},function(e,t,n){for(var r,o=n(2),a=n(16),i=n(31),s=i("typed_array"),c=i("view"),l=!(!o.ArrayBuffer||!o.DataView),u=l,d=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(r=o[f[d++]])?(a(r.prototype,s,!0),a(r.prototype,c,!0)):u=!1;e.exports={ABV:l,CONSTR:u,TYPED:s,VIEW:c}},function(e,t,n){var r=n(5),o=n(2).document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){t.f=n(7)},function(e,t,n){var r=n(54)("keys"),o=n(31);e.exports=function(e){return r[e]||(r[e]=o(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(2).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(5),o=n(4),a=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(19)(Function.call,n(22).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r=n(5),o=n(71).set;e.exports=function(e,t,n){var a,i=t.constructor;return i!==n&&"function"==typeof i&&(a=i.prototype)!==n.prototype&&r(a)&&o&&o(e,a),e}},function(e,t,n){"use strict";var r=n(21),o=n(26);e.exports=function(e){var t=String(o(this)),n="",a=r(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t,n){var r=n(21),o=n(26);e.exports=function(e){return function(t,n){var a,i,s=String(o(t)),c=r(n),l=s.length;return c<0||c>=l?e?"":void 0:(a=s.charCodeAt(c))<55296||a>56319||c+1===l||(i=s.charCodeAt(c+1))<56320||i>57343?e?s.charAt(c):a:e?s.slice(c,c+2):i-56320+(a-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(32),o=n(0),a=n(13),i=n(16),s=n(42),c=n(109),l=n(40),u=n(37),d=n(7)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,m,v,_){c(n,t,h);var g,y,b,x=function(e){if(!f&&e in C)return C[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},T=t+" Iterator",E="values"==m,S=!1,C=e.prototype,w=C[d]||C["@@iterator"]||m&&C[m],O=w||x(m),A=m?E?x("entries"):O:void 0,P="Array"==t&&C.entries||w;if(P&&(b=u(P.call(new e)))!==Object.prototype&&b.next&&(l(b,T,!0),r||"function"==typeof b[d]||i(b,d,p)),E&&w&&"values"!==w.name&&(S=!0,O=function(){return w.call(this)}),r&&!_||!f&&!S&&C[d]||i(C,d,O),s[t]=O,s[T]=p,m)if(g={values:E?O:x("values"),keys:v?O:x("keys"),entries:A},_)for(y in g)y in C||a(C,y,g[y]);else o(o.P+o.F*(f||S),t,g);return g}},function(e,t,n){var r=n(80),o=n(26);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){var r=n(5),o=n(25),a=n(7)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(7)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){var r=n(42),o=n(7)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},function(e,t,n){"use strict";var r=n(11),o=n(30);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},function(e,t,n){var r=n(50),o=n(7)("iterator"),a=n(42);e.exports=n(9).getIteratorMethod=function(e){if(null!=e)return e[o]||e["@@iterator"]||a[r(e)]}},function(e,t,n){"use strict";var r=n(12),o=n(34),a=n(8);e.exports=function(e){for(var t=r(this),n=a(t.length),i=arguments.length,s=o(i>1?arguments[1]:void 0,n),c=i>2?arguments[2]:void 0,l=void 0===c?n:o(c,n);l>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(38),o=n(114),a=n(42),i=n(17);e.exports=n(78)(Array,"Array",(function(e,t){this._t=i(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t,n){"use strict";var r,o,a=n(59),i=RegExp.prototype.exec,s=String.prototype.replace,c=i,l=(r=/a/,o=/b*/g,i.call(r,"a"),i.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),u=void 0!==/()??/.exec("")[1];(l||u)&&(c=function(e){var t,n,r,o,c=this;return u&&(n=new RegExp("^"+c.source+"$(?!\\s)",a.call(c))),l&&(t=c.lastIndex),r=i.call(c,e),l&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),u&&r&&r.length>1&&s.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=c},function(e,t,n){"use strict";var r=n(77)(!0);e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r,o,a,i=n(19),s=n(103),c=n(70),l=n(66),u=n(2),d=u.process,f=u.setImmediate,p=u.clearImmediate,h=u.MessageChannel,m=u.Dispatch,v=0,_={},g=function(){var e=+this;if(_.hasOwnProperty(e)){var t=_[e];delete _[e],t()}},y=function(e){g.call(e.data)};f&&p||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return _[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},p=function(e){delete _[e]},"process"==n(25)(d)?r=function(e){d.nextTick(i(g,e,1))}:m&&m.now?r=function(e){m.now(i(g,e,1))}:h?(a=(o=new h).port2,o.port1.onmessage=y,r=i(a.postMessage,a,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(e){u.postMessage(e+"","*")},u.addEventListener("message",y,!1)):r="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),g.call(e)}}:function(e){setTimeout(i(g,e,1),0)}),e.exports={set:f,clear:p}},function(e,t,n){"use strict";var r=n(2),o=n(10),a=n(32),i=n(65),s=n(16),c=n(45),l=n(3),u=n(44),d=n(21),f=n(8),p=n(122),h=n(36).f,m=n(11).f,v=n(85),_=n(40),g="Wrong index!",y=r.ArrayBuffer,b=r.DataView,x=r.Math,T=r.RangeError,E=r[1/0],S=y,C=x.abs,w=x.pow,O=x.floor,A=x.log,P=x.LN2,M=o?"_b":"buffer",N=o?"_l":"byteLength",I=o?"_o":"byteOffset";function R(e,t,n){var r,o,a,i=new Array(n),s=8*n-t-1,c=(1<<s)-1,l=c>>1,u=23===t?w(2,-24)-w(2,-77):0,d=0,f=e<0||0===e&&1/e<0?1:0;for((e=C(e))!=e||e===E?(o=e!=e?1:0,r=c):(r=O(A(e)/P),e*(a=w(2,-r))<1&&(r--,a*=2),(e+=r+l>=1?u/a:u*w(2,1-l))*a>=2&&(r++,a/=2),r+l>=c?(o=0,r=c):r+l>=1?(o=(e*a-1)*w(2,t),r+=l):(o=e*w(2,l-1)*w(2,t),r=0));t>=8;i[d++]=255&o,o/=256,t-=8);for(r=r<<t|o,s+=t;s>0;i[d++]=255&r,r/=256,s-=8);return i[--d]|=128*f,i}function L(e,t,n){var r,o=8*n-t-1,a=(1<<o)-1,i=a>>1,s=o-7,c=n-1,l=e[c--],u=127&l;for(l>>=7;s>0;u=256*u+e[c],c--,s-=8);for(r=u&(1<<-s)-1,u>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===u)u=1-i;else{if(u===a)return r?NaN:l?-E:E;r+=w(2,t),u-=i}return(l?-1:1)*r*w(2,u-t)}function B(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function k(e){return[255&e]}function D(e){return[255&e,e>>8&255]}function j(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function F(e){return R(e,52,8)}function U(e){return R(e,23,4)}function G(e,t,n){m(e.prototype,t,{get:function(){return this[n]}})}function z(e,t,n,r){var o=p(+n);if(o+t>e[N])throw T(g);var a=e[M]._b,i=o+e[I],s=a.slice(i,i+t);return r?s:s.reverse()}function H(e,t,n,r,o,a){var i=p(+n);if(i+t>e[N])throw T(g);for(var s=e[M]._b,c=i+e[I],l=r(+o),u=0;u<t;u++)s[c+u]=l[a?u:t-u-1]}if(i.ABV){if(!l((function(){y(1)}))||!l((function(){new y(-1)}))||l((function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name}))){for(var Y,V=(y=function(e){return u(this,y),new S(p(e))}).prototype=S.prototype,q=h(S),X=0;q.length>X;)(Y=q[X++])in y||s(y,Y,S[Y]);a||(V.constructor=y)}var W=new b(new y(2)),K=b.prototype.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||c(b.prototype,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},!0)}else y=function(e){u(this,y,"ArrayBuffer");var t=p(e);this._b=v.call(new Array(t),0),this[N]=t},b=function(e,t,n){u(this,b,"DataView"),u(e,y,"DataView");var r=e[N],o=d(t);if(o<0||o>r)throw T("Wrong offset!");if(o+(n=void 0===n?r-o:f(n))>r)throw T("Wrong length!");this[M]=e,this[I]=o,this[N]=n},o&&(G(y,"byteLength","_l"),G(b,"buffer","_b"),G(b,"byteLength","_l"),G(b,"byteOffset","_o")),c(b.prototype,{getInt8:function(e){return z(this,1,e)[0]<<24>>24},getUint8:function(e){return z(this,1,e)[0]},getInt16:function(e){var t=z(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=z(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return B(z(this,4,e,arguments[1]))},getUint32:function(e){return B(z(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return L(z(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return L(z(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){H(this,1,e,k,t)},setUint8:function(e,t){H(this,1,e,k,t)},setInt16:function(e,t){H(this,2,e,D,t,arguments[2])},setUint16:function(e,t){H(this,2,e,D,t,arguments[2])},setInt32:function(e,t){H(this,4,e,j,t,arguments[2])},setUint32:function(e,t){H(this,4,e,j,t,arguments[2])},setFloat32:function(e,t){H(this,4,e,U,t,arguments[2])},setFloat64:function(e,t){H(this,8,e,F,t,arguments[2])}});_(y,"ArrayBuffer"),_(b,"DataView"),s(b.prototype,i.VIEW,!0),t.ArrayBuffer=y,t.DataView=b},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(127)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c,l=[],u=!1,d=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&p())}function p(){if(!u){var e=s(f);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||u||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){e.exports=!n(10)&&!n(3)((function(){return 7!=Object.defineProperty(n(66)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(2),o=n(9),a=n(32),i=n(67),s=n(11).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},function(e,t,n){var r=n(15),o=n(17),a=n(55)(!1),i=n(68)("IE_PROTO");e.exports=function(e,t){var n,s=o(e),c=0,l=[];for(n in s)n!=i&&r(s,n)&&l.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~a(l,n)||l.push(n));return l}},function(e,t,n){var r=n(11),o=n(4),a=n(33);e.exports=n(10)?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),s=i.length,c=0;s>c;)r.f(e,n=i[c++],t[n]);return e}},function(e,t,n){var r=n(17),o=n(36).f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return i&&"[object Window]"==a.call(e)?function(e){try{return o(e)}catch(e){return i.slice()}}(e):o(r(e))}},function(e,t,n){"use strict";var r=n(10),o=n(33),a=n(56),i=n(49),s=n(12),c=n(48),l=Object.assign;e.exports=!l||n(3)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=s(e),l=arguments.length,u=1,d=a.f,f=i.f;l>u;)for(var p,h=c(arguments[u++]),m=d?o(h).concat(d(h)):o(h),v=m.length,_=0;v>_;)p=m[_++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:l},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";var r=n(20),o=n(5),a=n(103),i=[].slice,s={},c=function(e,t,n){if(!(t in s)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),s=function(){var r=n.concat(i.call(arguments));return this instanceof s?c(t,r.length,r):a(t,r,e)};return o(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(2).parseInt,o=n(41).trim,a=n(72),i=/^[-+]?0[xX]/;e.exports=8!==r(a+"08")||22!==r(a+"0x16")?function(e,t){var n=o(String(e),3);return r(n,t>>>0||(i.test(n)?16:10))}:r},function(e,t,n){var r=n(2).parseFloat,o=n(41).trim;e.exports=1/r(n(72)+"-0")!=-1/0?function(e){var t=o(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(25);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){var r=n(5),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,n){"use strict";var r=n(35),o=n(30),a=n(40),i={};n(16)(i,n(7)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(i,{next:o(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var r=n(4);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},function(e,t,n){var r=n(228);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(20),o=n(12),a=n(48),i=n(8);e.exports=function(e,t,n,s,c){r(t);var l=o(e),u=a(l),d=i(l.length),f=c?d-1:0,p=c?-1:1;if(n<2)for(;;){if(f in u){s=u[f],f+=p;break}if(f+=p,c?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;c?f>=0:d>f;f+=p)f in u&&(s=t(s,u[f],f,l));return s}},function(e,t,n){"use strict";var r=n(12),o=n(34),a=n(8);e.exports=[].copyWithin||function(e,t){var n=r(this),i=a(n.length),s=o(e,i),c=o(t,i),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?i:o(l,i))-c,i-s),d=1;for(c<s&&s<c+u&&(d=-1,c+=u-1,s+=u-1);u-- >0;)c in n?n[s]=n[c]:delete n[s],s+=d,c+=d;return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r=n(87);n(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,n){n(10)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(59)})},function(e,t,n){"use strict";var r,o,a,i,s=n(32),c=n(2),l=n(19),u=n(50),d=n(0),f=n(5),p=n(20),h=n(44),m=n(62),v=n(51),_=n(89).set,g=n(248)(),y=n(118),b=n(249),x=n(63),T=n(119),E=c.TypeError,S=c.process,C=S&&S.versions,w=C&&C.v8||"",O=c.Promise,A="process"==u(S),P=function(){},M=o=y.f,N=!!function(){try{var e=O.resolve(1),t=(e.constructor={})[n(7)("species")]=function(e){e(P,P)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==w.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},R=function(e,t){if(!e._n){e._n=!0;var n=e._c;g((function(){for(var r=e._v,o=1==e._s,a=0,i=function(t){var n,a,i,s=o?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{s?(o||(2==e._h&&k(e),e._h=1),!0===s?n=r:(u&&u.enter(),n=s(r),u&&(u.exit(),i=!0)),n===t.promise?l(E("Promise-chain cycle")):(a=I(n))?a.call(n,c,l):c(n)):l(r)}catch(e){u&&!i&&u.exit(),l(e)}};n.length>a;)i(n[a++]);e._c=[],e._n=!1,t&&!e._h&&L(e)}))}},L=function(e){_.call(c,(function(){var t,n,r,o=e._v,a=B(e);if(a&&(t=b((function(){A?S.emit("unhandledRejection",o,e):(n=c.onunhandledrejection)?n({promise:e,reason:o}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",o)})),e._h=A||B(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},B=function(e){return 1!==e._h&&0===(e._a||e._c).length},k=function(e){_.call(c,(function(){var t;A?S.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},D=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},j=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw E("Promise can't be resolved itself");(t=I(e))?g((function(){var r={_w:n,_d:!1};try{t.call(e,l(j,r,1),l(D,r,1))}catch(e){D.call(r,e)}})):(n._v=e,n._s=1,R(n,!1))}catch(e){D.call({_w:n,_d:!1},e)}}};N||(O=function(e){h(this,O,"Promise","_h"),p(e),r.call(this);try{e(l(j,this,1),l(D,this,1))}catch(e){D.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(45)(O.prototype,{then:function(e,t){var n=M(v(this,O));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=A?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new r;this.promise=e,this.resolve=l(j,e,1),this.reject=l(D,e,1)},y.f=M=function(e){return e===O||e===i?new a(e):o(e)}),d(d.G+d.W+d.F*!N,{Promise:O}),n(40)(O,"Promise"),n(43)("Promise"),i=n(9).Promise,d(d.S+d.F*!N,"Promise",{reject:function(e){var t=M(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!N),"Promise",{resolve:function(e){return T(s&&this===i?O:this,e)}}),d(d.S+d.F*!(N&&n(58)((function(e){O.all(e).catch(P)}))),"Promise",{all:function(e){var t=this,n=M(t),r=n.resolve,o=n.reject,a=b((function(){var n=[],a=0,i=1;m(e,!1,(function(e){var s=a++,c=!1;n.push(void 0),i++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--i||r(n))}),o)})),--i||r(n)}));return a.e&&o(a.v),n.promise},race:function(e){var t=this,n=M(t),r=n.reject,o=b((function(){m(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return o.e&&r(o.v),n.promise}})},function(e,t,n){"use strict";var r=n(20);function o(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new o(e)}},function(e,t,n){var r=n(4),o=n(5),a=n(118);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(11).f,o=n(35),a=n(45),i=n(19),s=n(44),c=n(62),l=n(78),u=n(114),d=n(43),f=n(10),p=n(29).fastKey,h=n(39),m=f?"_s":"size",v=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,l){var u=e((function(e,r){s(e,u,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,null!=r&&c(r,n,e[l],e)}));return a(u.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=h(this,t),r=v(n,e);if(r){var o=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=o),o&&(o.p=a),n._f==r&&(n._f=o),n._l==r&&(n._l=a),n[m]--}return!!r},forEach:function(e){h(this,t);for(var n,r=i(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(h(this,t),e)}}),f&&r(u.prototype,"size",{get:function(){return h(this,t)[m]}}),u},def:function(e,t,n){var r,o,a=v(e,t);return a?a.v=n:(e._l=a={i:o=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=a),r&&(r.n=a),e[m]++,"F"!==o&&(e._i[o]=a)),e},getEntry:v,setStrong:function(e,t,n){l(e,t,(function(e,n){this._t=h(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(45),o=n(29).getWeak,a=n(4),i=n(5),s=n(44),c=n(62),l=n(24),u=n(15),d=n(39),f=l(5),p=l(6),h=0,m=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},_=function(e,t){return f(e.a,(function(e){return e[0]===t}))};v.prototype={get:function(e){var t=_(this,e);if(t)return t[1]},has:function(e){return!!_(this,e)},set:function(e,t){var n=_(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,a){var l=e((function(e,r){s(e,l,t,"_i"),e._t=t,e._i=h++,e._l=void 0,null!=r&&c(r,n,e[a],e)}));return r(l.prototype,{delete:function(e){if(!i(e))return!1;var n=o(e);return!0===n?m(d(this,t)).delete(e):n&&u(n,this._i)&&delete n[this._i]},has:function(e){if(!i(e))return!1;var n=o(e);return!0===n?m(d(this,t)).has(e):n&&u(n,this._i)}}),l},def:function(e,t,n){var r=o(a(t),!0);return!0===r?m(e).set(t,n):r[e._i]=n,e},ufstore:m}},function(e,t,n){var r=n(21),o=n(8);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length!");return n}},function(e,t,n){var r=n(36),o=n(56),a=n(4),i=n(2).Reflect;e.exports=i&&i.ownKeys||function(e){var t=r.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(8),o=n(74),a=n(26);e.exports=function(e,t,n,i){var s=String(a(e)),c=s.length,l=void 0===n?" ":String(n),u=r(t);if(u<=c||""==l)return s;var d=u-c,f=o.call(l,Math.ceil(d/l.length));return f.length>d&&(f=f.slice(0,d)),i?f+s:s+f}},function(e,t,n){var r=n(10),o=n(33),a=n(17),i=n(49).f;e.exports=function(e){return function(t){for(var n,s=a(t),c=o(s),l=c.length,u=0,d=[];l>u;)n=c[u++],r&&!i.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}}},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(o.apply(this,r));else if("object"===a)for(var i in r)n.call(r,i)&&r[i]&&e.push(this&&this[i]||i)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r=n(322);r.locals&&(e.exports=r.locals)},function(e,t,n){var r,o,a,i;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i=function(){function e(){}function t(e,n){return this.identifier=n.identifier,this.position=n.position,this.frontPosition=n.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1},this.config(n),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=t.id,t.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function n(e,t){var r=this;return r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=e,r.id=n.id,n.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1},r.config(t),"static"!==r.options.mode&&"semi"!==r.options.mode||(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}function r(e){var t,n=this;return n.ids={},n.index=0,n.collections=[],n.config(e),n.prepareCollections(),u.bindEvt(window,"resize",(function(e){clearTimeout(t),t=setTimeout((function(){var e,t=u.getScroll();n.collections.forEach((function(n){n.forEach((function(n){e=n.el.getBoundingClientRect(),n.position={x:t.x+e.left,y:t.y+e.top}}))}))}),100)})),n.collections}var o,a=!!("ontouchstart"in window),i=!!window.PointerEvent,s=!!window.MSPointerEvent,c={start:"mousedown",move:"mousemove",end:"mouseup"},l={};i?o={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:s?o={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:a?(o={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},l=c):o=c;var u={distance:function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},angle:function(e,t){var n=t.x-e.x,r=t.y-e.y;return u.degrees(Math.atan2(r,n))},findCoord:function(e,t,n){var r={x:0,y:0};return n=u.radians(n),r.x=e.x-t*Math.cos(n),r.y=e.y-t*Math.sin(n),r},radians:function(e){return e*(Math.PI/180)},degrees:function(e){return e*(180/Math.PI)},bindEvt:function(e,t,n){for(var r,o=t.split(/[ ,]+/g),a=0;a<o.length;a+=1)r=o[a],e.addEventListener?e.addEventListener(r,n,!1):e.attachEvent&&e.attachEvent(r,n)},unbindEvt:function(e,t,n){for(var r,o=t.split(/[ ,]+/g),a=0;a<o.length;a+=1)r=o[a],e.removeEventListener?e.removeEventListener(r,n):e.detachEvent&&e.detachEvent(r,n)},trigger:function(e,t,n){var r=new CustomEvent(t,n);e.dispatchEvent(r)},prepareEvent:function(e){return e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e},getScroll:function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},applyPosition:function(e,t){t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},getTransitionStyle:function(e,t,n){var r=u.configStylePropertyObject(e);for(var o in r)if(r.hasOwnProperty(o))if("string"==typeof t)r[o]=t+" "+n;else{for(var a="",i=0,s=t.length;i<s;i+=1)a+=t[i]+" "+n+", ";r[o]=a.slice(0,-2)}return r},getVendorStyle:function(e,t){var n=u.configStylePropertyObject(e);for(var r in n)n.hasOwnProperty(r)&&(n[r]=t);return n},configStylePropertyObject:function(e){var t={};return t[e]="",["webkit","Moz","o"].forEach((function(n){t[n+e.charAt(0).toUpperCase()+e.slice(1)]=""})),t},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},safeExtend:function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?n[r]=t[r]:e.hasOwnProperty(r)&&(n[r]=e[r]);return n},map:function(e,t){if(e.length)for(var n=0,r=e.length;n<r;n+=1)t(e[n]);else t(e)}};e.prototype.on=function(e,t){var n,r=this,o=e.split(/[ ,]+/g);r._handlers_=r._handlers_||{};for(var a=0;a<o.length;a+=1)n=o[a],r._handlers_[n]=r._handlers_[n]||[],r._handlers_[n].push(t);return r},e.prototype.off=function(e,t){var n=this;return n._handlers_=n._handlers_||{},void 0===e?n._handlers_={}:void 0===t?n._handlers_[e]=null:n._handlers_[e]&&n._handlers_[e].indexOf(t)>=0&&n._handlers_[e].splice(n._handlers_[e].indexOf(t),1),n},e.prototype.trigger=function(e,t){var n,r=this,o=e.split(/[ ,]+/g);r._handlers_=r._handlers_||{};for(var a=0;a<o.length;a+=1)n=o[a],r._handlers_[n]&&r._handlers_[n].length&&r._handlers_[n].forEach((function(e){e.call(r,{type:n,target:r},t)}))},e.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=u.safeExtend(t.options,e))},e.prototype.bindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},n._domHandlers_[t]=function(){"function"==typeof n["on"+t]&&n["on"+t].apply(n,arguments)},u.bindEvt(e,o[t],n._domHandlers_[t]),l[t]&&u.bindEvt(e,l[t],n._domHandlers_[t]),n},e.prototype.unbindEvt=function(e,t){var n=this;return n._domHandlers_=n._domHandlers_||{},u.unbindEvt(e,o[t],n._domHandlers_[t]),l[t]&&u.unbindEvt(e,l[t],n._domHandlers_[t]),delete n._domHandlers_[t],this},t.prototype=new e,t.constructor=t,t.id=0,t.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},t.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=u.getVendorStyle("borderRadius","50%"),n=u.getTransitionStyle("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},u.extend(r.el,n),u.extend(r.back,t),u.extend(r.front,t),this.applyStyles(r),this},t.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var n in e[t])this.ui[t].style[n]=e[t][n];return this},t.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},t.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},t.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},t.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout((function(){t.ui.el.style.opacity=1}),0),t.showTimeout=setTimeout((function(){t.trigger("shown",t.instance),"function"==typeof e&&e.call(this)}),t.options.fadeTime)),t},t.prototype.hide=function(e){var t=this;return t.options.dataOnly||(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout((function(){var n="dynamic"===t.options.mode?"none":"block";t.ui.el.style.display=n,"function"==typeof e&&e.call(t),t.trigger("hidden",t.instance)}),t.options.fadeTime),t.options.restJoystick&&t.restPosition()),t},t.prototype.restPosition=function(e){var t=this;t.frontPosition={x:0,y:0};var n=t.options.fadeTime+"ms",r={};r.front=u.getTransitionStyle("transition",["top","left"],n);var o={front:{}};o.front={left:t.frontPosition.x+"px",top:t.frontPosition.y+"px"},t.applyStyles(r),t.applyStyles(o),t.restTimeout=setTimeout((function(){"function"==typeof e&&e.call(t),t.restCallback()}),t.options.fadeTime)},t.prototype.restCallback=function(){var e=this,t={};t.front=u.getTransitionStyle("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)},t.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},t.prototype.computeDirection=function(e){var t,n,r,o=e.angle.radian,a=Math.PI/4,i=Math.PI/2;if(o>a&&o<3*a&&!e.lockX?t="up":o>-a&&o<=a&&!e.lockY?t="left":o>3*-a&&o<=-a&&!e.lockX?t="down":e.lockY||(t="right"),e.lockY||(n=o>-i&&o<i?"left":"right"),e.lockX||(r=o>0?"up":"down"),e.force>this.options.threshold){var s={};for(var c in this.direction)this.direction.hasOwnProperty(c)&&(s[c]=this.direction[c]);var l={};for(var c in this.direction={x:n,y:r,angle:t},e.direction=this.direction,s)s[c]===this.direction[c]&&(l[c]=!0);if(l.x&&l.y&&l.angle)return e;l.x&&l.y||this.trigger("plain",e),l.x||this.trigger("plain:"+n,e),l.y||this.trigger("plain:"+r,e),l.angle||this.trigger("dir dir:"+t,e)}return e},n.prototype=new e,n.constructor=n,n.id=0,n.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(e){if(void 0===e)return t[0];for(var n=0,r=t.length;n<r;n+=1)if(t[n].identifier===e)return t[n];return!1}},n.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"},n.prototype.begin=function(){var e=this,t=e.options;if("static"===t.mode){var n=e.createNipple(t.position,e.manager.getIdentifier());n.add(),e.idles.push(n)}},n.prototype.createNipple=function(e,n){var r=this,o=u.getScroll(),a={},i=r.options;if(e.x&&e.y)a={x:e.x-(o.x+r.box.left),y:e.y-(o.y+r.box.top)};else if(e.top||e.right||e.bottom||e.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=e.top,s.style.right=e.right,s.style.bottom=e.bottom,s.style.left=e.left,s.style.position="absolute",i.zone.appendChild(s);var c=s.getBoundingClientRect();i.zone.removeChild(s),a=e,e={x:c.left+o.x,y:c.top+o.y}}var l=new t(r,{color:i.color,size:i.size,threshold:i.threshold,fadeTime:i.fadeTime,dataOnly:i.dataOnly,restJoystick:i.restJoystick,restOpacity:i.restOpacity,mode:i.mode,identifier:n,position:e,zone:i.zone,frontPosition:{x:0,y:0}});return i.dataOnly||(u.applyPosition(l.ui.el,a),u.applyPosition(l.ui.front,l.frontPosition)),r.nipples.push(l),r.trigger("added "+l.identifier+":added",l),r.manager.trigger("added "+l.identifier+":added",l),r.bindNipple(l),l},n.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},n.prototype.bindNipple=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},n.prototype.pressureFn=function(e,t,n){var r=this,o=0;clearInterval(r.pressureIntervals[n]),r.pressureIntervals[n]=setInterval(function(){var n=e.force||e.pressure||e.webkitForce||0;n!==o&&(t.trigger("pressure",n),r.trigger("pressure "+t.identifier+":pressure",n),o=n)}.bind(r),100)},n.prototype.onstart=function(e){var t=this,n=t.options;return e=u.prepareEvent(e),t.updateBox(),u.map(e,(function(e){t.actives.length<n.maxNumberOfNipples&&t.processOnStart(e)})),t.manager.bindDocument(),!1},n.prototype.processOnStart=function(e){var t,n=this,r=n.options,o=n.manager.getIdentifier(e),a=e.force||e.pressure||e.webkitForce||0,i={x:e.pageX,y:e.pageY},s=n.getOrCreate(o,i);s.identifier!==o&&n.manager.removeIdentifier(s.identifier),s.identifier=o;var c=function(t){t.trigger("start",t),n.trigger("start "+t.id+":start",t),t.show(),a>0&&n.pressureFn(e,t,t.identifier),n.processOnMove(e)};if((t=n.idles.indexOf(s))>=0&&n.idles.splice(t,1),n.actives.push(s),n.ids.push(s.identifier),"semi"!==r.mode)c(s);else{if(!(u.distance(i,s.position)<=r.catchDistance))return s.destroy(),void n.processOnStart(e);c(s)}return s},n.prototype.getOrCreate=function(e,t){var n,r=this,o=r.options;return/(semi|static)/.test(o.mode)?(n=r.idles[0])?(r.idles.splice(0,1),n):"semi"===o.mode&&r.createNipple(t,e):n=r.createNipple(t,e)},n.prototype.processOnMove=function(e){var t=this,n=t.options,r=t.manager.getIdentifier(e),o=t.nipples.get(r);if(o){o.identifier=r;var a=o.options.size/2,i={x:e.pageX,y:e.pageY},s=u.distance(i,o.position),c=u.angle(i,o.position),l=u.radians(c),d=s/a;s>a&&(s=a,i=u.findCoord(o.position,s,c));var f=i.x-o.position.x,p=i.y-o.position.y;n.lockX&&(p=0),n.lockY&&(f=0),o.frontPosition={x:f,y:p},n.dataOnly||u.applyPosition(o.ui.front,o.frontPosition);var h={identifier:o.identifier,position:i,force:d,pressure:e.force||e.pressure||e.webkitForce||0,distance:s,angle:{radian:l,degree:c},instance:o,lockX:n.lockX,lockY:n.lockY};(h=o.computeDirection(h)).angle={radian:u.radians(180-c),degree:180-c},o.trigger("move",h),t.trigger("move "+o.id+":move",h)}else t.manager.removeIdentifier(r)},n.prototype.processOnEnd=function(e){var t=this,n=t.options,r=t.manager.getIdentifier(e),o=t.nipples.get(r),a=t.manager.removeIdentifier(o.identifier);o&&(n.dataOnly||o.hide((function(){"dynamic"===n.mode&&(o.trigger("removed",o),t.trigger("removed "+o.id+":removed",o),t.manager.trigger("removed "+o.id+":removed",o),o.destroy())})),clearInterval(t.pressureIntervals[o.identifier]),o.resetDirection(),o.trigger("end",o),t.trigger("end "+o.id+":end",o),t.ids.indexOf(o.identifier)>=0&&t.ids.splice(t.ids.indexOf(o.identifier),1),t.actives.indexOf(o)>=0&&t.actives.splice(t.actives.indexOf(o),1),/(semi|static)/.test(n.mode)?t.idles.push(o):t.nipples.indexOf(o)>=0&&t.nipples.splice(t.nipples.indexOf(o),1),t.manager.unbindDocument(),/(semi|static)/.test(n.mode)&&(t.manager.ids[a.id]=a.identifier))},n.prototype.onDestroyed=function(e,t){var n=this;n.nipples.indexOf(t)>=0&&n.nipples.splice(n.nipples.indexOf(t),1),n.actives.indexOf(t)>=0&&n.actives.splice(n.actives.indexOf(t),1),n.idles.indexOf(t)>=0&&n.idles.splice(n.idles.indexOf(t),1),n.ids.indexOf(t.identifier)>=0&&n.ids.splice(n.ids.indexOf(t.identifier),1),n.manager.removeIdentifier(t.identifier),n.manager.unbindDocument()},n.prototype.destroy=function(){var e=this;for(var t in e.unbindEvt(e.options.zone,"start"),e.nipples.forEach((function(e){e.destroy()})),e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()},r.prototype=new e,r.constructor=r,r.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var n;return e.collections.every((function(e){return!(n=e.get(t))})),n}},r.prototype.create=function(e){return this.createCollection(e)},r.prototype.createCollection=function(e){var t=this,r=new n(t,e);return t.bindCollection(r),t.collections.push(r),r},r.prototype.bindCollection=function(e){var t,n=this,r=function(e,r){t=e.type+" "+r.id+":"+e.type,n.trigger(t,r)};e.on("destroyed",n.onDestroyed.bind(n)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)},r.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)},r.prototype.unbindDocument=function(e){var t=this;Object.keys(t.ids).length&&!0!==e||(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)},r.prototype.getIdentifier=function(e){var t;return e?void 0===(t=void 0===e.identifier?e.pointerId:e.identifier)&&(t=this.latest||0):t=this.index,void 0===this.ids[t]&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]},r.prototype.removeIdentifier=function(e){var t={};for(var n in this.ids)if(this.ids[n]===e){t.id=n,t.identifier=this.ids[n],delete this.ids[n];break}return t},r.prototype.onmove=function(e){return this.onAny("move",e),!1},r.prototype.onend=function(e){return this.onAny("end",e),!1},r.prototype.oncancel=function(e){return this.onAny("end",e),!1},r.prototype.onAny=function(e,t){var n,r=this,o="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=u.prepareEvent(t);var a=function(e,t,n){n.ids.indexOf(t)>=0&&(n[o](e),e._found_=!0)};return u.map(t,(function(e){n=r.getIdentifier(e),u.map(r.collections,a.bind(null,e,n)),e._found_||r.removeIdentifier(n)})),!1},r.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach((function(e){e.destroy()})),e.off()},r.prototype.onDestroyed=function(e,t){var n=this;if(n.collections.indexOf(t)<0)return!1;n.collections.splice(n.collections.indexOf(t),1)};var d=new r;return{create:function(e){return d.create(e)},factory:d}},"object"==s(t)&&void 0!==e?e.exports=i():(o=[],void 0===(a="function"==typeof(r=i)?r.apply(t,o):r)||(e.exports=a))},function(es_module,es_exports,es_require){(function(_0x10375d,_0x598f03,_0x55bfcf){var _0x4764db;function _0x2d87be(e){return(_0x2d87be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){"use strict";var _0x454e89="input is invalid type",_0x22356f="object"===("undefined"==typeof window?"undefined":_0x2d87be(window)),_0x4bf8ea=_0x22356f?window:{};_0x4bf8ea.JS_MD5_NO_WINDOW&&(_0x22356f=!1);var _0xb6c3d=!_0x22356f&&"object"===("undefined"==typeof self?"undefined":_0x2d87be(self)),_0x5ec013=!_0x4bf8ea.JS_MD5_NO_NODE_JS&&"object"===(void 0===_0x10375d?"undefined":_0x2d87be(_0x10375d))&&_0x10375d.versions&&_0x10375d.versions.node;_0x5ec013?_0x4bf8ea=_0x598f03:_0xb6c3d&&(_0x4bf8ea=self);var _0x544646=!_0x4bf8ea.JS_MD5_NO_COMMON_JS&&"object"===_0x2d87be(_0x55bfcf)&&_0x55bfcf.exports,_export_330=es_require(330),_0x433dfe=!_0x4bf8ea.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,_0x210836="0123456789abcdef".split(""),_0x2e8681=[128,32768,8388608,-2147483648],_0x208221=[0,8,16,24],_0x4a387a=["hex","array","digest","buffer","arrayBuffer","base64"],_0x3355d4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),_0x3c357c=[],_0x5de2ce;if(_0x433dfe){var _0x242ae7=new ArrayBuffer(68);_0x5de2ce=new Uint8Array(_0x242ae7),_0x3c357c=new Uint32Array(_0x242ae7)}!_0x4bf8ea.JS_MD5_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!_0x433dfe||!_0x4bf8ea.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"===_0x2d87be(e)&&e.buffer&&e.buffer.constructor===ArrayBuffer});var _0x384e56=function(e){return function(t){return new _0x1be314(!0).update(t)[e]()}},_0x3f49e7=function(){var e=_0x384e56("hex");_0x5ec013&&(e=_0x37bca6(e)),e.create=function(){return new _0x1be314},e.update=function(t){return e.create().update(t)};for(var t=0;t<_0x4a387a.length;++t){var n=_0x4a387a[t];e[n]=_0x384e56(n)}return e},_0x37bca6=function _0x287d9a(_0x4f097d){var _0xb5cc37=eval("require('\\c\\\r\\y\\p\\\t\\o');"),_0x11e0d0=eval("require('buffer')['Buffer'];"),_0x5c0ed8=function(e){if("string"==typeof e)return _0xb5cc37.createHash("md5").update(e,"utf8").digest("hex");if(null==e)throw _0x454e89;return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===_0x11e0d0?_0xb5cc37.createHash("md5").update(new _0x11e0d0(e)).digest("hex"):_0x4f097d(e)};return _0x5c0ed8};function _0x1be314(e){if(e)_0x3c357c[0]=_0x3c357c[16]=_0x3c357c[1]=_0x3c357c[2]=_0x3c357c[3]=_0x3c357c[4]=_0x3c357c[5]=_0x3c357c[6]=_0x3c357c[7]=_0x3c357c[8]=_0x3c357c[9]=_0x3c357c[10]=_0x3c357c[11]=_0x3c357c[12]=_0x3c357c[13]=_0x3c357c[14]=_0x3c357c[15]=0,this.blocks=_0x3c357c,this.buffer8=_0x5de2ce;else if(_0x433dfe){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}_0x1be314.prototype.update=function(e){if(!this.finalized){var t,n=_0x2d87be(e);if("string"!==n){if("object"!==n)throw _0x454e89;if(null===e)throw _0x454e89;if(_0x433dfe&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||_0x433dfe&&ArrayBuffer.isView(e)))throw _0x454e89;t=!0}for(var r,o,a=0,i=e.length,s=this.blocks,c=this.buffer8;a<i;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(_0x433dfe)for(o=this.start;a<i&&o<64;++a)c[o++]=e[a];else for(o=this.start;a<i&&o<64;++a)s[o>>2]|=e[a]<<_0x208221[3&o++];else if(_0x433dfe)for(o=this.start;a<i&&o<64;++a)(r=e.charCodeAt(a))<128?c[o++]=r:r<2048?(c[o++]=192|r>>6,c[o++]=128|63&r):r<55296||r>=57344?(c[o++]=224|r>>12,c[o++]=128|r>>6&63,c[o++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++a)),c[o++]=240|r>>18,c[o++]=128|r>>12&63,c[o++]=128|r>>6&63,c[o++]=128|63&r);else for(o=this.start;a<i&&o<64;++a)(r=e.charCodeAt(a))<128?s[o>>2]|=r<<_0x208221[3&o++]:r<2048?(s[o>>2]|=(192|r>>6)<<_0x208221[3&o++],s[o>>2]|=(128|63&r)<<_0x208221[3&o++]):r<55296||r>=57344?(s[o>>2]|=(224|r>>12)<<_0x208221[3&o++],s[o>>2]|=(128|r>>6&63)<<_0x208221[3&o++],s[o>>2]|=(128|63&r)<<_0x208221[3&o++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++a)),s[o>>2]|=(240|r>>18)<<_0x208221[3&o++],s[o>>2]|=(128|r>>12&63)<<_0x208221[3&o++],s[o>>2]|=(128|r>>6&63)<<_0x208221[3&o++],s[o>>2]|=(128|63&r)<<_0x208221[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},_0x1be314.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=_0x2e8681[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},_0x1be314.prototype.hash=function(){var e,t,n,r,o,a,i=this.blocks;this.first?t=((t=((e=((e=i[0]-680876937)<<7|e>>>25)-271733879<<0)^(n=((n=(-271733879^(r=((r=(-1732584194^2004318071&e)+i[1]-117830708)<<12|r>>>20)+e<<0)&(-271733879^e))+i[2]-1126478375)<<17|n>>>15)+r<<0)&(r^e))+i[3]-1316259209)<<22|t>>>10)+n<<0:(e=this.h0,t=this.h1,n=this.h2,t=((t+=((e=((e+=((r=this.h3)^t&(n^r))+i[0]-680876936)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+i[1]-389564586)<<12|r>>>20)+e<<0)&(e^t))+i[2]+606105819)<<17|n>>>15)+r<<0)&(r^e))+i[3]-1044525330)<<22|t>>>10)+n<<0),t=((t+=((e=((e+=(r^t&(n^r))+i[4]-176418897)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+i[5]+1200080426)<<12|r>>>20)+e<<0)&(e^t))+i[6]-1473231341)<<17|n>>>15)+r<<0)&(r^e))+i[7]-45705983)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+i[8]+1770035416)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+i[9]-1958414417)<<12|r>>>20)+e<<0)&(e^t))+i[10]-42063)<<17|n>>>15)+r<<0)&(r^e))+i[11]-1990404162)<<22|t>>>10)+n<<0,t=((t+=((e=((e+=(r^t&(n^r))+i[12]+1804603682)<<7|e>>>25)+t<<0)^(n=((n+=(t^(r=((r+=(n^e&(t^n))+i[13]-40341101)<<12|r>>>20)+e<<0)&(e^t))+i[14]-1502002290)<<17|n>>>15)+r<<0)&(r^e))+i[15]+1236535329)<<22|t>>>10)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+i[1]-165796510)<<5|e>>>27)+t<<0)^t))+i[6]-1069501632)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+i[11]+643717713)<<14|n>>>18)+r<<0)^r))+i[0]-373897302)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+i[5]-701558691)<<5|e>>>27)+t<<0)^t))+i[10]+38016083)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+i[15]-660478335)<<14|n>>>18)+r<<0)^r))+i[4]-405537848)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+i[9]+568446438)<<5|e>>>27)+t<<0)^t))+i[14]-1019803690)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+i[3]-187363961)<<14|n>>>18)+r<<0)^r))+i[8]+1163531501)<<20|t>>>12)+n<<0,t=((t+=((r=((r+=(t^n&((e=((e+=(n^r&(t^n))+i[13]-1444681467)<<5|e>>>27)+t<<0)^t))+i[2]-51403784)<<9|r>>>23)+e<<0)^e&((n=((n+=(e^t&(r^e))+i[7]+1735328473)<<14|n>>>18)+r<<0)^r))+i[12]-1926607734)<<20|t>>>12)+n<<0,t=((t+=((a=(r=((r+=((o=t^n)^(e=((e+=(o^r)+i[5]-378558)<<4|e>>>28)+t<<0))+i[8]-2022574463)<<11|r>>>21)+e<<0)^e)^(n=((n+=(a^t)+i[11]+1839030562)<<16|n>>>16)+r<<0))+i[14]-35309556)<<23|t>>>9)+n<<0,t=((t+=((a=(r=((r+=((o=t^n)^(e=((e+=(o^r)+i[1]-1530992060)<<4|e>>>28)+t<<0))+i[4]+1272893353)<<11|r>>>21)+e<<0)^e)^(n=((n+=(a^t)+i[7]-155497632)<<16|n>>>16)+r<<0))+i[10]-1094730640)<<23|t>>>9)+n<<0,t=((t+=((a=(r=((r+=((o=t^n)^(e=((e+=(o^r)+i[13]+681279174)<<4|e>>>28)+t<<0))+i[0]-358537222)<<11|r>>>21)+e<<0)^e)^(n=((n+=(a^t)+i[3]-722521979)<<16|n>>>16)+r<<0))+i[6]+76029189)<<23|t>>>9)+n<<0,t=((t+=((a=(r=((r+=((o=t^n)^(e=((e+=(o^r)+i[9]-640364487)<<4|e>>>28)+t<<0))+i[12]-421815835)<<11|r>>>21)+e<<0)^e)^(n=((n+=(a^t)+i[15]+530742520)<<16|n>>>16)+r<<0))+i[2]-995338651)<<23|t>>>9)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+i[0]-198630844)<<6|e>>>26)+t<<0)|~n))+i[7]+1126891415)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+i[14]-1416354905)<<15|n>>>17)+r<<0)|~e))+i[5]-57434055)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+i[12]+1700485571)<<6|e>>>26)+t<<0)|~n))+i[3]-1894986606)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+i[10]-1051523)<<15|n>>>17)+r<<0)|~e))+i[1]-2054922799)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+i[8]+1873313359)<<6|e>>>26)+t<<0)|~n))+i[15]-30611744)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+i[6]-1560198380)<<15|n>>>17)+r<<0)|~e))+i[13]+1309151649)<<21|t>>>11)+n<<0,t=((t+=((r=((r+=(t^((e=((e+=(n^(t|~r))+i[4]-145523070)<<6|e>>>26)+t<<0)|~n))+i[11]-1120210379)<<10|r>>>22)+e<<0)^((n=((n+=(e^(r|~t))+i[2]+718787259)<<15|n>>>17)+r<<0)|~e))+i[9]-343485551)<<21|t>>>11)+n<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=n-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+n<<0,this.h3=this.h3+r<<0)},_0x1be314.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return _0x210836[e>>4&15]+_0x210836[15&e]+_0x210836[e>>12&15]+_0x210836[e>>8&15]+_0x210836[e>>20&15]+_0x210836[e>>16&15]+_0x210836[e>>28&15]+_0x210836[e>>24&15]+_0x210836[t>>4&15]+_0x210836[15&t]+_0x210836[t>>12&15]+_0x210836[t>>8&15]+_0x210836[t>>20&15]+_0x210836[t>>16&15]+_0x210836[t>>28&15]+_0x210836[t>>24&15]+_0x210836[n>>4&15]+_0x210836[15&n]+_0x210836[n>>12&15]+_0x210836[n>>8&15]+_0x210836[n>>20&15]+_0x210836[n>>16&15]+_0x210836[n>>28&15]+_0x210836[n>>24&15]+_0x210836[r>>4&15]+_0x210836[15&r]+_0x210836[r>>12&15]+_0x210836[r>>8&15]+_0x210836[r>>20&15]+_0x210836[r>>16&15]+_0x210836[r>>28&15]+_0x210836[r>>24&15]},_0x1be314.prototype.toString=_0x1be314.prototype.hex,_0x1be314.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&n,n>>8&255,n>>16&255,n>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},_0x1be314.prototype.array=_0x1be314.prototype.digest,_0x1be314.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},_0x1be314.prototype.buffer=_0x1be314.prototype.arrayBuffer,_0x1be314.prototype.base64=function(){for(var e,t,n,r="",o=this.array(),a=0;a<15;)e=o[a++],t=o[a++],n=o[a++],r+=_0x3355d4[e>>>2]+_0x3355d4[63&(e<<4|t>>>4)]+_0x3355d4[63&(t<<2|n>>>6)]+_0x3355d4[63&n];return e=o[a],r+=_0x3355d4[e>>>2]+_0x3355d4[e<<4&63]+"=="};var _0x44fd32=_0x3f49e7();_0x544646?_0x55bfcf.exports=_0x44fd32:(_0x4bf8ea.md5=_0x44fd32,_export_330&&(_0x4764db=function(){return _0x44fd32}.call(_0x44fd32,es_require,_0x44fd32,_0x55bfcf),void 0===_0x4764db||(_0x55bfcf.exports=_0x4764db)))}()}).call(this,es_require(94),es_require(47),es_require(128)(es_module))},function(e,t,n){"use strict";(function(e){function r(){return e._babelPolyfill||"undefined"!=typeof window&&window._babelPolyfill?null:n(134)}Object.defineProperty(t,"__esModule",{value:!0}),t.idempotentBabelPolyfill=r,t.default=void 0;var o=r();t.default=o}).call(this,n(47))},function(e,t,n){"use strict";n(135);var r,o=(r=n(307))&&r.__esModule?r:{default:r};o.default._babelPolyfill&&"undefined"!=typeof console&&console.warn,o.default._babelPolyfill=!0},function(e,t,n){"use strict";n(136),n(279),n(281),n(284),n(286),n(288),n(290),n(292),n(294),n(296),n(298),n(300),n(302),n(306)},function(e,t,n){n(137),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(168),n(169),n(170),n(171),n(172),n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(183),n(184),n(185),n(186),n(187),n(188),n(189),n(190),n(191),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(218),n(219),n(221),n(222),n(223),n(224),n(225),n(226),n(227),n(229),n(230),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(86),n(242),n(115),n(243),n(116),n(244),n(245),n(246),n(247),n(117),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(269),n(270),n(271),n(272),n(273),n(274),n(275),n(276),n(277),n(278),e.exports=n(9)},function(e,t,n){"use strict";var r=n(2),o=n(15),a=n(10),i=n(0),s=n(13),c=n(29).KEY,l=n(3),u=n(54),d=n(40),f=n(31),p=n(7),h=n(67),m=n(96),v=n(139),_=n(57),g=n(4),y=n(5),b=n(12),x=n(17),T=n(28),E=n(30),S=n(35),C=n(99),w=n(22),O=n(56),A=n(11),P=n(33),M=w.f,N=A.f,I=C.f,R=r.Symbol,L=r.JSON,B=L&&L.stringify,k=p("_hidden"),D=p("toPrimitive"),j={}.propertyIsEnumerable,F=u("symbol-registry"),U=u("symbols"),G=u("op-symbols"),z=Object.prototype,H="function"==typeof R&&!!O.f,Y=r.QObject,V=!Y||!Y.prototype||!Y.prototype.findChild,q=a&&l((function(){return 7!=S(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=M(z,t);r&&delete z[t],N(e,t,n),r&&e!==z&&N(z,t,r)}:N,X=function(e){var t=U[e]=S(R.prototype);return t._k=e,t},W=H&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},K=function(e,t,n){return e===z&&K(G,t,n),g(e),t=T(t,!0),g(n),o(U,t)?(n.enumerable?(o(e,k)&&e[k][t]&&(e[k][t]=!1),n=S(n,{enumerable:E(0,!1)})):(o(e,k)||N(e,k,E(1,{})),e[k][t]=!0),q(e,t,n)):N(e,t,n)},J=function(e,t){g(e);for(var n,r=v(t=x(t)),o=0,a=r.length;a>o;)K(e,n=r[o++],t[n]);return e},$=function(e){var t=j.call(this,e=T(e,!0));return!(this===z&&o(U,e)&&!o(G,e))&&(!(t||!o(this,e)||!o(U,e)||o(this,k)&&this[k][e])||t)},Z=function(e,t){if(e=x(e),t=T(t,!0),e!==z||!o(U,t)||o(G,t)){var n=M(e,t);return!n||!o(U,t)||o(e,k)&&e[k][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=I(x(e)),r=[],a=0;n.length>a;)o(U,t=n[a++])||t==k||t==c||r.push(t);return r},ee=function(e){for(var t,n=e===z,r=I(n?G:x(e)),a=[],i=0;r.length>i;)!o(U,t=r[i++])||n&&!o(z,t)||a.push(U[t]);return a};H||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(G,n),o(this,k)&&o(this[k],e)&&(this[k][e]=!1),q(this,e,E(1,n))};return a&&V&&q(z,e,{configurable:!0,set:t}),X(e)}).prototype,"toString",(function(){return this._k})),w.f=Z,A.f=K,n(36).f=C.f=Q,n(49).f=$,O.f=ee,a&&!n(32)&&s(z,"propertyIsEnumerable",$,!0),h.f=function(e){return X(p(e))}),i(i.G+i.W+i.F*!H,{Symbol:R});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=P(p.store),oe=0;re.length>oe;)m(re[oe++]);i(i.S+i.F*!H,"Symbol",{for:function(e){return o(F,e+="")?F[e]:F[e]=R(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),i(i.S+i.F*!H,"Object",{create:function(e,t){return void 0===t?S(e):J(S(e),t)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee});var ae=l((function(){O.f(1)}));i(i.S+i.F*ae,"Object",{getOwnPropertySymbols:function(e){return O.f(b(e))}}),L&&i(i.S+i.F*(!H||l((function(){var e=R();return"[null]"!=B([e])||"{}"!=B({a:e})||"{}"!=B(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(y(t)||void 0!==e)&&!W(e))return _(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!W(t))return t}),r[1]=t,B.apply(L,r)}}),R.prototype[D]||n(16)(R.prototype,D,R.prototype.valueOf),d(R,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){e.exports=n(54)("native-function-to-string",Function.toString)},function(e,t,n){var r=n(33),o=n(56),a=n(49);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var i,s=n(e),c=a.f,l=0;s.length>l;)c.call(e,i=s[l++])&&t.push(i);return t}},function(e,t,n){var r=n(0);r(r.S,"Object",{create:n(35)})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(10),"Object",{defineProperty:n(11).f})},function(e,t,n){var r=n(0);r(r.S+r.F*!n(10),"Object",{defineProperties:n(98)})},function(e,t,n){var r=n(17),o=n(22).f;n(23)("getOwnPropertyDescriptor",(function(){return function(e,t){return o(r(e),t)}}))},function(e,t,n){var r=n(12),o=n(37);n(23)("getPrototypeOf",(function(){return function(e){return o(r(e))}}))},function(e,t,n){var r=n(12),o=n(33);n(23)("keys",(function(){return function(e){return o(r(e))}}))},function(e,t,n){n(23)("getOwnPropertyNames",(function(){return n(99).f}))},function(e,t,n){var r=n(5),o=n(29).onFreeze;n(23)("freeze",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){var r=n(5),o=n(29).onFreeze;n(23)("seal",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){var r=n(5),o=n(29).onFreeze;n(23)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(o(t)):t}}))},function(e,t,n){var r=n(5);n(23)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(5);n(23)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,n){var r=n(5);n(23)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,n){var r=n(0);r(r.S+r.F,"Object",{assign:n(100)})},function(e,t,n){var r=n(0);r(r.S,"Object",{is:n(101)})},function(e,t,n){var r=n(0);r(r.S,"Object",{setPrototypeOf:n(71).set})},function(e,t,n){"use strict";var r=n(50),o={};o[n(7)("toStringTag")]="z",o+""!="[object z]"&&n(13)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,n){var r=n(0);r(r.P,"Function",{bind:n(102)})},function(e,t,n){var r=n(11).f,o=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in o||n(10)&&r(o,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,n){"use strict";var r=n(5),o=n(37),a=n(7)("hasInstance"),i=Function.prototype;a in i||n(11).f(i,a,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(0),o=n(104);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(e,t,n){var r=n(0),o=n(105);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(e,t,n){"use strict";var r=n(2),o=n(15),a=n(25),i=n(73),s=n(28),c=n(3),l=n(36).f,u=n(22).f,d=n(11).f,f=n(41).trim,p=r.Number,h=p,m=p.prototype,v="Number"==a(n(35)(m)),_="trim"in String.prototype,g=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,o,a=(t=_?t.trim():f(t,3)).charCodeAt(0);if(43===a||45===a){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var i,c=t.slice(2),l=0,u=c.length;l<u;l++)if((i=c.charCodeAt(l))<48||i>o)return NaN;return parseInt(c,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(v?c((function(){m.valueOf.call(n)})):"Number"!=a(n))?i(new h(g(t)),n,p):g(t)};for(var y,b=n(10)?l(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;b.length>x;x++)o(h,y=b[x])&&!o(p,y)&&d(p,y,u(h,y));p.prototype=m,m.constructor=p,n(13)(r,"Number",p)}},function(e,t,n){"use strict";var r=n(0),o=n(21),a=n(106),i=n(74),s=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",d=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*l[n],l[n]=r%1e7,r=c(r/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=l[t],l[t]=c(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var n=String(l[e]);t=""===t?n:t+i.call("0",7-n.length)+n}return t},h=function(e,t,n){return 0===t?n:t%2==1?h(e,t-1,n*e):h(e*e,t/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(3)((function(){s.call({})}))),"Number",{toFixed:function(e){var t,n,r,s,c=a(this,u),l=o(e),m="",v="0";if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*h(2,69,1))-69)<0?c*h(2,-t,1):c/h(2,t,1),n*=4503599627370496,(t=52-t)>0){for(d(0,n),r=l;r>=7;)d(1e7,0),r-=7;for(d(h(10,r,1),0),r=t-1;r>=23;)f(1<<23),r-=23;f(1<<r),d(1,1),f(2),v=p()}else d(0,n),d(1<<-t,0),v=p()+i.call("0",l);return v=l>0?m+((s=v.length)<=l?"0."+i.call("0",l-s)+v:v.slice(0,s-l)+"."+v.slice(s-l)):m+v}})},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(106),i=1..toPrecision;r(r.P+r.F*(o((function(){return"1"!==i.call(1,void 0)}))||!o((function(){i.call({})}))),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?i.call(t):i.call(t,e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(0),o=n(2).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},function(e,t,n){var r=n(0);r(r.S,"Number",{isInteger:n(107)})},function(e,t,n){var r=n(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(0),o=n(107),a=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return o(e)&&a(e)<=9007199254740991}})},function(e,t,n){var r=n(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(0),o=n(105);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(e,t,n){var r=n(0),o=n(104);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(e,t,n){var r=n(0),o=n(108),a=Math.sqrt,i=Math.acosh;r(r.S+r.F*!(i&&710==Math.floor(i(Number.MAX_VALUE))&&i(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+a(e-1)*a(e+1))}})},function(e,t,n){var r=n(0),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,n){var r=n(0),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(0),o=n(75);r(r.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(0),o=Math.exp;r(r.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},function(e,t,n){var r=n(0),o=n(76);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(e,t,n){var r=n(0);r(r.S,"Math",{fround:n(182)})},function(e,t,n){var r=n(75),o=Math.pow,a=o(2,-52),i=o(2,-23),s=o(2,127)*(2-i),c=o(2,-126);e.exports=Math.fround||function(e){var t,n,o=Math.abs(e),l=r(e);return o<c?l*(o/c/i+1/a-1/a)*c*i:(n=(t=(1+i/a)*o)-(t-o))>s||n!=n?l*(1/0):l*n}},function(e,t,n){var r=n(0),o=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,a=0,i=0,s=arguments.length,c=0;i<s;)c<(n=o(arguments[i++]))?(a=a*(r=c/n)*r+1,c=n):a+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(a)}})},function(e,t,n){var r=n(0),o=Math.imul;r(r.S+r.F*n(3)((function(){return-5!=o(4294967295,5)||2!=o.length})),"Math",{imul:function(e,t){var n=+e,r=+t,o=65535&n,a=65535&r;return 0|o*a+((65535&n>>>16)*a+o*(65535&r>>>16)<<16>>>0)}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,n){var r=n(0);r(r.S,"Math",{log1p:n(108)})},function(e,t,n){var r=n(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(0);r(r.S,"Math",{sign:n(75)})},function(e,t,n){var r=n(0),o=n(76),a=Math.exp;r(r.S+r.F*n(3)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(0),o=n(76),a=Math.exp;r(r.S,"Math",{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(a(e)+a(-e))}})},function(e,t,n){var r=n(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){var r=n(0),o=n(34),a=String.fromCharCode,i=String.fromCodePoint;r(r.S+r.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;r>i;){if(t=+arguments[i++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},function(e,t,n){var r=n(0),o=n(17),a=n(8);r(r.S,"String",{raw:function(e){for(var t=o(e.raw),n=a(t.length),r=arguments.length,i=[],s=0;n>s;)i.push(String(t[s++])),s<r&&i.push(String(arguments[s]));return i.join("")}})},function(e,t,n){"use strict";n(41)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,n){"use strict";var r=n(77)(!0);n(78)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(0),o=n(77)(!1);r(r.P,"String",{codePointAt:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(0),o=n(8),a=n(79),i="".endsWith;r(r.P+r.F*n(81)("endsWith"),"String",{endsWith:function(e){var t=a(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),s=void 0===n?r:Math.min(o(n),r),c=String(e);return i?i.call(t,c,s):t.slice(s-c.length,s)===c}})},function(e,t,n){"use strict";var r=n(0),o=n(79);r(r.P+r.F*n(81)("includes"),"String",{includes:function(e){return!!~o(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(0);r(r.P,"String",{repeat:n(74)})},function(e,t,n){"use strict";var r=n(0),o=n(8),a=n(79),i="".startsWith;r(r.P+r.F*n(81)("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return i?i.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(14)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,n){"use strict";n(14)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,n){"use strict";n(14)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,n){"use strict";n(14)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,n){"use strict";n(14)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,n){"use strict";n(14)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,n){"use strict";n(14)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,n){"use strict";n(14)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,n){"use strict";n(14)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,n){"use strict";n(14)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,n){"use strict";n(14)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,n){"use strict";n(14)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,n){"use strict";n(14)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,n){var r=n(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(0),o=n(12),a=n(28);r(r.P+r.F*n(3)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=o(this),n=a(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(0),o=n(217);r(r.P+r.F*(Date.prototype.toISOString!==o),"Date",{toISOString:o})},function(e,t,n){"use strict";var r=n(3),o=Date.prototype.getTime,a=Date.prototype.toISOString,i=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-50000000000001))}))||!r((function(){a.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"."+(n>99?n:"0"+i(n))+"Z"}:a},function(e,t,n){var r=Date.prototype,o=r.toString,a=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(13)(r,"toString",(function(){var e=a.call(this);return e==e?o.call(this):"Invalid Date"}))},function(e,t,n){var r=n(7)("toPrimitive"),o=Date.prototype;r in o||n(16)(o,r,n(220))},function(e,t,n){"use strict";var r=n(4),o=n(28);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return o(r(this),"number"!=e)}},function(e,t,n){var r=n(0);r(r.S,"Array",{isArray:n(57)})},function(e,t,n){"use strict";var r=n(19),o=n(0),a=n(12),i=n(110),s=n(82),c=n(8),l=n(83),u=n(84);o(o.S+o.F*!n(58)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,o,d,f=a(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,_=0,g=u(f);if(v&&(m=r(m,h>2?arguments[2]:void 0,2)),null==g||p==Array&&s(g))for(n=new p(t=c(f.length));t>_;_++)l(n,_,v?m(f[_],_):f[_]);else for(d=g.call(f),n=new p;!(o=d.next()).done;_++)l(n,_,v?i(d,m,[o.value,_],!0):o.value);return n.length=_,n}})},function(e,t,n){"use strict";var r=n(0),o=n(83);r(r.S+r.F*n(3)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(0),o=n(17),a=[].join;r(r.P+r.F*(n(48)!=Object||!n(18)(a)),"Array",{join:function(e){return a.call(o(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(0),o=n(70),a=n(25),i=n(34),s=n(8),c=[].slice;r(r.P+r.F*n(3)((function(){o&&c.call(o)})),"Array",{slice:function(e,t){var n=s(this.length),r=a(this);if(t=void 0===t?n:t,"Array"==r)return c.call(this,e,t);for(var o=i(e,n),l=i(t,n),u=s(l-o),d=new Array(u),f=0;f<u;f++)d[f]="String"==r?this.charAt(o+f):this[o+f];return d}})},function(e,t,n){"use strict";var r=n(0),o=n(20),a=n(12),i=n(3),s=[].sort,c=[1,2,3];r(r.P+r.F*(i((function(){c.sort(void 0)}))||!i((function(){c.sort(null)}))||!n(18)(s)),"Array",{sort:function(e){return void 0===e?s.call(a(this)):s.call(a(this),o(e))}})},function(e,t,n){"use strict";var r=n(0),o=n(24)(0),a=n(18)([].forEach,!0);r(r.P+r.F*!a,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(5),o=n(57),a=n(7)("species");e.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){"use strict";var r=n(0),o=n(24)(1);r(r.P+r.F*!n(18)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(24)(2);r(r.P+r.F*!n(18)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(24)(3);r(r.P+r.F*!n(18)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(24)(4);r(r.P+r.F*!n(18)([].every,!0),"Array",{every:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(112);r(r.P+r.F*!n(18)([].reduce,!0),"Array",{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(0),o=n(112);r(r.P+r.F*!n(18)([].reduceRight,!0),"Array",{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(0),o=n(55)(!1),a=[].indexOf,i=!!a&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(i||!n(18)(a)),"Array",{indexOf:function(e){return i?a.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(0),o=n(17),a=n(21),i=n(8),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n(18)(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=o(this),n=i(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,a(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){var r=n(0);r(r.P,"Array",{copyWithin:n(113)}),n(38)("copyWithin")},function(e,t,n){var r=n(0);r(r.P,"Array",{fill:n(85)}),n(38)("fill")},function(e,t,n){"use strict";var r=n(0),o=n(24)(5),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),r(r.P+r.F*a,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(38)("find")},function(e,t,n){"use strict";var r=n(0),o=n(24)(6),a="findIndex",i=!0;a in[]&&Array(1).findIndex((function(){i=!1})),r(r.P+r.F*i,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(38)(a)},function(e,t,n){n(43)("Array")},function(e,t,n){var r=n(2),o=n(73),a=n(11).f,i=n(36).f,s=n(80),c=n(59),l=r.RegExp,u=l,d=l.prototype,f=/a/g,p=/a/g,h=new l(f)!==f;if(n(10)&&(!h||n(3)((function(){return p[n(7)("match")]=!1,l(f)!=f||l(p)==p||"/a/i"!=l(f,"i")})))){l=function(e,t){var n=this instanceof l,r=s(e),a=void 0===t;return!n&&r&&e.constructor===l&&a?e:o(h?new u(r&&!a?e.source:e,t):u((r=e instanceof l)?e.source:e,r&&a?c.call(e):t),n?this:d,l)};for(var m=function(e){e in l||a(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},v=i(u),_=0;v.length>_;)m(v[_++]);d.constructor=l,l.prototype=d,n(13)(r,"RegExp",l)}n(43)("RegExp")},function(e,t,n){"use strict";n(116);var r=n(4),o=n(59),a=n(10),i=/./.toString,s=function(e){n(13)(RegExp.prototype,"toString",e,!0)};n(3)((function(){return"/a/b"!=i.call({source:"a",flags:"b"})}))?s((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?o.call(e):void 0)})):"toString"!=i.name&&s((function(){return i.call(this)}))},function(e,t,n){"use strict";var r=n(4),o=n(8),a=n(88),i=n(60);n(61)("match",1,(function(e,t,n,s){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=s(n,e,this);if(t.done)return t.value;var c=r(e),l=String(this);if(!c.global)return i(c,l);var u=c.unicode;c.lastIndex=0;for(var d,f=[],p=0;null!==(d=i(c,l));){var h=String(d[0]);f[p]=h,""===h&&(c.lastIndex=a(l,o(c.lastIndex),u)),p++}return 0===p?null:f}]}))},function(e,t,n){"use strict";var r=n(4),o=n(12),a=n(8),i=n(21),s=n(88),c=n(60),l=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;n(61)("replace",2,(function(e,t,n,h){return[function(r,o){var a=e(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,a,o):n.call(String(a),r,o)},function(e,t){var o=h(n,e,this,t);if(o.done)return o.value;var d=r(e),f=String(this),p="function"==typeof t;p||(t=String(t));var v=d.global;if(v){var _=d.unicode;d.lastIndex=0}for(var g=[];;){var y=c(d,f);if(null===y)break;if(g.push(y),!v)break;""===String(y[0])&&(d.lastIndex=s(f,a(d.lastIndex),_))}for(var b,x="",T=0,E=0;E<g.length;E++){y=g[E];for(var S=String(y[0]),C=l(u(i(y.index),f.length),0),w=[],O=1;O<y.length;O++)w.push(void 0===(b=y[O])?b:String(b));var A=y.groups;if(p){var P=[S].concat(w,C,f);void 0!==A&&P.push(A);var M=String(t.apply(void 0,P))}else M=m(S,f,C,w,A,t);C>=T&&(x+=f.slice(T,C)+M,T=C+S.length)}return x+f.slice(T)}];function m(e,t,r,a,i,s){var c=r+e.length,l=a.length,u=p;return void 0!==i&&(i=o(i),u=f),n.call(s,u,(function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":s=i[o.slice(1,-1)];break;default:var u=+o;if(0===u)return n;if(u>l){var f=d(u/10);return 0===f?n:f<=l?void 0===a[f-1]?o.charAt(1):a[f-1]+o.charAt(1):n}s=a[u-1]}return void 0===s?"":s}))}}))},function(e,t,n){"use strict";var r=n(4),o=n(101),a=n(60);n(61)("search",1,(function(e,t,n,i){return[function(n){var r=e(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},function(e){var t=i(n,e,this);if(t.done)return t.value;var s=r(e),c=String(this),l=s.lastIndex;o(l,0)||(s.lastIndex=0);var u=a(s,c);return o(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},function(e,t,n){"use strict";var r=n(80),o=n(4),a=n(51),i=n(88),s=n(8),c=n(60),l=n(87),u=n(3),d=Math.min,f=[].push,p=!u((function(){RegExp(4294967295,"y")}));n(61)("split",2,(function(e,t,n,u){var h;return h="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!r(e))return n.call(o,e,t);for(var a,i,s,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?4294967295:t>>>0,h=new RegExp(e.source,u+"g");(a=l.call(h,o))&&!((i=h.lastIndex)>d&&(c.push(o.slice(d,a.index)),a.length>1&&a.index<o.length&&f.apply(c,a.slice(1)),s=a[0].length,d=i,c.length>=p));)h.lastIndex===a.index&&h.lastIndex++;return d===o.length?!s&&h.test("")||c.push(""):c.push(o.slice(d)),c.length>p?c.slice(0,p):c}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:n.call(this,e,t)}:n,[function(n,r){var o=e(this),a=null==n?void 0:n[t];return void 0!==a?a.call(n,o,r):h.call(String(o),n,r)},function(e,t){var r=u(h,e,this,t,h!==n);if(r.done)return r.value;var l=o(e),f=String(this),m=a(l,RegExp),v=l.unicode,_=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(p?"y":"g"),g=new m(p?l:"^(?:"+l.source+")",_),y=void 0===t?4294967295:t>>>0;if(0===y)return[];if(0===f.length)return null===c(g,f)?[f]:[];for(var b=0,x=0,T=[];x<f.length;){g.lastIndex=p?x:0;var E,S=c(g,p?f:f.slice(x));if(null===S||(E=d(s(g.lastIndex+(p?0:x)),f.length))===b)x=i(f,x,v);else{if(T.push(f.slice(b,x)),T.length===y)return T;for(var C=1;C<=S.length-1;C++)if(T.push(S[C]),T.length===y)return T;x=b=E}}return T.push(f.slice(b)),T}]}))},function(e,t,n){var r=n(2),o=n(89).set,a=r.MutationObserver||r.WebKitMutationObserver,i=r.process,s=r.Promise,c="process"==n(25)(i);e.exports=function(){var e,t,n,l=function(){var r,o;for(c&&(r=i.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){i.nextTick(l)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(l)}}else n=function(){o.call(r,l)};else{var d=!0,f=document.createTextNode("");new a(l).observe(f,{characterData:!0}),n=function(){f.data=d=!d}}return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){"use strict";var r=n(120),o=n(39);e.exports=n(64)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(o(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(120),o=n(39);e.exports=n(64)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(o(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,o=n(2),a=n(24)(0),i=n(13),s=n(29),c=n(100),l=n(121),u=n(5),d=n(39),f=(d=n(39),!o.ActiveXObject&&"ActiveXObject"in o),p=s.getWeak,h=Object.isExtensible,m=l.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},_={get:function(e){if(u(e)){var t=p(e);return!0===t?m(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(d(this,"WeakMap"),e,t)}},g=e.exports=n(64)("WeakMap",v,_,l,!0,!0);d&&f&&(c((r=l.getConstructor(v,"WeakMap")).prototype,_),s.NEED=!0,a(["delete","has","get","set"],(function(e){var t=g.prototype,n=t[e];i(t,e,(function(t,o){if(u(t)&&!h(t)){this._f||(this._f=new r);var a=this._f[e](t,o);return"set"==e?this:a}return n.call(this,t,o)}))})))},function(e,t,n){"use strict";var r=n(121),o=n(39);n(64)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(o(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(0),o=n(65),a=n(90),i=n(4),s=n(34),c=n(8),l=n(5),u=n(2).ArrayBuffer,d=n(51),f=a.ArrayBuffer,p=a.DataView,h=o.ABV&&u.isView,m=f.prototype.slice,v=o.VIEW;r(r.G+r.W+r.F*(u!==f),{ArrayBuffer:f}),r(r.S+r.F*!o.CONSTR,"ArrayBuffer",{isView:function(e){return h&&h(e)||l(e)&&v in e}}),r(r.P+r.U+r.F*n(3)((function(){return!new f(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(i(this),e);for(var n=i(this).byteLength,r=s(e,n),o=s(void 0===t?n:t,n),a=new(d(this,f))(c(o-r)),l=new p(this),u=new p(a),h=0;r<o;)u.setUint8(h++,l.getUint8(r++));return a}}),n(43)("ArrayBuffer")},function(e,t,n){var r=n(0);r(r.G+r.W+r.F*!n(65).ABV,{DataView:n(90).DataView})},function(e,t,n){n(27)("Int8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Uint8",1,(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(27)("Int16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Uint16",2,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Int32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Uint32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Float32",4,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(27)("Float64",8,(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){var r=n(0),o=n(20),a=n(4),i=(n(2).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(3)((function(){i((function(){}))})),"Reflect",{apply:function(e,t,n){var r=o(e),c=a(n);return i?i(r,t,c):s.call(r,t,c)}})},function(e,t,n){var r=n(0),o=n(35),a=n(20),i=n(4),s=n(5),c=n(3),l=n(102),u=(n(2).Reflect||{}).construct,d=c((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),f=!c((function(){u((function(){}))}));r(r.S+r.F*(d||f),"Reflect",{construct:function(e,t){a(e),i(t);var n=arguments.length<3?e:a(arguments[2]);if(f&&!d)return u(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(l.apply(e,r))}var c=n.prototype,p=o(s(c)?c:Object.prototype),h=Function.apply.call(e,p,t);return s(h)?h:p}})},function(e,t,n){var r=n(11),o=n(0),a=n(4),i=n(28);o(o.S+o.F*n(3)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,n){a(e),t=i(t,!0),a(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(0),o=n(22).f,a=n(4);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=o(a(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(0),o=n(4),a=function(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(109)(a,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new a(e)}})},function(e,t,n){var r=n(22),o=n(37),a=n(15),i=n(0),s=n(5),c=n(4);i(i.S,"Reflect",{get:function e(t,n){var i,l,u=arguments.length<3?t:arguments[2];return c(t)===u?t[n]:(i=r.f(t,n))?a(i,"value")?i.value:void 0!==i.get?i.get.call(u):void 0:s(l=o(t))?e(l,n,u):void 0}})},function(e,t,n){var r=n(22),o=n(0),a=n(4);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(a(e),t)}})},function(e,t,n){var r=n(0),o=n(37),a=n(4);r(r.S,"Reflect",{getPrototypeOf:function(e){return o(a(e))}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(0),o=n(4),a=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return o(e),!a||a(e)}})},function(e,t,n){var r=n(0);r(r.S,"Reflect",{ownKeys:n(123)})},function(e,t,n){var r=n(0),o=n(4),a=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){o(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(11),o=n(22),a=n(37),i=n(15),s=n(0),c=n(30),l=n(4),u=n(5);s(s.S,"Reflect",{set:function e(t,n,s){var d,f,p=arguments.length<4?t:arguments[3],h=o.f(l(t),n);if(!h){if(u(f=a(t)))return e(f,n,s,p);h=c(0)}if(i(h,"value")){if(!1===h.writable||!u(p))return!1;if(d=o.f(p,n)){if(d.get||d.set||!1===d.writable)return!1;d.value=s,r.f(p,n,d)}else r.f(p,n,c(0,s));return!0}return void 0!==h.set&&(h.set.call(p,s),!0)}})},function(e,t,n){var r=n(0),o=n(71);o&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){n(280),e.exports=n(9).Array.includes},function(e,t,n){"use strict";var r=n(0),o=n(55)(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(38)("includes")},function(e,t,n){n(282),e.exports=n(9).Array.flatMap},function(e,t,n){"use strict";var r=n(0),o=n(283),a=n(12),i=n(8),s=n(20),c=n(111);r(r.P,"Array",{flatMap:function(e){var t,n,r=a(this);return s(e),t=i(r.length),n=c(r,0),o(n,r,r,t,0,1,e,arguments[1]),n}}),n(38)("flatMap")},function(e,t,n){"use strict";var r=n(57),o=n(5),a=n(8),i=n(19),s=n(7)("isConcatSpreadable");e.exports=function e(t,n,c,l,u,d,f,p){for(var h,m,v=u,_=0,g=!!f&&i(f,p,3);_<l;){if(_ in c){if(h=g?g(c[_],_,n):c[_],m=!1,o(h)&&(m=void 0!==(m=h[s])?!!m:r(h)),m&&d>0)v=e(t,n,h,a(h.length),v,d-1)-1;else{if(v>=9007199254740991)throw TypeError();t[v]=h}v++}_++}return v}},function(e,t,n){n(285),e.exports=n(9).String.padStart},function(e,t,n){"use strict";var r=n(0),o=n(124),a=n(63),i=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);r(r.P+r.F*i,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){n(287),e.exports=n(9).String.padEnd},function(e,t,n){"use strict";var r=n(0),o=n(124),a=n(63),i=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);r(r.P+r.F*i,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){n(289),e.exports=n(9).String.trimLeft},function(e,t,n){"use strict";n(41)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,n){n(291),e.exports=n(9).String.trimRight},function(e,t,n){"use strict";n(41)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,n){n(293),e.exports=n(67).f("asyncIterator")},function(e,t,n){n(96)("asyncIterator")},function(e,t,n){n(295),e.exports=n(9).Object.getOwnPropertyDescriptors},function(e,t,n){var r=n(0),o=n(123),a=n(17),i=n(22),s=n(83);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=a(e),c=i.f,l=o(r),u={},d=0;l.length>d;)void 0!==(n=c(r,t=l[d++]))&&s(u,t,n);return u}})},function(e,t,n){n(297),e.exports=n(9).Object.values},function(e,t,n){var r=n(0),o=n(125)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){n(299),e.exports=n(9).Object.entries},function(e,t,n){var r=n(0),o=n(125)(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},function(e,t,n){"use strict";n(117),n(301),e.exports=n(9).Promise.finally},function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(2),i=n(51),s=n(119);r(r.P+r.R,"Promise",{finally:function(e){var t=i(this,o.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){n(303),n(304),n(305),e.exports=n(9)},function(e,t,n){var r=n(2),o=n(0),a=n(63),i=[].slice,s=/MSIE .\./.test(a),c=function(e){return function(t,n){var r=arguments.length>2,o=!!r&&i.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,o)}:t,n)}};o(o.G+o.B+o.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(e,t,n){var r=n(0),o=n(89);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){for(var r=n(86),o=n(33),a=n(13),i=n(2),s=n(16),c=n(42),l=n(7),u=l("iterator"),d=l("toStringTag"),f=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(p),m=0;m<h.length;m++){var v,_=h[m],g=p[_],y=i[_],b=y&&y.prototype;if(b&&(b[u]||s(b,u,f),b[d]||s(b,d,_),c[_]=f,g))for(v in r)b[v]||a(b,v,r[v],!0)}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o,a,i,s,c=t&&t.prototype instanceof v?t:v,l=Object.create(c.prototype),_=new A(r||[]);return l._invoke=(o=e,a=n,i=_,s=d,function(e,t){if(s===p)throw new Error("Generator is already running");if(s===h){if("throw"===e)throw t;return M()}for(i.method=e,i.arg=t;;){var n=i.delegate;if(n){var r=C(n,i);if(r){if(r===m)continue;return r}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(s===d)throw s=h,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=p;var c=u(o,a,i);if("normal"===c.type){if(s=i.done?h:f,c.arg===m)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(s=h,i.method="throw",i.arg=c.arg)}}),l}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",m={};function v(){}function _(){}function g(){}var y={};c(y,a,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(P([])));x&&x!==n&&r.call(x,a)&&(y=x);var T=g.prototype=v.prototype=Object.create(y);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,s){var c=u(e[o],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function P(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:M}}function M(){return{value:t,done:!0}}return _.prototype=g,c(T,"constructor",g),c(g,"constructor",_),_.displayName=c(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,s,"GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},E(S.prototype),c(S.prototype,i,(function(){return this})),e.AsyncIterator=S,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new S(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(T),c(T,s,"Generator"),c(T,a,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){n(308),e.exports=n(126).global},function(e,t,n){var r=n(309);r(r.G,{global:n(91)})},function(e,t,n){var r=n(91),o=n(126),a=n(310),i=n(312),s=n(319),c=function(e,t,n){var l,u,d,f=e&c.F,p=e&c.G,h=e&c.S,m=e&c.P,v=e&c.B,_=e&c.W,g=p?o:o[t]||(o[t]={}),y=g.prototype,b=p?r:h?r[t]:(r[t]||{}).prototype;for(l in p&&(n=t),n)(u=!f&&b&&void 0!==b[l])&&s(g,l)||(d=u?b[l]:n[l],g[l]=p&&"function"!=typeof b[l]?n[l]:v&&u?a(d,r):_&&b[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?a(Function.call,d):d,m&&((g.virtual||(g.virtual={}))[l]=d,e&c.R&&y&&!y[l]&&i(y,l,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){var r=n(311);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(313),o=n(318);e.exports=n(93)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(314),o=n(315),a=n(317),i=Object.defineProperty;t.f=n(93)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),o)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(92);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(93)&&!n(127)((function(){return 7!=Object.defineProperty(n(316)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(92),o=n(91).document,a=r(o)&&r(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(92);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,r;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r=n.preventDefault,n.preventDefault=function(){r.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}()},function(e,t,n){(function(e){var t,n,r,o,a,i,s;t=void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,o=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),a=function(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t},i=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},s=function(e){return decodeURIComponent(e).replace(/\+/g," ")},"URLSearchParams"in t&&"a=1"===new URLSearchParams("?a=1").toString()||((r=(n=function(e){if(Object.defineProperty(this,"_entries",{value:{}}),"string"==typeof e){if(""!==e)for(var t,r=(e=e.replace(/^\?/,"")).split("&"),o=0;o<r.length;o++)t=r[o].split("="),this.append(s(t[0]),t.length>1?s(t[1]):"")}else if(e instanceof n){var a=this;e.forEach((function(e,t){a.append(e,t)}))}}).prototype).append=function(e,t){e in this._entries?this._entries[e].push(t.toString()):this._entries[e]=[t.toString()]},r.delete=function(e){delete this._entries[e]},r.get=function(e){return e in this._entries?this._entries[e][0]:null},r.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},r.has=function(e){return e in this._entries},r.set=function(e,t){this._entries[e]=[t.toString()]},r.forEach=function(e,t){var n;for(var r in this._entries)if(this._entries.hasOwnProperty(r)){n=this._entries[r];for(var o=0;o<n.length;o++)e.call(t,n[o],r,this)}},r.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),a(e)},r.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),a(e)},r.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),a(e)},o&&(r[Symbol.iterator]=r.entries),r.toString=function(){var e=[];return this.forEach((function(t,n){e.push(i(n)+"="+i(t))})),e.join("&")},t.URLSearchParams=n),function(e){if(function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(e){return!1}}()||(n=e.URL,o=(r=function(t,n){"string"!=typeof t&&(t=String(t));var r,o=document;if(n&&(void 0===e.location||n!==e.location.href)){(r=(o=document.implementation.createHTMLDocument("")).createElement("base")).href=n,o.head.appendChild(r);try{if(0!==r.href.indexOf(n))throw new Error(r.href)}catch(e){throw new Error("URL unable to set base "+n+" due to "+e)}}var a=o.createElement("a");if(a.href=t,r&&(o.body.appendChild(a),a.href=a.href),":"===a.protocol||!/:/.test(a.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:a})}).prototype,["hash","host","hostname","port","protocol","search"].forEach((function(e){var t;t=e,Object.defineProperty(o,t,{get:function(){return this._anchorElement[t]},set:function(e){this._anchorElement[t]=e},enumerable:!0})})),Object.defineProperties(o,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0},searchParams:{get:function(){var e=new URLSearchParams(this.search),t=this;return["append","delete","set"].forEach((function(n){var r=e[n];e[n]=function(){r.apply(e,arguments),t.search=e.toString()}})),e},enumerable:!0}}),r.createObjectURL=function(e){return n.createObjectURL.apply(n,arguments)},r.revokeObjectURL=function(e){return n.revokeObjectURL.apply(n,arguments)},e.URL=r),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(n){setInterval((function(){e.location.origin=t()}),100)}}var n,r,o}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this)}).call(this,n(47))},function(e,t,n){(t=e.exports=n(323)(!1)).push([e.i,"",""]),t.locals={"ejs-wrapper":"ejs--de6433374cb30211f10e148b320b2f",ejs:"ejs--7a5f920ceffb2913f6dbda780573cf","ejs--full-ui":"ejs--f3a002bba9836fe4ebfed357a45521","controls-tabs":"ejs--008adea3c1ef33a8fc94892a1e97e6",gamepad:"ejs--a891fe6f6e4cc43e11a6d8cf4a2dbb","gamepad-remapping-axis":"ejs--0ddc742668e636837948f68cade3e2","gamepad-name":"ejs--9af1c81949dbc3652bee73a340152c",overlay:"ejs--85a95eb6bf74a40ab61b91a91e5bff","key-setting-popup":"ejs--d169a219343bc32dd4aecc3f6b7f25","loading-info":"ejs--782e3572812f983b3a150eec177391",p1:"ejs--c426dd1d179aa351e6cec47e1d9438",p2:"ejs--31e7e81db48819ee35ec6f50378a2e",p3:"ejs--20d4eb2646d396f558a645dc0574f1",p4:"ejs--4de05306c8b099bdeb4585571ac095",ejs__contextmenu:"ejs--c7957d8666bb6b8fc7c3e9c021aaf8","ad-11":"ejs--3a16fd9a56aec8059089709cbb16f4","close-ad":"ejs--f3a1903d935f6cf720d4a0498db62a","start-game":"ejs--73f9b4e94a7a1fe74e11107d5ab2ef",pulse:"ejs--9bd947b3e6427453595f083d740a7c",ejs__control:"ejs--8732295ca5c4902a060d34706a8146","ejs__tab-focus":"ejs--a83b6c705e103e81a7762d0ed5e64b","ejs__control--pressed":"ejs--b1238136ec472a92297159882cf4b8","icon--pressed":"ejs--ec731619062226d943da67f5d83009","icon--not-pressed":"ejs--dc7068585e3d84fe0e676864c1439e","label--pressed":"ejs--0c6561f9155750b0aeeed6da5da7bf","label--not-pressed":"ejs--13d64e30c1333cc99391af48ddabaa","ejs--video":"ejs--d5f430a99a1619b3434bf58e34a99c",ejs__controls:"ejs--1acedc5ed6816abe96dd27d910fd74",ejs__progress:"ejs--f1aa376719b564cae0e653157cde14",ejs__time:"ejs--90d2780f99bcc76fdb6b0378a7238e",ejs__menu:"ejs--c7bfb2d1b75a40fdaaf90624bea9e7",ejs__volume:"ejs--36ceeeec0df37a9cf4bbe05fa204ec",ejs__tooltip:"ejs--74c6d4176d27e37a19d2e9e61de8f4",ejs__disk:"ejs--e8274f91a3d68f381fcc9d51db9c72",ejs__hotkey:"ejs--50ea0ce6747ecfa5147eba0d14e2ff","game-started":"ejs--7da7949f602347007818e6d192eb23",ejs__controls_show:"ejs--a03cf4c79123fcf49b2b6eb2ee856c","ejs--hide-controls":"ejs--1b8cb7f2294b1eb5de5238daea3513","ejs--fullscreen-enabled":"ejs--19409fe2057ab935a7e46abb5b4f49",ejs__menu__container:"ejs--013213afedeeb6878089b1ca1b4e47","ejs-popup":"ejs--c2532bfe04554193cc42b3be753700","ejs__control--forward":"ejs--0b4cdb4057d1a4623e60836ccc6275","ejs__control--back":"ejs--a7ad9de0cb0ca672b6703c50de7db9",ejs__menu__value:"ejs--f91e90fe7cabc875aff9a431bf5389",ejs__menu_right:"ejs--3464f4dc60866db801859648ec92cb",ejs__disk__container:"ejs--93b777c74e38cef84eb9ed727c473b",ejs__disk__index:"ejs--65d5006322417d2267bc2d4fa5fecc",active:"ejs--68d337c212ec6a5bc43125440d422b","ejs__tooltip--visible":"ejs--6ea27aa07e60d1d6e4c9782740028a","ejs--menu-open":"ejs--da54136ccf8c6b0b16d98e8b8e8b88","ejs__video-wrapper":"ejs--057800d021995e1347ec07cb748672",portrait:"ejs--64f1256f556fb94454b930cb3ea7f2",ejs__progress__buffer:"ejs--f8d706413436fd119cf01aaf5a9d9d","ejs--audio":"ejs--bd0222e58d71b0a304d6037dfcffd5","ejs--loading":"ejs--2521e1257996f264de36e77cc9c5ee",ejs__dialogs:"ejs--d31688f864f56d6426ebbf2217d6ee",ejs__dialog:"ejs--5e71fd80268afbb1d588e40b993508",ejs__focus_notice__container:"ejs--8005476e024127364d230c0f4c72e1",ejs__cheat__container:"ejs--8abe1d2bc8d34697952f4ae16785a5",ejs__cache__container:"ejs--1e0f0672f67d0e96592314c9ed78b0",ejs__loading__container:"ejs--d7e6a6a8f38bfaa256fe5d709a8258","ejs__load-state__container":"ejs--b183f581b5336c4908ad258d3e1cc7",ejs__netplay__container:"ejs--158ea9dd34e3e7af2d837f8b05babb",ejs__gamepad__container:"ejs--3f0897a8158ba363a0ee0afe4da7c5","dialog-container":"ejs--38cc09882a55e98c76168dbe838aa0","dialog-title":"ejs--b373c9d5029d49324fb8ac3ece96c1","dialog-content":"ejs--a5e2629abb9a5bcbc8b2c1307922d2","dialog-buttons":"ejs--580e3c22e63f8a1eb29694fd0b141b","btn-cancel":"ejs--ad20569e1449d7b8e99e6465960456",tabs:"ejs--8e7922427f460a31935084b7acfb1a","tabs-content":"ejs--31eb28817642bb1bfe0a2c422108bb","tabs-panel":"ejs--f932566a0af5314da834324c901978","button-container":"ejs--c233fb69cbef43078bc39e9d1efac8","btn-submit":"ejs--bdb54e9fc47f9805b506b746e897bf","btn-create-room":"ejs--67d03ee7480b871ad6507d6319a839","btn-quit":"ejs--c2d931157456c1d438d40a2f66af2c",set:"ejs--6604c83041a275a78837c452a71dd8","btn-join-room":"ejs--99150e15f962c63c689cadc81ef40d","netplay-player-name":"ejs--71527b6509aa48afce3ce1a11c02f0","netplay-player-name-input":"ejs--7ad35768e3f6b9faf97db01d5b60ae","netplay-player-name-set":"ejs--9c403e5e107a3e4374ba244b636400","netplay-roomlist":"ejs--d6a46533fa6e510a571af5c28b440a","netplay-create-room":"ejs--57ca9b3853cc7de731483cfcc95a59","netplay-room-name-input":"ejs--0885d5e25e19127b6b516014426a1b","netplay-room-password-input":"ejs--25023d28756fdb9dfbbfb6dccb8677","netplay-create-room-set":"ejs--75b3a8d35aacc6424ed7422fdeaaaa","netplay-room":"ejs--eefdf28d69ed2d20f197308981bb61","cheats-add":"ejs--9e670880bb57e824400fa00f09aaad","cheats-list":"ejs--2b4e3c245b7b25dfdac5e09155a68e","cheat-code-input":"ejs--572b0b3a0345a6b01b01a15a02842c","cheat-name-input":"ejs--a7d7f80c8999469c991ea452a85dd9",ejs__widgets:"ejs--952c974392296e7f643d51db380157",ejs__widget:"ejs--0d7e216cf12ae73705b5d5bb0452fc",ejs__widget_netplay:"ejs--c0a5e71f6613caab66d6ae15a5a00f","with-chat-box":"ejs--04f0471d5de3dffea09ac3d539d0bc","chat-box":"ejs--f817e633c82da74c3f82a1007e9aa8","netplay-players":"ejs--0b77f56df0c6023120dd9ffaa37dcd","chat-toggle":"ejs--4f88570c8af219fec07219dbd9dbbe","chat-count":"ejs--3ee5963a7747179cf98ce8ce095a5f","chat-messages":"ejs--258ae7dfee4b10b7568161e6a48636","chat-input":"ejs--0e8443aac737c78260c3c5e0370276",ejs__widget_controls_toggle:"ejs--666d4296310579687cf3cf3d2cf951",ejs__widget_load_srm:"ejs--a8753b9c4fe32d12bb6605d4a20ef2",ejs__widget_save_srm:"ejs--e7e06622e3c04957c2ebb05c5adec0","ejs-virtual-gamepad":"ejs--ca9ea317b9bd20abfc8c0463ac5bbe","virtual-gamepad":"ejs--2440e3b831017ff8327c939e2a4413",top:"ejs--b8d8b771d0bbb94e2bbd03054f53fd",left:"ejs--c83d70cb63c933edc073c7fe92e32b",buttons:"ejs--6e7015634623fd6a82e6a7d3488c84",center:"ejs--49fa47c86a131e4ca8fb268bfdde89",right:"ejs--7d2b19f77fd0ccabf94dc1ca39ae18",touch:"ejs--d708d9d486f1eca73a593d5c09f8ad",b_select:"ejs--e7e4800b31773c5d47b84c75cc6cf7",b_start:"ejs--76fa7567879f97f5991c50ac600735",b_1:"ejs--2592ce9b796695f4941e00f0972644",b_2:"ejs--b8e92dfa494924e1bde9486a0be217",b_3:"ejs--28a32587453e5bbcf95f746657f15f",b_4:"ejs--fad921b4fce16af564d7597e8de5f2",b_5:"ejs--6f79544eaf1d4b6e8a7609b506d988",b_6:"ejs--2afd974f6d46005a1e522dca4485e8",b_z:"ejs--d64fa2a822535d54379899a24f6e77",b_c:"ejs--10621f07d4508631aa3abcdb124a83",b_l:"ejs--7930ee9bb7ae2fa6e2f7b5568f1e98",b_r:"ejs--2226100d4c5408c2699e942aabb31c",b_l2:"ejs--3a43805a8ec126ef388abd5ceb54b2",b_r2:"ejs--d40828f231043de3a0f9c0637091d1",b_insert_coin:"ejs--7db312734c1e18065c434e8f96e893",b_a:"ejs--b4c6d9bdbbd3dcfc8fa82689ecf448",b_b:"ejs--b7c456c7dd7a616a55965bb134323b",b_x:"ejs--87c940c15830daa967b08e67e9b87e",b_y:"ejs--fbd499578ebef494fbcd1c9114cd1d",b_c1:"ejs--6febbc4be9f01b015178d52120d930",b_c2:"ejs--05e1505b655c8ef151de9ba2c47fb5",b_c3:"ejs--017bc19e138d2e63c92520db378e1d",b_c4:"ejs--1474a869d502ac0c04d535c96f9795",b_z_t:"ejs--9c96e9c7f33171cf0fedfc85ca53fa",b_l_t:"ejs--c39b270a2774fd4bd3858e5f0892c0",b_r_t:"ejs--353cf6be7120854ae25fede87ce136","dpad-container":"ejs--914358605501b11476e86626b2ff16","dpad-bg":"ejs--be66239219d594001da38f91c9ad02","dpad-front":"ejs--9dbb9be3403878e912527181e2d41b","dpad-1":"ejs--f9c7797bdf05569bdc13b4f2074270","dpad-2":"ejs--2645f3bad105488a313c5e30dab74f","dpad-1-bg":"ejs--a57cf324c8ff108947112e35e589b5","dpad-2-bg":"ejs--4873d94c18140ab195da609b40b71a","dpad-left":"ejs--bd9311b0a4f654af6ab5ba28bcf358","dpad-right":"ejs--704d45ea060cc6809451a0d9d47ad7","dpad-up":"ejs--f0b89ca5b5621659af184c8e012ccb","dpad-down":"ejs--8de361d6b01eaa181f8db4ac3eb7af","ejs-virtual-gamepad-style-1":"ejs--d534874cabeb9d2a907a812e5b8cd0","ejs-virtual-gamepad-style-2":"ejs--3e7ce32418477db21b1c6caed189d9","ejs-virtual-gamepad-style-3":"ejs--9213ba9ca7bc508e87ca7a2cefa397","ejs-virtual-gamepad-style-4":"ejs--cbac8c123fcc678ad946a27592156c","ejs-virtual-gamepad-style-5":"ejs--b4b0898f13bf4668a6e0077f43964a","ejs-virtual-gamepad-style-6":"ejs--49834279a72803b358c2a283342698","ejs-virtual-gamepad-style-10":"ejs--23587cee2522ccb891f58a95e3cab8","ejs-virtual-gamepad-style-7":"ejs--25a102181c6e79af65fe086f151c4f","ejs-virtual-gamepad-style-8":"ejs--cbcbce2bfd0aa13f6bebbbf8a0e974","ejs-virtual-gamepad-style-9":"ejs--c46c519e67f0f7ff83ba0b4d208683",modal:"ejs--eefec939452eb92fad035932d0f47c",modal__overlay:"ejs--f1f43b27384834c8c22c6f81d0c5ae",modal__container:"ejs--c4ee33766a01ed0356c3ec07898e96",modal__header:"ejs--a073f32023da1ced805c5f95a4e81c",modal__footer:"ejs--ed44f59bb8cd49177586b140658c6c",modal__title:"ejs--81470ba5e6a6d68014839ad4d9a977",modal__close:"ejs--c3c85789c2a7f56d8b26dba75b7e1f",modal__content:"ejs--db44f5520e6f4fd0dd34b478bb9ee8",modal__btn:"ejs--319bcec5dee9444e1a2a53d6503b7c","modal__btn-primary":"ejs--eaf3c1cba25d415d92ac48d7db34dd",modal__errmsg:"ejs--940087708c06b6129ce2bfa45f1d89","micromodal-slide":"ejs--bef295f3125e9ba83d4f3677264bae","is-open":"ejs--60c17e0d149099f207b06f27edae6a",mmfadeIn:"ejs--9d7aa2bd5ee276be085e5b2a0bbc2e",mmslideIn:"ejs--8b069266f76099cc6bc220f6ea56cc",mmfadeOut:"ejs--184b7558ffeb569c1790654537477b",mmslideOut:"ejs--379a464ad0e66ea5fc601e5f2fd73e","ejs-toast":"ejs--e686b5f4b8f94b017dce6aa34938a5","ejs-toast-item":"ejs--48741994500b16cfabc909661adbc0","ejs-switch":"ejs--4c3e63d4005bd8a0468e9c74a35f62","ejs-delete-cheat":"ejs--90bcdd71cd0d2307e9ee0dffa916da","icon--exit-fullscreen":"ejs--2b3dd6e2e26c0f0dc4ac5779dedd5e","ejs--fullscreen-fallback":"ejs--412041671de21945d3e028b6ae84c9","ejs--no-transition":"ejs--33643265135cf89e6c0a0d9866d6f1","ejs__sr-only":"ejs--6f0e996cd15e5fb6be0256918531d7","ejs-fade-in":"ejs--7cadf43f3d9eb17c7e3c36de84973b"}},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r=e[1]||"",o=e[3];if(!o)return r;if(t&&"function"==typeof btoa){var a=(n=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),i=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[r].concat(i).concat([a]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var a=this[o][0];"number"==typeof a&&(r[a]=!0)}for(o=0;o<e.length;o++){var i=e[o];"number"==typeof i[0]&&r[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(e,t,n){e.exports=()=>{}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var o,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(o=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:r+a.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")}))}},function(e,t,n){"use strict";(function(e){var r=n(327),o=n(328),a=n(329);function i(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),o=(e=s(e,r)).write(t,n);return o!==r&&(e=e.slice(0,o)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return k(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var o,a,i,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return x(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return S(this,t,n);case"base64":return o=this,i=n,0===(a=t)&&i===o.length?r.fromByteArray(o):r.fromByteArray(o.slice(a,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,o){var a,i=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,n/=2}function l(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var u=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===u?0:a-u)){if(-1===u&&(u=a),a-u+1===c)return u*i}else-1!==u&&(a-=a-u),u=-1}else for(n+c>s&&(n=s-c),a=n;a>=0;a--){for(var d=!0,f=0;f<c;f++)if(l(e,a+f)!==l(t,f)){d=!1;break}if(d)return a}return-1}function y(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}function b(e,t,n,r){return D(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var a,i,s,c,l=e[o],u=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(a=e[o+1]))&&(c=(31&l)<<6|63&a)>127&&(u=c);break;case 3:a=e[o+1],i=e[o+2],128==(192&a)&&128==(192&i)&&(c=(15&l)<<12|(63&a)<<6|63&i)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:a=e[o+1],i=e[o+2],s=e[o+3],128==(192&a)&&128==(192&i)&&128==(192&s)&&(c=(15&l)<<18|(63&a)<<12|(63&i)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),o+=d}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return r=null,a=t,i=n,u(o=e),o<=0?s(r,o):void 0!==a?"string"==typeof i?s(r,o).fill(a,i):s(r,o).fill(a):s(r,o);var r,o,a,i},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!c.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?x(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(r>>>=0),i=(n>>>=0)-(t>>>=0),s=Math.min(a,i),l=this.slice(r,o),u=e.slice(t,n),d=0;d<s;++d)if(l[d]!==u[d]){a=l[d],i=u[d];break}return a<i?-1:i<a?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o,a,i,s,c,l,u,d,f,p=this.length-t;if((void 0===n||n>p)&&(n=p),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var h=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return d=t,f=n,D(B(e,(u=this).length-d),u,d,f);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return s=this,c=t,l=n,D(k(e),s,c,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a=t,i=n,D(function(e,t){for(var n,r,o,a=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,o=n%256,a.push(o),a.push(r);return a}(e,(o=this).length-a),o,a,i);default:if(h)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),h=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function E(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function S(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function C(e,t,n){var r,o=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>o)&&(n=o);for(var a="",i=t;i<n;++i)a+=(r=e[i])<16?"0"+r.toString(16):r.toString(16);return a}function w(e,t,n){for(var r=e.slice(t,n),o="",a=0;a<r.length;a+=2)o+=String.fromCharCode(r[a]+256*r[a+1]);return o}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function A(e,t,n,r,o,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,a=Math.min(e.length-n,2);o<a;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,a=Math.min(e.length-n,4);o<a;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function N(e,t,n,r,o,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,n,r,a){return a||N(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function R(e,t,n,r,a){return a||N(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;n=new c(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],o=1,a=0;++a<t&&(o*=256);)r+=this[e+a]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=t,o=1,a=this[e+--r];r>0&&(o*=256);)a+=this[e+--r]*o;return a>=(o*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||A(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);A(this,e,t,n,o-1,-o)}var a=0,i=1,s=0;for(this[t]=255&e;++a<n&&(i*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);A(this,e,t,n,o-1,-o)}var a=n-1,i=1,s=0;for(this[t+a]=255&e;--a>=0&&(i*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/i>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):P(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):P(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||A(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&n<t&&t<r)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var i=c.isBuffer(e)?e:B(new c(e,r).toString()),s=i.length;for(a=0;a<n-t;++a)this[a+t]=i[a%s]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,o=null,a=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&a.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&a.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function k(e){return r.toByteArray(function(e){if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(L,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(47))},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r,i=l(e),s=i[0],c=i[1],u=new a(3*(s+(r=c))/4-r),d=0,f=c>0?s-4:s;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],u[d++]=t>>16&255,u[d++]=t>>8&255,u[d++]=255&t;return 2===c&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,u[d++]=255&t),1===c&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,u[d++]=t>>8&255,u[d++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,a=[],i=0,s=n-o;i<s;i+=16383)a.push(u(e,i,i+16383>s?s:i+16383));return 1===o?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=i.length;s<c;++s)r[s]=i[s],o[i.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var o,a,i=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(r[(a=o)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return i.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var a,i,s=8*o-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,a=p&(1<<-u)-1,p>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=f,u-=8);for(i=a&(1<<-u)-1,a>>=-u,u+=r;u>0;i=256*i+e[t+d],d+=f,u-=8);if(0===a)a=1-l;else{if(a===c)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,r),a-=l}return(p?-1:1)*i*Math.pow(2,a-r)},t.write=function(e,t,n,r,o,a){var i,s,c,l=8*a-o-1,u=(1<<l)-1,d=u>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,h=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=u):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),(t+=i+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(i++,c/=2),i+d>=u?(s=0,i=u):i+d>=1?(s=(t*c-1)*Math.pow(2,o),i+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),i=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(i=i<<o|s,l+=o;l>0;e[n+p]=255&i,p+=h,i/=256,l-=8);e[n+p-h]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){var r=n(332),o=n(333)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=r(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";var a=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port,n.href=n.protocol+"://"+a+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),a=e.indexOf("]");-1!=o&&-1!=a&&(e=e.substring(0,o)+e.substring(o,a).replace(/:/g,";")+e.substring(a,e.length));for(var i=n.exec(e||""),s={},c=14;c--;)s[r[c]]=i[c]||"";return-1!=o&&-1!=a&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(334)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(a=o))})),e.splice(a,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(94))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,a=o-(n||o);e.diff=a,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var c=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"==typeof o){var a=i[c];n=o.call(e,a),i.splice(c,1),c--}return n})),t.formatArgs.call(e,i),(r.log||t.log||void 0).apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(n=0;n<o;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var a=t.instances[n];a.enabled=t.enabled(a.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(335),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=6e4,o=36e5,a=864e5;function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var s,c,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*o;case"minutes":case"minute":case"mins":case"min":case"m":return i*r;case"seconds":case"second":case"secs":case"sec":case"s":return i*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(e);if("number"===l&&!1===isNaN(e))return t.long?i(s=e,a,"day")||i(s,o,"hour")||i(s,r,"minute")||i(s,n,"second")||s+" ms":(c=e)>=a?Math.round(c/a)+"d":c>=o?Math.round(c/o)+"h":c>=r?Math.round(c/r)+"m":c>=n?Math.round(c/n)+"s":c+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){"use strict";var r=Nenge,o=r.I,a=new class{constructor(e){let t=e.I;t.defines(this,{T:e,I:t},1),this.speed=e.speed,this.callaction=e.callaction}action={};DB={};SetModule(e){let t=this;e&&t.I.defines(t,{Module:e},1),t.Module&&(t.MEMFS.stream_ops.write=t.ops_write,t.MEMFS.ops_table&&(t.MEMFS.ops_table.file.stream.write=t.ops_write))}get FS(){return this.Module.FS}get MEMFS(){return this.FS.filesystems.MEMFS}get HEAP8(){return this.Module.HEAP8}getStore(e){this.T;let t=this.DB,n=e.mountpoint||e;return!!t[n]&&t[n]}mount(e){let t=this;t.FS.analyzePath(e.mountpoint).exists||t.FS.createPath("/",e.mountpoint,!0,!0);let n=e.mountpoint.split("/").length,r=t.MEMFS.createNode(n<3?t.FS.root:null,n<3?e.mountpoint.split("/").pop():e.mountpoint.replace(/^\//,""),16895,0);return t.getStore(e)&&(t.__mount||(t.__mount=[]),t.__mount.push(t.syncfs(e,(e=>t.callaction("DiskReadyOut",e))))),r}mountReady(){return Promise.all(this.__mount||[])}async syncfs(e,t,n){let r=this;t=n instanceof Function?n:t;let o,a=r.getStore(e);return o=e.isReady?await r.syncWrite(a,e):await r.writeToFS(a),e.isReady=!0,t instanceof Function&&t(o),o}async writeToFS(e){let t=this;return t.I.toArr(await e.all(!0)).map((e=>t.storeLocalEntry(e[0],e[1]))).join("\n")}async syncWrite(e,t){let n=this,r=n.I,o=t.isReady,a=n.getLocalSet(t),i=await n.getRemoteSet(e),s=(o?a:i).entries||{},c=(o?i:a).entries||{},l=await Promise.all(r.toArr(s).filter((e=>{if(!e[1])return"";let t=e[0],n=c[t];return!n||e[1].timestamp>n.timestamp})).map((e=>e[0])).sort().map((async t=>{if(o){let r=n.loadLocalEntry(t);if(r)return await e.put(t,r),"DB saved:"+t}else{let r=await e.get(t);if(r)return n.storeLocalEntry(t,r)}})));return l.concat(await Promise.all(r.toArr(c).filter((e=>{if(!e[1])return"";let t=s[e[0]];e[0];return!t||e[1].timestamp>t.timestamp})).map((e=>e[0])).sort().map((async t=>{let r="";return o?(await e.remove(t,!0),r="DB remove:"):(n.removeLocalEntry(t),r="FS remove:"),r+t})))),n.callaction("indexdb-sync",o,l),l.join("\n")}loadLocalEntry(e){let t,n,r=this,o=r.FS;return o.analyzePath(e).exists?(n=o.lookupPath(e).node,t=o.stat(e),o.isDir(t.mode)?{timestamp:t.mtime,mode:t.mode}:o.isFile(t.mode)?(n.contents=r.getFileDataAsTypedArray(n),{timestamp:t.mtime,mode:t.mode,contents:n.contents}):"node type not supported"):e+" is exists"}storeLocalEntry(e,t){let n=this.T,r=this.FS;if(r.isDir(t.mode))!r.analyzePath(e).exists&&r.createPath("/",e,!0,!0);else if(r.isFile(t.mode)){let n=e&&e.split("/").slice(0,-1).join("/");n&&!r.analyzePath(n).exists&&r.createPath("/",n,!0,!0),r.writeFile(e,t.contents,{canOwn:!0,encoding:"binary"})}else n.Err("node type not supported");return r.chmod(e,t.mode),r.utime(e,t.timestamp,t.timestamp),"FS write:"+e}removeLocalEntry(e){let t=this.FS;if(t.analyzePath(e).exists){var n=t.stat(e);return t.isDir(n.mode)?t.rmdir(e):t.isFile(n.mode)&&t.unlink(e),"FS unlink:"+e}return e+"is not exists"}async getRemoteSet(e,t){let n={type:"remote",store:e,entries:await e.cursor("timestamp",!0)};return t&&t(n),n}getLocalSet(e,t){let n=this.T;e||n.Err("mount:PATH ERROR");let r={type:"local",entries:this.getLocalList(e.mountpoint)};return t&&t(r),r}getLocalList(e){e=e||"/";let t=this,n=t.T,r=t.FS,o={},a=[".",".."].concat("/"==e?["dev","tmp","proc"]:[]),i=e=>!a.includes(e),s=e=>n=>t.join2(e,n),c=t.stat(e)&&r.readdir(e).filter(i).map(s(e));for(c||n.Err("mount:PATH ERROR");c.length;){let e=c.pop(),n=t.stat(e);n&&(r.isDir(n.mode)&&c.push.apply(c,r.readdir(e).filter(i).map(s(e))),o[e]={timestamp:n.mtime})}return o}stat(e){let t=this.FS,n=t.analyzePath(e);if(n.exists&&n.object.node_ops&&n.object.node_ops.getattr)return t.stat(e)}getFileDataAsTypedArray(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array}join(){var e=Array.prototype.slice.call(arguments,0);return this.normalize(e.join("/"))}join2(e,t){return this.normalize(e+"/"+t)}normalize(e){var t="/"===e.charAt(0),n="/"===e.substring(-1);return(e=this.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e}normalizeArray(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e}ops_write=(e,t,n,r,o,a)=>{let i=this;if(i.HEAP8&&t.buffer===i.HEAP8.buffer&&(a=!1),!r)return 0;var s=e.node;if(s.timestamp=Date.now(),t.subarray&&(!s.contents||s.contents.subarray)){if(a)return s.contents=t.subarray(n,n+r),s.usedBytes=r,r;if(0===s.usedBytes&&0===o)return i.update(e),s.contents=new Uint8Array(t.subarray(n,n+r)),s.usedBytes=r,r;if(o+r<=s.usedBytes)return s.contents.set(t.subarray(n,n+r),o),r}if(i.MEMFS.expandFileStorage(s,o+r),s.contents.subarray&&t.subarray)s.contents.set(t.subarray(n,n+r),o);else for(var c=0;c<r;c++)s.contents[o+c]=t[n+c];return s.usedBytes=Math.max(s.usedBytes,o+r),r};updatePromise(e){let t=this;return new Promise(((n,r)=>{t.updateList.includes(e.node.mount)||t.updateList.push(e.node.mount);let o=setInterval((()=>{t.updateTime&&o!=t.updateTime&&(clearInterval(o),r("other update")),null!=e.fd&&null!=t.FS.streams[e.fd]||(clearInterval(o),n("ok"))}),t.speed);t.updateTime=o}))}updatePath=[];updateList=[];async updateMount(){let e=this;if(e.updateList.length){let t=e.updateList.map((async t=>e.syncfs(t,(e=>{}))));e.updateList=[],e.updatePath=[],await Promise.all(t)}}update(e){let t=this;t.getStore(e.node.mount)&&e.path&&null!=e.fd&&!t.updatePath.includes(e.path)&&(t.updatePath.push(e.path),t.updatePromise(e).then((e=>t.updateMount())))}ReadFile(e){if(this.FS.analyzePath(e).exists)return this.FS.readFile(e)}MKFILE(e,t,n){if(!this.Module)return;let r=this.FS,o=e.split("/");if(o=o.length?o.slice(0,-1).join("/"):"/",!r.analyzePath(o).exists){let e=o.split("/").slice(0,-1).join("/");r.analyzePath(e).exists||r.createPath("/",e,!0,!0),r.createPath("/",o,!0,!0)}"string"==typeof t&&(t=(new TextEncoder).encode(t)),n?(r.analyzePath(e).exists&&r.unlink(e),r.writeFile(e,t,{encoding:"binary"})):r.analyzePath(e).exists||r.writeFile(e,t,{encoding:"binary"})}}(r);n.r(t),n(133),n(320),n(321);var i=n(52),s=n(129),c=n.n(s),l=function(e){return null!=e?e.constructor:null},u=function(e,t){return Boolean(e&&t&&e instanceof t)},d=function(e){return null==e},f=function(e){return l(e)===Object},p=function(e){return l(e)===String},h=function(e){return Array.isArray(e)},m=function(e){return u(e,NodeList)},v=function(e){return d(e)||(p(e)||h(e)||m(e))&&!e.length||f(e)&&!Object.keys(e).length},_=d,g=f,y=function(e){return l(e)===Number&&!Number.isNaN(e)},b=function(e){return l(e)===Boolean},x=function(e){return l(e)===Function},T=h,E=m,S=function(e){return u(e,Element)},C=function(e){return u(e,Event)},w=function(e){return u(e,KeyboardEvent)},O=v;function A(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e&&"addEventListener"in e&&!O(t)&&x(n)){var s=t.split(" "),c=i;c={passive:a,capture:i},s.forEach((function(t){r&&r.eventListeners&&o&&r.eventListeners.push({element:e,type:t,callback:n,options:c}),e[o?"addEventListener":"removeEventListener"](t,n,c)}))}}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];A.call(this,e,t,n,!0,r,o)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];A.call(this,e,t,n,!1,r,o)}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];A.call(this,e,t,(function a(){M(e,t,a,r,o);for(var i=arguments.length,s=new Array(i),c=0;c<i;c++)s[c]=arguments[c];n.apply(this,s)}),!0,r,o)}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(S(e)&&!O(t)){var o=new CustomEvent(t,{bubbles:n,detail:Object.assign({},r,{emulator:this})});e.dispatchEvent(o)}}var R=n(130),L=n.n(R);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function k(e,t){S(e)&&!O(t)&&Object.entries(t).filter((function(e){var t=B(e,2)[1];return!_(t)})).forEach((function(t){var n=B(t,2),r=n[0],o=n[1];return e.setAttribute(r,o)}))}function D(e,t,n){var r=document.createElement(e);return g(t)&&k(r,t),o.str(n)&&(r.innerHTML=n),r}function j(e){E(e)||T(e)?Array.from(e).forEach(j):S(e)&&S(e.parentNode)&&e.parentNode.removeChild(e)}function F(e,t){if(!o.str(e)||O(e))return{};var n={},r=t;return e.split(",").forEach((function(e){var t=e.trim(),a=t.replace(".",""),i=t.replace(/[[\]]/g,"").split("="),s=i[0],c=i.length>1?i[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":g(r)&&o.str(r.class)&&(r.class+=" ".concat(a)),n.class=a;break;case"#":n.id=t.replace("#","");break;case"[":n[s]=c}})),n}function U(e,t){S(e)&&(b(t)||(t=!e.hidden),t?e.setAttribute("hidden",""):e.removeAttribute("hidden"))}function G(e,t,n){if(E(e))return Array.from(e).map((function(e){return G(e,t,n)}));if(S(e)){var r="toggle";return void 0!==n&&(r=n?"add":"remove"),e.classList[r](t),e.classList.contains(t)}return!1}function z(e,t){return S(e)&&e.classList.contains(t)}function H(e,t){var n={Element:Element};return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function Y(e){return this.elements.container.querySelectorAll(e)}function V(e){return this.elements.container.querySelector(e)}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(S(e)){var n=Y.call(this,"button:not(:disabled), input:not(:disabled), [tabindex]"),r=n[0],o=n[n.length-1];A.call(this,this.elements.container,"keydown",(function(e){if("Tab"===e.key&&9===e.keyCode){var t=document.activeElement;t!==o||e.shiftKey?t===r&&e.shiftKey&&(o.focus(),e.preventDefault()):(r.focus(),e.preventDefault())}}),t,!1)}}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];S(e)&&(e.focus(),t&&G(e,this.config.classNames.tabFocus))}function W(e){return c.a.bind(L.a)(e)}let K=n(130);function J(e,t){let n=t?".":"";return o.str(e)&&(e=e.trim().split(" ")),e.map((e=>n+(K[e]?K[e]:e))).join(" ")}var $,Z,Q,ee=($=document.createElement("span"),Z={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},Q=Object.keys(Z).find((function(e){return void 0!==$.style[e]})),!!o.str(Q)&&Z[Q]);function te(e){setTimeout((function(){try{U(e,!0),e.offsetHeight,U(e,!1)}catch(e){}}),0)}var ne,re,oe="Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1,ae=!!document.documentMode,ie="WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),se=(/(iPhone|iPod)/gi.test(navigator.platform),/(iPad|iPhone|iPod)/gi.test(navigator.platform)),ce=function(){var e=/(MSIE|(?!Gecko.+)Firefox|(?!AppleWebKit.+Chrome.+)Safari|(?!AppleWebKit.+)Chrome|AppleWebKit(?!.+Chrome|.+Safari)|Gecko(?!.+Firefox))(?: |\/)([\d\.apre]+)/.exec(navigator.userAgent);return{name:e[1].toLowerCase(),version:e[2]}},le={rangeInput:(re=document.createElement("input"),re.type="range","range"===re.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==ee,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches,webgl:function(){var e={DETECTED:!1};if(!e.DETECTED){var t=document.createElement("canvas");if(t&&t.getContext)for(var n=["webgl2","experimental-webgl2","webgl","experimental-webgl"],r=0,o=n.length;r<o;++r){var a=n[r],i=t.getContext(a);if(i){e.WEBGL_CONTEXT=a,e.WEBGL_VERSION=i.getParameter(i.VERSION),e.WEBGL_VENDOR=i.getParameter(i.VENDOR),e.WEBGL_SL_VERSION=i.getParameter(i.SHADING_LANGUAGE_VERSION),e.MAX_TEXTURE_SIZE=i.getParameter(i.MAX_TEXTURE_SIZE);var s=i.getExtension("WEBGL_debug_renderer_info");s&&(e.WEBGL_VENDOR=i.getParameter(s.UNMASKED_VENDOR_WEBGL),e.WEBGL_RENDERER=i.getParameter(s.UNMASKED_RENDERER_WEBGL)),e.DETECTED=!0;break}}}return e}(),wasm:"undefined"!=typeof WebAssembly&&g(WebAssembly),websocket:"undefined"!=typeof WebSocket,webRTCSupported:(ne=!1,["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach((function(e){ne||e in window&&(ne=!0)})),ne),audioContext:"undefined"!=typeof AudioContext,filesystem:void("showOpenFilePicker"in window&&"showSaveFilePicker"in window&&window),indexeddb:"indexedDB"in window};function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var o=n.shift();return g(o)?(Object.keys(o).forEach((function(t){g(o[t])?(Object.keys(e).includes(t)||Object.assign(e,ue({},t,{})),de(e[t],o[t])):Object.assign(e,ue({},t,o[t]))})),de.apply(void 0,[e].concat(n))):e}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString())}var pe,he=n(53),me=n.n(he),ve=n(1),_e=n(131),ge=n.n(_e),ye={"2xScaleHQ.glslp":'shaders = 1\n\nshader0 = "2xScaleHQ.glsl"\nfilter_linear0 = false\nscale_type_0 = source\n',"4xScaleHQ.glslp":'shaders = 1\n\nshader0 = "4xScaleHQ.glsl"\nfilter_linear0 = false\nscale_type_0 = source\n',"5xbrz.glslp":'shaders = 1\nshader0 = "5xbrz.glsl"\nfilter_linear0 = false\nscale_type0 = source\nscale0 = 5.0\n',"6xbrz.glslp":'shaders = 1\nshader0 = "6xbrz.glsl"\nfilter_linear0 = false\nscale_type0 = source\nscale0 = 6.0\n',"crt-easymode.glslp":"shaders = 1\n\nshader0 = crt-easymode.glsl\nfilter_linear0 = false\nscale_type_0 = source\n","crt-aperture.glslp":"shaders = 1\n\nshader0 = crt-aperture.glsl\nfilter_linear0 = false\n","crt-geom.glslp":"shaders = 1\n\nshader0 = crt-geom.glsl\nfilter_linear0 = false\nscale_type_0 = source\n","crt-mattias.glslp":"\nshaders = 1\nshader0 = crt-mattias.glsl\nfilter_linear0 = false\n","2xScaleHQ.glsl":"/*\n2xGLSLHqFilter shader\n\nCopyright (C) 2005 guest(r) - guest.r@gmail.com\n\nThis program is free software; you can redistribute it and/or\nmodify it under the terms of the GNU General Public License\nas published by the Free Software Foundation; either version 2\nof the License, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program; if not, write to the Free Software\nFoundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n*/\n\n#if defined(VERTEX)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING out\n#define COMPAT_ATTRIBUTE in\n#define COMPAT_TEXTURE texture\n#else\n#define COMPAT_VARYING varying \n#define COMPAT_ATTRIBUTE attribute \n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nCOMPAT_ATTRIBUTE vec4 VertexCoord;\nCOMPAT_ATTRIBUTE vec4 COLOR;\nCOMPAT_ATTRIBUTE vec4 TexCoord;\nCOMPAT_VARYING vec4 COL0;\nCOMPAT_VARYING vec4 TEX0;\nCOMPAT_VARYING vec4 t1;\nCOMPAT_VARYING vec4 t2;\nCOMPAT_VARYING vec4 t3;\nCOMPAT_VARYING vec4 t4;\n\nvec4 _oPosition1; \nuniform mat4 MVPMatrix;\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\n\n// compatibility #defines\n#define vTexCoord TEX0.xy\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define OutSize vec4(OutputSize, 1.0 / OutputSize)\n\nvoid main()\n{\ngl_Position = MVPMatrix * VertexCoord;\nTEX0.xy = TexCoord.xy;\nfloat x = 0.5 * SourceSize.z;\nfloat y = 0.5 * SourceSize.w;\nvec2 dg1 = vec2( x, y);\nvec2 dg2 = vec2(-x, y);\nvec2 dx = vec2(x, 0.0);\nvec2 dy = vec2(0.0, y);\nt1 = vec4(vTexCoord - dg1, vTexCoord - dy);\nt2 = vec4(vTexCoord - dg2, vTexCoord + dx);\nt3 = vec4(vTexCoord + dg1, vTexCoord + dy);\nt4 = vec4(vTexCoord + dg2, vTexCoord - dx);\n}\n\n#elif defined(FRAGMENT)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING in\n#define COMPAT_TEXTURE texture\nout vec4 FragColor;\n#else\n#define COMPAT_VARYING varying\n#define FragColor gl_FragColor\n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\nuniform sampler2D Texture;\nCOMPAT_VARYING vec4 TEX0;\nCOMPAT_VARYING vec4 t1;\nCOMPAT_VARYING vec4 t2;\nCOMPAT_VARYING vec4 t3;\nCOMPAT_VARYING vec4 t4;\n\n// compatibility #defines\n#define Source Texture\n#define vTexCoord TEX0.xy\n\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define OutSize vec4(OutputSize, 1.0 / OutputSize)\n\nfloat mx = 0.325;      // start smoothing wt.\nfloat k = -0.250;      // wt. decrease factor\nfloat max_w = 0.25;    // max filter weight\nfloat min_w =-0.05;    // min filter weight\nfloat lum_add = 0.25;  // affects smoothing\nvec3 dt = vec3(1.0);\n\nvoid main()\n{\nvec3 c00 = COMPAT_TEXTURE(Source, t1.xy).xyz; \nvec3 c10 = COMPAT_TEXTURE(Source, t1.zw).xyz; \nvec3 c20 = COMPAT_TEXTURE(Source, t2.xy).xyz; \nvec3 c01 = COMPAT_TEXTURE(Source, t4.zw).xyz; \nvec3 c11 = COMPAT_TEXTURE(Source, vTexCoord).xyz; \nvec3 c21 = COMPAT_TEXTURE(Source, t2.zw).xyz; \nvec3 c02 = COMPAT_TEXTURE(Source, t4.xy).xyz; \nvec3 c12 = COMPAT_TEXTURE(Source, t3.zw).xyz; \nvec3 c22 = COMPAT_TEXTURE(Source, t3.xy).xyz; \n\nfloat md1 = dot(abs(c00 - c22), dt);\nfloat md2 = dot(abs(c02 - c20), dt);\n\nfloat w1 = dot(abs(c22 - c11), dt) * md2;\nfloat w2 = dot(abs(c02 - c11), dt) * md1;\nfloat w3 = dot(abs(c00 - c11), dt) * md2;\nfloat w4 = dot(abs(c20 - c11), dt) * md1;\n\nfloat t1 = w1 + w3;\nfloat t2 = w2 + w4;\nfloat ww = max(t1, t2) + 0.0001;\n\nc11 = (w1 * c00 + w2 * c20 + w3 * c22 + w4 * c02 + ww * c11) / (t1 + t2 + ww);\n\nfloat lc1 = k / (0.12 * dot(c10 + c12 + c11, dt) + lum_add);\nfloat lc2 = k / (0.12 * dot(c01 + c21 + c11, dt) + lum_add);\n\nw1 = clamp(lc1 * dot(abs(c11 - c10), dt) + mx, min_w, max_w);\nw2 = clamp(lc2 * dot(abs(c11 - c21), dt) + mx, min_w, max_w);\nw3 = clamp(lc1 * dot(abs(c11 - c12), dt) + mx, min_w, max_w);\nw4 = clamp(lc2 * dot(abs(c11 - c01), dt) + mx, min_w, max_w);\nFragColor = vec4(w1 * c10 + w2 * c21 + w3 * c12 + w4 * c01 + (1.0 - w1 - w2 - w3 - w4) * c11, 1.0);\n} \n#endif\n","4xScaleHQ.glsl":"/*\n4xGLSLHqFilter shader\n\nCopyright (C) 2005 guest(r) - guest.r@gmail.com\n\nThis program is free software; you can redistribute it and/or\nmodify it under the terms of the GNU General Public License\nas published by the Free Software Foundation; either version 2\nof the License, or (at your option) any later version.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License\nalong with this program; if not, write to the Free Software\nFoundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n*/\n\n#if defined(VERTEX)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING out\n#define COMPAT_ATTRIBUTE in\n#define COMPAT_TEXTURE texture\n#else\n#define COMPAT_VARYING varying \n#define COMPAT_ATTRIBUTE attribute \n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nCOMPAT_ATTRIBUTE vec4 VertexCoord;\nCOMPAT_ATTRIBUTE vec4 COLOR;\nCOMPAT_ATTRIBUTE vec4 TexCoord;\nCOMPAT_VARYING vec4 COL0;\nCOMPAT_VARYING vec4 TEX0;\nCOMPAT_VARYING vec4 t1;\nCOMPAT_VARYING vec4 t2;\nCOMPAT_VARYING vec4 t3;\nCOMPAT_VARYING vec4 t4;\nCOMPAT_VARYING vec4 t5;\nCOMPAT_VARYING vec4 t6;\n\nvec4 _oPosition1; \nuniform mat4 MVPMatrix;\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\n\n// compatibility #defines\n#define vTexCoord TEX0.xy\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define OutSize vec4(OutputSize, 1.0 / OutputSize)\n\nvoid main()\n{\ngl_Position = MVPMatrix * VertexCoord;\nTEX0.xy = TexCoord.xy;\nfloat x = 0.5 * SourceSize.z;\nfloat y = 0.5 * SourceSize.w;\nvec2 dg1 = vec2( x, y);\nvec2 dg2 = vec2(-x, y);\nvec2 sd1 = dg1 * 0.5;\nvec2 sd2 = dg2 * 0.5;\nvec2 ddx = vec2(x, 0.0);\nvec2 ddy = vec2(0.0, y);\nt1 = vec4(vTexCoord - sd1, vTexCoord - ddy);\nt2 = vec4(vTexCoord - sd2, vTexCoord + ddx);\nt3 = vec4(vTexCoord + sd1, vTexCoord + ddy);\nt4 = vec4(vTexCoord + sd2, vTexCoord - ddx);\nt5 = vec4(vTexCoord - dg1, vTexCoord - dg2);\nt6 = vec4(vTexCoord + dg1, vTexCoord + dg2);\n}\n\n#elif defined(FRAGMENT)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING in\n#define COMPAT_TEXTURE texture\nout vec4 FragColor;\n#else\n#define COMPAT_VARYING varying\n#define FragColor gl_FragColor\n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\nuniform sampler2D Texture;\nCOMPAT_VARYING vec4 TEX0;\nCOMPAT_VARYING vec4 t1;\nCOMPAT_VARYING vec4 t2;\nCOMPAT_VARYING vec4 t3;\nCOMPAT_VARYING vec4 t4;\nCOMPAT_VARYING vec4 t5;\nCOMPAT_VARYING vec4 t6;\n\n// compatibility #defines\n#define Source Texture\n#define vTexCoord TEX0.xy\n\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define OutSize vec4(OutputSize, 1.0 / OutputSize)\n\nfloat mx = 1.0;      // start smoothing wt.\nfloat k = -1.10;      // wt. decrease factor\nfloat max_w = 0.75;    // max filter weight\nfloat min_w = 0.03;    // min filter weight\nfloat lum_add = 0.33;  // affects smoothing\nvec3 dt = vec3(1.0);\n\nvoid main()\n{\nvec3 c  = COMPAT_TEXTURE(Source, vTexCoord).xyz;\nvec3 i1 = COMPAT_TEXTURE(Source, t1.xy).xyz; \nvec3 i2 = COMPAT_TEXTURE(Source, t2.xy).xyz; \nvec3 i3 = COMPAT_TEXTURE(Source, t3.xy).xyz; \nvec3 i4 = COMPAT_TEXTURE(Source, t4.xy).xyz; \nvec3 o1 = COMPAT_TEXTURE(Source, t5.xy).xyz; \nvec3 o3 = COMPAT_TEXTURE(Source, t6.xy).xyz; \nvec3 o2 = COMPAT_TEXTURE(Source, t5.zw).xyz;\nvec3 o4 = COMPAT_TEXTURE(Source, t6.zw).xyz;\nvec3 s1 = COMPAT_TEXTURE(Source, t1.zw).xyz; \nvec3 s2 = COMPAT_TEXTURE(Source, t2.zw).xyz; \nvec3 s3 = COMPAT_TEXTURE(Source, t3.zw).xyz; \nvec3 s4 = COMPAT_TEXTURE(Source, t4.zw).xyz; \n\nfloat ko1=dot(abs(o1-c),dt);\nfloat ko2=dot(abs(o2-c),dt);\nfloat ko3=dot(abs(o3-c),dt);\nfloat ko4=dot(abs(o4-c),dt);\n\nfloat k1=min(dot(abs(i1-i3),dt),max(ko1,ko3));\nfloat k2=min(dot(abs(i2-i4),dt),max(ko2,ko4));\n\nfloat w1 = k2; if(ko3<ko1) w1*=ko3/ko1;\nfloat w2 = k1; if(ko4<ko2) w2*=ko4/ko2;\nfloat w3 = k2; if(ko1<ko3) w3*=ko1/ko3;\nfloat w4 = k1; if(ko2<ko4) w4*=ko2/ko4;\n\nc=(w1*o1+w2*o2+w3*o3+w4*o4+0.001*c)/(w1+w2+w3+w4+0.001);\nw1 = k*dot(abs(i1-c)+abs(i3-c),dt)/(0.125*dot(i1+i3,dt)+lum_add);\nw2 = k*dot(abs(i2-c)+abs(i4-c),dt)/(0.125*dot(i2+i4,dt)+lum_add);\nw3 = k*dot(abs(s1-c)+abs(s3-c),dt)/(0.125*dot(s1+s3,dt)+lum_add);\nw4 = k*dot(abs(s2-c)+abs(s4-c),dt)/(0.125*dot(s2+s4,dt)+lum_add);\n\nw1 = clamp(w1+mx,min_w,max_w); \nw2 = clamp(w2+mx,min_w,max_w);\nw3 = clamp(w3+mx,min_w,max_w); \nw4 = clamp(w4+mx,min_w,max_w);\n\nFragColor = vec4((w1*(i1+i3)+w2*(i2+i4)+w3*(s1+s3)+w4*(s2+s4)+c)/(2.0*(w1+w2+w3+w4)+1.0), 1.0);\n} \n#endif\n","5xbrz.glsl":"\n#define BLEND_NONE 0\n#define BLEND_NORMAL 1\n#define BLEND_DOMINANT 2\n#define LUMINANCE_WEIGHT 1.0\n#define EQUAL_COLOR_TOLERANCE 30.0/255.0\n#define STEEP_DIRECTION_THRESHOLD 2.2\n#define DOMINANT_DIRECTION_THRESHOLD 3.6\n\n#if defined(VERTEX)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING out\n#define COMPAT_ATTRIBUTE in\n#define COMPAT_TEXTURE texture\n#else\n#define COMPAT_VARYING varying \n#define COMPAT_ATTRIBUTE attribute \n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nCOMPAT_ATTRIBUTE vec4 VertexCoord;\nCOMPAT_ATTRIBUTE vec4 COLOR;\nCOMPAT_ATTRIBUTE vec4 TexCoord;\nCOMPAT_VARYING vec4 COL0;\nCOMPAT_VARYING vec4 TEX0;\nCOMPAT_VARYING vec4 t1;\nCOMPAT_VARYING vec4 t2;\nCOMPAT_VARYING vec4 t3;\nCOMPAT_VARYING vec4 t4;\nCOMPAT_VARYING vec4 t5;\nCOMPAT_VARYING vec4 t6;\nCOMPAT_VARYING vec4 t7;\n\nuniform mat4 MVPMatrix;\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\n\n// vertex compatibility #defines\n#define vTexCoord TEX0.xy\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define outsize vec4(OutputSize, 1.0 / OutputSize)\n\nvoid main()\n{\n    gl_Position = MVPMatrix * VertexCoord;\n    COL0 = COLOR;\n    TEX0.xy = TexCoord.xy;\n    vec2 ps = vec2(SourceSize.z, SourceSize.w);\n    float dx = ps.x;\n    float dy = ps.y;\n\n\n    t1 = vTexCoord.xxxy + vec4( -dx, 0.0, dx,-2.0*dy); // A1 B1 C1\n    t2 = vTexCoord.xxxy + vec4( -dx, 0.0, dx, -dy);    //  A  B  C\n    t3 = vTexCoord.xxxy + vec4( -dx, 0.0, dx, 0.0);    //  D  E  F\n    t4 = vTexCoord.xxxy + vec4( -dx, 0.0, dx, dy);     //  G  H  I\n    t5 = vTexCoord.xxxy + vec4( -dx, 0.0, dx, 2.0*dy); // G5 H5 I5\n    t6 = vTexCoord.xyyy + vec4(-2.0*dx,-dy, 0.0, dy);  // A0 D0 G0\n    t7 = vTexCoord.xyyy + vec4( 2.0*dx,-dy, 0.0, dy);  // C4 F4 I4\n}\n\n#elif defined(FRAGMENT)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING in\n#define COMPAT_TEXTURE texture\nout vec4 FragColor;\n#else\n#define COMPAT_VARYING varying\n#define FragColor gl_FragColor\n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\nuniform sampler2D Texture;\nCOMPAT_VARYING vec4 TEX0;\nCOMPAT_VARYING vec4 t1;\nCOMPAT_VARYING vec4 t2;\nCOMPAT_VARYING vec4 t3;\nCOMPAT_VARYING vec4 t4;\nCOMPAT_VARYING vec4 t5;\nCOMPAT_VARYING vec4 t6;\nCOMPAT_VARYING vec4 t7;\n\n// fragment compatibility #defines\n#define Source Texture\n#define vTexCoord TEX0.xy\n\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define outsize vec4(OutputSize, 1.0 / OutputSize)\n\n    const float  one_sixth = 1.0 / 6.0;\n    const float  two_sixth = 2.0 / 6.0;\n    const float four_sixth = 4.0 / 6.0;\n    const float five_sixth = 5.0 / 6.0;\n\n    float reduce(const vec3 color)\n    {\n        return dot(color, vec3(65536.0, 256.0, 1.0));\n    }\n    \n    float DistYCbCr(const vec3 pixA, const vec3 pixB)\n    {\n        const vec3 w = vec3(0.2627, 0.6780, 0.0593);\n        const float scaleB = 0.5 / (1.0 - w.b);\n        const float scaleR = 0.5 / (1.0 - w.r);\n        vec3 diff = pixA - pixB;\n        float Y = dot(diff, w);\n        float Cb = scaleB * (diff.b - Y);\n        float Cr = scaleR * (diff.r - Y);\n        \n        return sqrt( ((LUMINANCE_WEIGHT * Y) * (LUMINANCE_WEIGHT * Y)) + (Cb * Cb) + (Cr * Cr) );\n    }\n    \n    bool IsPixEqual(const vec3 pixA, const vec3 pixB)\n    {\n        return (DistYCbCr(pixA, pixB) < EQUAL_COLOR_TOLERANCE);\n    }\n    \n    bool IsBlendingNeeded(const ivec4 blend)\n    {\n        return any(notEqual(blend, ivec4(BLEND_NONE)));\n    }\n    \n\nvoid main()\n{\n    vec2 f = fract(vTexCoord.xy * SourceSize.xy);\n\n    vec3 src[25];\n    \n    src[21] = COMPAT_TEXTURE(Source, t1.xw).rgb;\n    src[22] = COMPAT_TEXTURE(Source, t1.yw).rgb;\n    src[23] = COMPAT_TEXTURE(Source, t1.zw).rgb;\n    src[ 6] = COMPAT_TEXTURE(Source, t2.xw).rgb;\n    src[ 7] = COMPAT_TEXTURE(Source, t2.yw).rgb;\n    src[ 8] = COMPAT_TEXTURE(Source, t2.zw).rgb;\n    src[ 5] = COMPAT_TEXTURE(Source, t3.xw).rgb;\n    src[ 0] = COMPAT_TEXTURE(Source, t3.yw).rgb;\n    src[ 1] = COMPAT_TEXTURE(Source, t3.zw).rgb;\n    src[ 4] = COMPAT_TEXTURE(Source, t4.xw).rgb;\n    src[ 3] = COMPAT_TEXTURE(Source, t4.yw).rgb;\n    src[ 2] = COMPAT_TEXTURE(Source, t4.zw).rgb;\n    src[15] = COMPAT_TEXTURE(Source, t5.xw).rgb;\n    src[14] = COMPAT_TEXTURE(Source, t5.yw).rgb;\n    src[13] = COMPAT_TEXTURE(Source, t5.zw).rgb;\n    src[19] = COMPAT_TEXTURE(Source, t6.xy).rgb;\n    src[18] = COMPAT_TEXTURE(Source, t6.xz).rgb;\n    src[17] = COMPAT_TEXTURE(Source, t6.xw).rgb;\n    src[ 9] = COMPAT_TEXTURE(Source, t7.xy).rgb;\n    src[10] = COMPAT_TEXTURE(Source, t7.xz).rgb;\n    src[11] = COMPAT_TEXTURE(Source, t7.xw).rgb;\n    \n        float v[9];\n        v[0] = reduce(src[0]);\n        v[1] = reduce(src[1]);\n        v[2] = reduce(src[2]);\n        v[3] = reduce(src[3]);\n        v[4] = reduce(src[4]);\n        v[5] = reduce(src[5]);\n        v[6] = reduce(src[6]);\n        v[7] = reduce(src[7]);\n        v[8] = reduce(src[8]);\n        \n        ivec4 blendResult = ivec4(BLEND_NONE);\n        \n        if ( ((v[0] == v[1] && v[3] == v[2]) || (v[0] == v[3] && v[1] == v[2])) == false)\n        {\n            float dist_03_01 = DistYCbCr(src[ 4], src[ 0]) + DistYCbCr(src[ 0], src[ 8]) + DistYCbCr(src[14], src[ 2]) + DistYCbCr(src[ 2], src[10]) + (4.0 * DistYCbCr(src[ 3], src[ 1]));\n            float dist_00_02 = DistYCbCr(src[ 5], src[ 3]) + DistYCbCr(src[ 3], src[13]) + DistYCbCr(src[ 7], src[ 1]) + DistYCbCr(src[ 1], src[11]) + (4.0 * DistYCbCr(src[ 0], src[ 2]));\n            bool dominantGradient = (DOMINANT_DIRECTION_THRESHOLD * dist_03_01) < dist_00_02;\n            blendResult[2] = ((dist_03_01 < dist_00_02) && (v[0] != v[1]) && (v[0] != v[3])) ? ((dominantGradient) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n        }\n\n        if ( ((v[5] == v[0] && v[4] == v[3]) || (v[5] == v[4] && v[0] == v[3])) == false)\n        {\n            float dist_04_00 = DistYCbCr(src[17], src[ 5]) + DistYCbCr(src[ 5], src[ 7]) + DistYCbCr(src[15], src[ 3]) + DistYCbCr(src[ 3], src[ 1]) + (4.0 * DistYCbCr(src[ 4], src[ 0]));\n            float dist_05_03 = DistYCbCr(src[18], src[ 4]) + DistYCbCr(src[ 4], src[14]) + DistYCbCr(src[ 6], src[ 0]) + DistYCbCr(src[ 0], src[ 2]) + (4.0 * DistYCbCr(src[ 5], src[ 3]));\n            bool dominantGradient = (DOMINANT_DIRECTION_THRESHOLD * dist_05_03) < dist_04_00;\n            blendResult[3] = ((dist_04_00 > dist_05_03) && (v[0] != v[5]) && (v[0] != v[3])) ? ((dominantGradient) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n        }\n        \n        if ( ((v[7] == v[8] && v[0] == v[1]) || (v[7] == v[0] && v[8] == v[1])) == false)\n        {\n            float dist_00_08 = DistYCbCr(src[ 5], src[ 7]) + DistYCbCr(src[ 7], src[23]) + DistYCbCr(src[ 3], src[ 1]) + DistYCbCr(src[ 1], src[ 9]) + (4.0 * DistYCbCr(src[ 0], src[ 8]));\n            float dist_07_01 = DistYCbCr(src[ 6], src[ 0]) + DistYCbCr(src[ 0], src[ 2]) + DistYCbCr(src[22], src[ 8]) + DistYCbCr(src[ 8], src[10]) + (4.0 * DistYCbCr(src[ 7], src[ 1]));\n            bool dominantGradient = (DOMINANT_DIRECTION_THRESHOLD * dist_07_01) < dist_00_08;\n            blendResult[1] = ((dist_00_08 > dist_07_01) && (v[0] != v[7]) && (v[0] != v[1])) ? ((dominantGradient) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n        }\n        \n        if ( ((v[6] == v[7] && v[5] == v[0]) || (v[6] == v[5] && v[7] == v[0])) == false)\n        {\n            float dist_05_07 = DistYCbCr(src[18], src[ 6]) + DistYCbCr(src[ 6], src[22]) + DistYCbCr(src[ 4], src[ 0]) + DistYCbCr(src[ 0], src[ 8]) + (4.0 * DistYCbCr(src[ 5], src[ 7]));\n            float dist_06_00 = DistYCbCr(src[19], src[ 5]) + DistYCbCr(src[ 5], src[ 3]) + DistYCbCr(src[21], src[ 7]) + DistYCbCr(src[ 7], src[ 1]) + (4.0 * DistYCbCr(src[ 6], src[ 0]));\n            bool dominantGradient = (DOMINANT_DIRECTION_THRESHOLD * dist_05_07) < dist_06_00;\n            blendResult[0] = ((dist_05_07 < dist_06_00) && (v[0] != v[5]) && (v[0] != v[7])) ? ((dominantGradient) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n        }\n        \n        vec3 dst[25];\n        dst[ 0] = src[0];\n        dst[ 1] = src[0];\n        dst[ 2] = src[0];\n        dst[ 3] = src[0];\n        dst[ 4] = src[0];\n        dst[ 5] = src[0];\n        dst[ 6] = src[0];\n        dst[ 7] = src[0];\n        dst[ 8] = src[0];\n        dst[ 9] = src[0];\n        dst[10] = src[0];\n        dst[11] = src[0];\n        dst[12] = src[0];\n        dst[13] = src[0];\n        dst[14] = src[0];\n        dst[15] = src[0];\n        dst[16] = src[0];\n        dst[17] = src[0];\n        dst[18] = src[0];\n        dst[19] = src[0];\n        dst[20] = src[0];\n        dst[21] = src[0];\n        dst[22] = src[0];\n        dst[23] = src[0];\n        dst[24] = src[0];\n        \n        if (IsBlendingNeeded(blendResult) == true)\n        {\n            float dist_01_04 = DistYCbCr(src[1], src[4]);\n            float dist_03_08 = DistYCbCr(src[3], src[8]);\n            bool haveShallowLine = (STEEP_DIRECTION_THRESHOLD * dist_01_04 <= dist_03_08) && (v[0] != v[4]) && (v[5] != v[4]);\n            bool haveSteepLine   = (STEEP_DIRECTION_THRESHOLD * dist_03_08 <= dist_01_04) && (v[0] != v[8]) && (v[7] != v[8]);\n            bool needBlend = (blendResult[2] != BLEND_NONE);\n            bool doLineBlend = (  blendResult[2] >= BLEND_DOMINANT ||\n                                ((blendResult[1] != BLEND_NONE && !IsPixEqual(src[0], src[4])) ||\n                                    (blendResult[3] != BLEND_NONE && !IsPixEqual(src[0], src[8])) ||\n                                    (IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && IsPixEqual(src[0], src[2]) == false) ) == false );\n            \n            vec3 blendPix = ( DistYCbCr(src[0], src[1]) <= DistYCbCr(src[0], src[3]) ) ? src[1] : src[3];\n            dst[ 1] = mix(dst[ 1], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[ 2] = mix(dst[ 2], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 2.0/3.0 : 0.750) : ((haveSteepLine) ? 0.750 : 0.125)) : 0.000);\n            dst[ 3] = mix(dst[ 3], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[ 9] = mix(dst[ 9], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n            dst[10] = mix(dst[10], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.250 : 0.125)) : 0.000);\n            dst[11] = mix(dst[11], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n            dst[12] = mix(dst[12], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.8631434088) : 0.000);\n            dst[13] = mix(dst[13], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n            dst[14] = mix(dst[14], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.250 : 0.125)) : 0.000);\n            dst[15] = mix(dst[15], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n            dst[16] = mix(dst[16], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[24] = mix(dst[24], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            \n            dist_01_04 = DistYCbCr(src[7], src[2]);\n            dist_03_08 = DistYCbCr(src[1], src[6]);\n            haveShallowLine = (STEEP_DIRECTION_THRESHOLD * dist_01_04 <= dist_03_08) && (v[0] != v[2]) && (v[3] != v[2]);\n            haveSteepLine   = (STEEP_DIRECTION_THRESHOLD * dist_03_08 <= dist_01_04) && (v[0] != v[6]) && (v[5] != v[6]);\n            needBlend = (blendResult[1] != BLEND_NONE);\n            doLineBlend = (  blendResult[1] >= BLEND_DOMINANT ||\n                            !((blendResult[0] != BLEND_NONE && !IsPixEqual(src[0], src[2])) ||\n                            (blendResult[2] != BLEND_NONE && !IsPixEqual(src[0], src[6])) ||\n                            (IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && !IsPixEqual(src[0], src[8])) ) );\n            \n            blendPix = ( DistYCbCr(src[0], src[7]) <= DistYCbCr(src[0], src[1]) ) ? src[7] : src[1];\n            dst[ 7] = mix(dst[ 7], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[ 8] = mix(dst[ 8], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 2.0/3.0 : 0.750) : ((haveSteepLine) ? 0.750 : 0.125)) : 0.000);\n            dst[ 1] = mix(dst[ 1], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[21] = mix(dst[21], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n            dst[22] = mix(dst[22], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.250 : 0.125)) : 0.000);\n            dst[23] = mix(dst[23], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n            dst[24] = mix(dst[24], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.8631434088) : 0.000);\n            dst[ 9] = mix(dst[ 9], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n            dst[10] = mix(dst[10], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.250 : 0.125)) : 0.000);\n            dst[11] = mix(dst[11], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n            dst[12] = mix(dst[12], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[20] = mix(dst[20], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n\n            dist_01_04 = DistYCbCr(src[5], src[8]);\n            dist_03_08 = DistYCbCr(src[7], src[4]);\n            haveShallowLine = (STEEP_DIRECTION_THRESHOLD * dist_01_04 <= dist_03_08) && (v[0] != v[8]) && (v[1] != v[8]);\n            haveSteepLine   = (STEEP_DIRECTION_THRESHOLD * dist_03_08 <= dist_01_04) && (v[0] != v[4]) && (v[3] != v[4]);\n            needBlend = (blendResult[0] != BLEND_NONE);\n            doLineBlend = (  blendResult[0] >= BLEND_DOMINANT ||\n                            !((blendResult[3] != BLEND_NONE && !IsPixEqual(src[0], src[8])) ||\n                            (blendResult[1] != BLEND_NONE && !IsPixEqual(src[0], src[4])) ||\n                            (IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && !IsPixEqual(src[0], src[6])) ) );\n            \n            blendPix = ( DistYCbCr(src[0], src[5]) <= DistYCbCr(src[0], src[7]) ) ? src[5] : src[7];\n            dst[ 5] = mix(dst[ 5], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[ 6] = mix(dst[ 6], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 2.0/3.0 : 0.750) : ((haveSteepLine) ? 0.750 : 0.125)) : 0.000);\n            dst[ 7] = mix(dst[ 7], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[17] = mix(dst[17], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n            dst[18] = mix(dst[18], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.250 : 0.125)) : 0.000);\n            dst[19] = mix(dst[19], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n            dst[20] = mix(dst[20], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.8631434088) : 0.000);\n            dst[21] = mix(dst[21], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n            dst[22] = mix(dst[22], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.250 : 0.125)) : 0.000);\n            dst[23] = mix(dst[23], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n            dst[24] = mix(dst[24], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[16] = mix(dst[16], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            \n            \n            dist_01_04 = DistYCbCr(src[3], src[6]);\n            dist_03_08 = DistYCbCr(src[5], src[2]);\n            haveShallowLine = (STEEP_DIRECTION_THRESHOLD * dist_01_04 <= dist_03_08) && (v[0] != v[6]) && (v[7] != v[6]);\n            haveSteepLine   = (STEEP_DIRECTION_THRESHOLD * dist_03_08 <= dist_01_04) && (v[0] != v[2]) && (v[1] != v[2]);\n            needBlend = (blendResult[3] != BLEND_NONE);\n            doLineBlend = (  blendResult[3] >= BLEND_DOMINANT ||\n                            !((blendResult[2] != BLEND_NONE && !IsPixEqual(src[0], src[6])) ||\n                            (blendResult[0] != BLEND_NONE && !IsPixEqual(src[0], src[2])) ||\n                            (IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && !IsPixEqual(src[0], src[4])) ) );\n            \n            blendPix = ( DistYCbCr(src[0], src[3]) <= DistYCbCr(src[0], src[5]) ) ? src[3] : src[5];\n            dst[ 3] = mix(dst[ 3], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[ 4] = mix(dst[ 4], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? ((haveSteepLine) ? 2.0/3.0 : 0.750) : ((haveSteepLine) ? 0.750 : 0.125)) : 0.000);\n            dst[ 5] = mix(dst[ 5], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[13] = mix(dst[13], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n            dst[14] = mix(dst[14], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.250 : 0.125)) : 0.000);\n            dst[15] = mix(dst[15], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n            dst[16] = mix(dst[16], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.8631434088) : 0.000);\n            dst[17] = mix(dst[17], blendPix, (needBlend) ? ((doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.875 : 1.000) : 0.2306749731) : 0.000);\n            dst[18] = mix(dst[18], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.250 : 0.125)) : 0.000);\n            dst[19] = mix(dst[19], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n            dst[20] = mix(dst[20], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[12] = mix(dst[12], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\t\t\t\n        }\n        \n        vec3 res = mix(           mix( dst[20], mix( mix(dst[21], dst[22], step(0.40, f.x)), mix(dst[23], dst[24], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x) ),\n                                mix( mix( mix( dst[19], mix( mix(dst[ 6], dst[ 7], step(0.40, f.x)), mix(dst[ 8], dst[ 9], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x) ),\n                                            mix( dst[18], mix( mix(dst[ 5], dst[ 0], step(0.40, f.x)), mix(dst[ 1], dst[10], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x) ), step(0.40, f.y)),\n                                        mix( mix( dst[17], mix( mix(dst[ 4], dst[ 3], step(0.40, f.x)), mix(dst[ 2], dst[11], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x) ),\n                                            mix( dst[16], mix( mix(dst[15], dst[14], step(0.40, f.x)), mix(dst[13], dst[12], step(0.80, f.x)), step(0.60, f.x)), step(0.20, f.x) ), step(0.80, f.y)),\n                                                                                                                                                                                    step(0.60, f.y)),\n                                                                                                                                                                                    step(0.20, f.y));\n                                    \n    FragColor = vec4(res, 1.0);\n} \n#endif\n","6xbrz.glsl":"\n#define BLEND_NONE 0\n#define BLEND_NORMAL 1\n#define BLEND_DOMINANT 2\n#define LUMINANCE_WEIGHT 1.0\n#define EQUAL_COLOR_TOLERANCE 30.0/255.0\n#define STEEP_DIRECTION_THRESHOLD 2.2\n#define DOMINANT_DIRECTION_THRESHOLD 3.6\n\n#if defined(VERTEX)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING out\n#define COMPAT_ATTRIBUTE in\n#define COMPAT_TEXTURE texture\n#else\n#define COMPAT_VARYING varying \n#define COMPAT_ATTRIBUTE attribute \n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nCOMPAT_ATTRIBUTE vec4 VertexCoord;\nCOMPAT_ATTRIBUTE vec4 COLOR;\nCOMPAT_ATTRIBUTE vec4 TexCoord;\nCOMPAT_VARYING vec4 COL0;\nCOMPAT_VARYING vec4 TEX0;\nCOMPAT_VARYING vec4 t1;\nCOMPAT_VARYING vec4 t2;\nCOMPAT_VARYING vec4 t3;\nCOMPAT_VARYING vec4 t4;\nCOMPAT_VARYING vec4 t5;\nCOMPAT_VARYING vec4 t6;\nCOMPAT_VARYING vec4 t7;\n\nuniform mat4 MVPMatrix;\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\n\n// vertex compatibility #defines\n#define vTexCoord TEX0.xy\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define outsize vec4(OutputSize, 1.0 / OutputSize)\n\nvoid main()\n{\n    gl_Position = MVPMatrix * VertexCoord;\n    COL0 = COLOR;\n    TEX0.xy = TexCoord.xy;\n    vec2 ps = vec2(SourceSize.z, SourceSize.w);\n    float dx = ps.x;\n    float dy = ps.y;\n\n        //  A1 B1 C1\n    // A0 A  B  C C4\n    // D0 D  E  F F4\n    // G0 G  H  I I4\n        //  G5 H5 I5\n\n    t1 = vTexCoord.xxxy + vec4( -dx, 0.0, dx,-2.0*dy); // A1 B1 C1\n    t2 = vTexCoord.xxxy + vec4( -dx, 0.0, dx, -dy);    //  A  B  C\n    t3 = vTexCoord.xxxy + vec4( -dx, 0.0, dx, 0.0);    //  D  E  F\n    t4 = vTexCoord.xxxy + vec4( -dx, 0.0, dx, dy);     //  G  H  I\n    t5 = vTexCoord.xxxy + vec4( -dx, 0.0, dx, 2.0*dy); // G5 H5 I5\n    t6 = vTexCoord.xyyy + vec4(-2.0*dx,-dy, 0.0, dy);  // A0 D0 G0\n    t7 = vTexCoord.xyyy + vec4( 2.0*dx,-dy, 0.0, dy);  // C4 F4 I4\n}\n\n#elif defined(FRAGMENT)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING in\n#define COMPAT_TEXTURE texture\nout vec4 FragColor;\n#else\n#define COMPAT_VARYING varying\n#define FragColor gl_FragColor\n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\nuniform sampler2D Texture;\nCOMPAT_VARYING vec4 TEX0;\nCOMPAT_VARYING vec4 t1;\nCOMPAT_VARYING vec4 t2;\nCOMPAT_VARYING vec4 t3;\nCOMPAT_VARYING vec4 t4;\nCOMPAT_VARYING vec4 t5;\nCOMPAT_VARYING vec4 t6;\nCOMPAT_VARYING vec4 t7;\n\n// fragment compatibility #defines\n#define Source Texture\n#define vTexCoord TEX0.xy\n\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define outsize vec4(OutputSize, 1.0 / OutputSize)\n\n    const float  one_sixth = 1.0 / 6.0;\n    const float  two_sixth = 2.0 / 6.0;\n    const float four_sixth = 4.0 / 6.0;\n    const float five_sixth = 5.0 / 6.0;\n\n    float reduce(const vec3 color)\n    {\n        return dot(color, vec3(65536.0, 256.0, 1.0));\n    }\n    \n    float DistYCbCr(const vec3 pixA, const vec3 pixB)\n    {\n        const vec3 w = vec3(0.2627, 0.6780, 0.0593);\n        const float scaleB = 0.5 / (1.0 - w.b);\n        const float scaleR = 0.5 / (1.0 - w.r);\n        vec3 diff = pixA - pixB;\n        float Y = dot(diff, w);\n        float Cb = scaleB * (diff.b - Y);\n        float Cr = scaleR * (diff.r - Y);\n        \n        return sqrt( ((LUMINANCE_WEIGHT * Y) * (LUMINANCE_WEIGHT * Y)) + (Cb * Cb) + (Cr * Cr) );\n    }\n    \n    bool IsPixEqual(const vec3 pixA, const vec3 pixB)\n    {\n        return (DistYCbCr(pixA, pixB) < EQUAL_COLOR_TOLERANCE);\n    }\n    \n    bool IsBlendingNeeded(const ivec4 blend)\n    {\n        return any(notEqual(blend, ivec4(BLEND_NONE)));\n    }\n\n\nvoid main()\n{\n    vec2 f = fract(vTexCoord.xy * SourceSize.xy);\n\n    vec3 src[25];\n    \n    src[21] = COMPAT_TEXTURE(Source, t1.xw).rgb;\n    src[22] = COMPAT_TEXTURE(Source, t1.yw).rgb;\n    src[23] = COMPAT_TEXTURE(Source, t1.zw).rgb;\n    src[ 6] = COMPAT_TEXTURE(Source, t2.xw).rgb;\n    src[ 7] = COMPAT_TEXTURE(Source, t2.yw).rgb;\n    src[ 8] = COMPAT_TEXTURE(Source, t2.zw).rgb;\n    src[ 5] = COMPAT_TEXTURE(Source, t3.xw).rgb;\n    src[ 0] = COMPAT_TEXTURE(Source, t3.yw).rgb;\n    src[ 1] = COMPAT_TEXTURE(Source, t3.zw).rgb;\n    src[ 4] = COMPAT_TEXTURE(Source, t4.xw).rgb;\n    src[ 3] = COMPAT_TEXTURE(Source, t4.yw).rgb;\n    src[ 2] = COMPAT_TEXTURE(Source, t4.zw).rgb;\n    src[15] = COMPAT_TEXTURE(Source, t5.xw).rgb;\n    src[14] = COMPAT_TEXTURE(Source, t5.yw).rgb;\n    src[13] = COMPAT_TEXTURE(Source, t5.zw).rgb;\n    src[19] = COMPAT_TEXTURE(Source, t6.xy).rgb;\n    src[18] = COMPAT_TEXTURE(Source, t6.xz).rgb;\n    src[17] = COMPAT_TEXTURE(Source, t6.xw).rgb;\n    src[ 9] = COMPAT_TEXTURE(Source, t7.xy).rgb;\n    src[10] = COMPAT_TEXTURE(Source, t7.xz).rgb;\n    src[11] = COMPAT_TEXTURE(Source, t7.xw).rgb;\n    \n        float v[9];\n        v[0] = reduce(src[0]);\n        v[1] = reduce(src[1]);\n        v[2] = reduce(src[2]);\n        v[3] = reduce(src[3]);\n        v[4] = reduce(src[4]);\n        v[5] = reduce(src[5]);\n        v[6] = reduce(src[6]);\n        v[7] = reduce(src[7]);\n        v[8] = reduce(src[8]);\n        \n        ivec4 blendResult = ivec4(BLEND_NONE);\n\n        if ( ((v[0] == v[1] && v[3] == v[2]) || (v[0] == v[3] && v[1] == v[2])) == false)\n        {\n            float dist_03_01 = DistYCbCr(src[ 4], src[ 0]) + DistYCbCr(src[ 0], src[ 8]) + DistYCbCr(src[14], src[ 2]) + DistYCbCr(src[ 2], src[10]) + (4.0 * DistYCbCr(src[ 3], src[ 1]));\n            float dist_00_02 = DistYCbCr(src[ 5], src[ 3]) + DistYCbCr(src[ 3], src[13]) + DistYCbCr(src[ 7], src[ 1]) + DistYCbCr(src[ 1], src[11]) + (4.0 * DistYCbCr(src[ 0], src[ 2]));\n            bool dominantGradient = (DOMINANT_DIRECTION_THRESHOLD * dist_03_01) < dist_00_02;\n            blendResult[2] = ((dist_03_01 < dist_00_02) && (v[0] != v[1]) && (v[0] != v[3])) ? ((dominantGradient) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n        }\n\n\n        if ( ((v[5] == v[0] && v[4] == v[3]) || (v[5] == v[4] && v[0] == v[3])) == false)\n        {\n            float dist_04_00 = DistYCbCr(src[17], src[ 5]) + DistYCbCr(src[ 5], src[ 7]) + DistYCbCr(src[15], src[ 3]) + DistYCbCr(src[ 3], src[ 1]) + (4.0 * DistYCbCr(src[ 4], src[ 0]));\n            float dist_05_03 = DistYCbCr(src[18], src[ 4]) + DistYCbCr(src[ 4], src[14]) + DistYCbCr(src[ 6], src[ 0]) + DistYCbCr(src[ 0], src[ 2]) + (4.0 * DistYCbCr(src[ 5], src[ 3]));\n            bool dominantGradient = (DOMINANT_DIRECTION_THRESHOLD * dist_05_03) < dist_04_00;\n            blendResult[3] = ((dist_04_00 > dist_05_03) && (v[0] != v[5]) && (v[0] != v[3])) ? ((dominantGradient) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n        }\n        \n\n        if ( ((v[7] == v[8] && v[0] == v[1]) || (v[7] == v[0] && v[8] == v[1])) == false)\n        {\n            float dist_00_08 = DistYCbCr(src[ 5], src[ 7]) + DistYCbCr(src[ 7], src[23]) + DistYCbCr(src[ 3], src[ 1]) + DistYCbCr(src[ 1], src[ 9]) + (4.0 * DistYCbCr(src[ 0], src[ 8]));\n            float dist_07_01 = DistYCbCr(src[ 6], src[ 0]) + DistYCbCr(src[ 0], src[ 2]) + DistYCbCr(src[22], src[ 8]) + DistYCbCr(src[ 8], src[10]) + (4.0 * DistYCbCr(src[ 7], src[ 1]));\n            bool dominantGradient = (DOMINANT_DIRECTION_THRESHOLD * dist_07_01) < dist_00_08;\n            blendResult[1] = ((dist_00_08 > dist_07_01) && (v[0] != v[7]) && (v[0] != v[1])) ? ((dominantGradient) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n        }\n        \n\n        if ( ((v[6] == v[7] && v[5] == v[0]) || (v[6] == v[5] && v[7] == v[0])) == false)\n        {\n            float dist_05_07 = DistYCbCr(src[18], src[ 6]) + DistYCbCr(src[ 6], src[22]) + DistYCbCr(src[ 4], src[ 0]) + DistYCbCr(src[ 0], src[ 8]) + (4.0 * DistYCbCr(src[ 5], src[ 7]));\n            float dist_06_00 = DistYCbCr(src[19], src[ 5]) + DistYCbCr(src[ 5], src[ 3]) + DistYCbCr(src[21], src[ 7]) + DistYCbCr(src[ 7], src[ 1]) + (4.0 * DistYCbCr(src[ 6], src[ 0]));\n            bool dominantGradient = (DOMINANT_DIRECTION_THRESHOLD * dist_05_07) < dist_06_00;\n            blendResult[0] = ((dist_05_07 < dist_06_00) && (v[0] != v[5]) && (v[0] != v[7])) ? ((dominantGradient) ? BLEND_DOMINANT : BLEND_NORMAL) : BLEND_NONE;\n        }\n        \n        vec3 dst[36];\n        dst[ 0] = src[0];\n        dst[ 1] = src[0];\n        dst[ 2] = src[0];\n        dst[ 3] = src[0];\n        dst[ 4] = src[0];\n        dst[ 5] = src[0];\n        dst[ 6] = src[0];\n        dst[ 7] = src[0];\n        dst[ 8] = src[0];\n        dst[ 9] = src[0];\n        dst[10] = src[0];\n        dst[11] = src[0];\n        dst[12] = src[0];\n        dst[13] = src[0];\n        dst[14] = src[0];\n        dst[15] = src[0];\n        dst[16] = src[0];\n        dst[17] = src[0];\n        dst[18] = src[0];\n        dst[19] = src[0];\n        dst[20] = src[0];\n        dst[21] = src[0];\n        dst[22] = src[0];\n        dst[23] = src[0];\n        dst[24] = src[0];\n        dst[25] = src[0];\n        dst[26] = src[0];\n        dst[27] = src[0];\n        dst[28] = src[0];\n        dst[29] = src[0];\n        dst[30] = src[0];\n        dst[31] = src[0];\n        dst[32] = src[0];\n        dst[33] = src[0];\n        dst[34] = src[0];\n        dst[35] = src[0];\n        \n        // Scale pixel\n        if (IsBlendingNeeded(blendResult) == true)\n        {\n            float dist_01_04 = DistYCbCr(src[1], src[4]);\n            float dist_03_08 = DistYCbCr(src[3], src[8]);\n            bool haveShallowLine = (STEEP_DIRECTION_THRESHOLD * dist_01_04 <= dist_03_08) && (v[0] != v[4]) && (v[5] != v[4]);\n            bool haveSteepLine   = (STEEP_DIRECTION_THRESHOLD * dist_03_08 <= dist_01_04) && (v[0] != v[8]) && (v[7] != v[8]);\n            bool needBlend = (blendResult[2] != BLEND_NONE);\n            bool doLineBlend = (  blendResult[2] >= BLEND_DOMINANT ||\n                                ((blendResult[1] != BLEND_NONE && !IsPixEqual(src[0], src[4])) ||\n                                    (blendResult[3] != BLEND_NONE && !IsPixEqual(src[0], src[8])) ||\n                                    (IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && IsPixEqual(src[0], src[2]) == false) ) == false );\n            \n            vec3 blendPix = ( DistYCbCr(src[0], src[1]) <= DistYCbCr(src[0], src[3]) ) ? src[1] : src[3];\n            dst[10] = mix(dst[10], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[11] = mix(dst[11], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 0.750 : ((haveShallowLine) ? 0.250 : 0.000)) : 0.000);\n            dst[12] = mix(dst[12], blendPix, (needBlend && doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.500 : 1.000) : 0.000);\n            dst[13] = mix(dst[13], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 0.750 : ((haveSteepLine) ? 0.250 : 0.000)) : 0.000);\n            dst[14] = mix(dst[14], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[25] = mix(dst[25], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[26] = mix(dst[26], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n            dst[27] = mix(dst[27], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 1.000 : 0.000);\n            dst[28] = mix(dst[28], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n            dst[29] = mix(dst[29], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n            dst[30] = mix(dst[30], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.9711013910) : 0.000);\n            dst[31] = mix(dst[31], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n            dst[32] = mix(dst[32], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n            dst[33] = mix(dst[33], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 1.000 : 0.000);\n            dst[34] = mix(dst[34], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n            dst[35] = mix(dst[35], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            \n            dist_01_04 = DistYCbCr(src[7], src[2]);\n            dist_03_08 = DistYCbCr(src[1], src[6]);\n            haveShallowLine = (STEEP_DIRECTION_THRESHOLD * dist_01_04 <= dist_03_08) && (v[0] != v[2]) && (v[3] != v[2]);\n            haveSteepLine   = (STEEP_DIRECTION_THRESHOLD * dist_03_08 <= dist_01_04) && (v[0] != v[6]) && (v[5] != v[6]);\n            needBlend = (blendResult[1] != BLEND_NONE);\n            doLineBlend = (  blendResult[1] >= BLEND_DOMINANT ||\n                            !((blendResult[0] != BLEND_NONE && !IsPixEqual(src[0], src[2])) ||\n                            (blendResult[2] != BLEND_NONE && !IsPixEqual(src[0], src[6])) ||\n                            (IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && !IsPixEqual(src[0], src[8])) ) );\n        \n            dist_01_04 = DistYCbCr(src[7], src[2]);\n            dist_03_08 = DistYCbCr(src[1], src[6]);\n            haveShallowLine = (STEEP_DIRECTION_THRESHOLD * dist_01_04 <= dist_03_08) && (v[0] != v[2]) && (v[3] != v[2]);\n            haveSteepLine   = (STEEP_DIRECTION_THRESHOLD * dist_03_08 <= dist_01_04) && (v[0] != v[6]) && (v[5] != v[6]);\n            needBlend = (blendResult[1] != BLEND_NONE);\n            doLineBlend = (  blendResult[1] >= BLEND_DOMINANT ||\n                            !((blendResult[0] != BLEND_NONE && !IsPixEqual(src[0], src[2])) ||\n                            (blendResult[2] != BLEND_NONE && !IsPixEqual(src[0], src[6])) ||\n                            (IsPixEqual(src[2], src[1]) && IsPixEqual(src[1], src[8]) && IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && !IsPixEqual(src[0], src[8])) ) );\n            \n            blendPix = ( DistYCbCr(src[0], src[7]) <= DistYCbCr(src[0], src[1]) ) ? src[7] : src[1];\n            dst[ 7] = mix(dst[ 7], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[ 8] = mix(dst[ 8], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 0.750 : ((haveShallowLine) ? 0.250 : 0.000)) : 0.000);\n            dst[ 9] = mix(dst[ 9], blendPix, (needBlend && doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.500 : 1.000) : 0.000);\n            dst[10] = mix(dst[10], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 0.750 : ((haveSteepLine) ? 0.250 : 0.000)) : 0.000);\n            dst[11] = mix(dst[11], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[20] = mix(dst[20], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[21] = mix(dst[21], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n            dst[22] = mix(dst[22], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 1.000 : 0.000);\n            dst[23] = mix(dst[23], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n            dst[24] = mix(dst[24], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n            dst[25] = mix(dst[25], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.9711013910) : 0.000);\n            dst[26] = mix(dst[26], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n            dst[27] = mix(dst[27], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n            dst[28] = mix(dst[28], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 1.000 : 0.000);\n            dst[29] = mix(dst[29], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n            dst[30] = mix(dst[30], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n\n            dist_01_04 = DistYCbCr(src[5], src[8]);\n            dist_03_08 = DistYCbCr(src[7], src[4]);\n            haveShallowLine = (STEEP_DIRECTION_THRESHOLD * dist_01_04 <= dist_03_08) && (v[0] != v[8]) && (v[1] != v[8]);\n            haveSteepLine   = (STEEP_DIRECTION_THRESHOLD * dist_03_08 <= dist_01_04) && (v[0] != v[4]) && (v[3] != v[4]);\n            needBlend = (blendResult[0] != BLEND_NONE);\n            doLineBlend = (  blendResult[0] >= BLEND_DOMINANT ||\n                            !((blendResult[3] != BLEND_NONE && !IsPixEqual(src[0], src[8])) ||\n                            (blendResult[1] != BLEND_NONE && !IsPixEqual(src[0], src[4])) ||\n                            (IsPixEqual(src[8], src[7]) && IsPixEqual(src[7], src[6]) && IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && !IsPixEqual(src[0], src[6])) ) );\n            \n            blendPix = ( DistYCbCr(src[0], src[5]) <= DistYCbCr(src[0], src[7]) ) ? src[5] : src[7];\n            dst[ 4] = mix(dst[ 4], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[ 5] = mix(dst[ 5], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 0.750 : ((haveShallowLine) ? 0.250 : 0.000)) : 0.000);\n            dst[ 6] = mix(dst[ 6], blendPix, (needBlend && doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.500 : 1.000) : 0.000);\n            dst[ 7] = mix(dst[ 7], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 0.750 : ((haveSteepLine) ? 0.250 : 0.000)) : 0.000);\n            dst[ 8] = mix(dst[ 8], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[35] = mix(dst[35], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[16] = mix(dst[16], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n            dst[17] = mix(dst[17], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 1.000 : 0.000);\n            dst[18] = mix(dst[18], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n            dst[19] = mix(dst[19], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n            dst[20] = mix(dst[20], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.9711013910) : 0.000);\n            dst[21] = mix(dst[21], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n            dst[22] = mix(dst[22], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n            dst[23] = mix(dst[23], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 1.000 : 0.000);\n            dst[24] = mix(dst[24], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n            dst[25] = mix(dst[25], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            \n            \n            dist_01_04 = DistYCbCr(src[3], src[6]);\n            dist_03_08 = DistYCbCr(src[5], src[2]);\n            haveShallowLine = (STEEP_DIRECTION_THRESHOLD * dist_01_04 <= dist_03_08) && (v[0] != v[6]) && (v[7] != v[6]);\n            haveSteepLine   = (STEEP_DIRECTION_THRESHOLD * dist_03_08 <= dist_01_04) && (v[0] != v[2]) && (v[1] != v[2]);\n            needBlend = (blendResult[3] != BLEND_NONE);\n            doLineBlend = (  blendResult[3] >= BLEND_DOMINANT ||\n                            !((blendResult[2] != BLEND_NONE && !IsPixEqual(src[0], src[6])) ||\n                            (blendResult[0] != BLEND_NONE && !IsPixEqual(src[0], src[2])) ||\n                            (IsPixEqual(src[6], src[5]) && IsPixEqual(src[5], src[4]) && IsPixEqual(src[4], src[3]) && IsPixEqual(src[3], src[2]) && !IsPixEqual(src[0], src[4])) ) );\n            \n            blendPix = ( DistYCbCr(src[0], src[3]) <= DistYCbCr(src[0], src[5]) ) ? src[3] : src[5];\n            dst[13] = mix(dst[13], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[14] = mix(dst[14], blendPix, (needBlend && doLineBlend) ? ((haveSteepLine) ? 0.750 : ((haveShallowLine) ? 0.250 : 0.000)) : 0.000);\n            dst[15] = mix(dst[15], blendPix, (needBlend && doLineBlend) ? ((!haveShallowLine && !haveSteepLine) ? 0.500 : 1.000) : 0.000);\n            dst[ 4] = mix(dst[ 4], blendPix, (needBlend && doLineBlend) ? ((haveShallowLine) ? 0.750 : ((haveSteepLine) ? 0.250 : 0.000)) : 0.000);\n            dst[ 5] = mix(dst[ 5], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            dst[30] = mix(dst[30], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.250 : 0.000);\n            dst[31] = mix(dst[31], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 0.750 : 0.000);\n            dst[32] = mix(dst[32], blendPix, (needBlend && doLineBlend && haveSteepLine) ? 1.000 : 0.000);\n            dst[33] = mix(dst[33], blendPix, (needBlend) ? ((doLineBlend) ? ((haveSteepLine) ? 1.000 : ((haveShallowLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n            dst[34] = mix(dst[34], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n            dst[35] = mix(dst[35], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.9711013910) : 0.000);\n            dst[16] = mix(dst[16], blendPix, (needBlend) ? ((doLineBlend) ? 1.000 : 0.4236372243) : 0.000);\n            dst[17] = mix(dst[17], blendPix, (needBlend) ? ((doLineBlend) ? ((haveShallowLine) ? 1.000 : ((haveSteepLine) ? 0.750 : 0.500)) : 0.05652034508) : 0.000);\n            dst[18] = mix(dst[18], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 1.000 : 0.000);\n            dst[19] = mix(dst[19], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.750 : 0.000);\n            dst[20] = mix(dst[20], blendPix, (needBlend && doLineBlend && haveShallowLine) ? 0.250 : 0.000);\n            \n        }\n        \n            vec3 res = mix( mix( mix( mix( mix( mix(dst[20], dst[21], step(one_sixth, f.x) ), dst[22], step(two_sixth, f.x) ), mix( mix(dst[23], dst[24], step(four_sixth, f.x) ), dst[25], step(five_sixth, f.x) ), step(0.50, f.x) ),\n                                            mix( mix( mix(dst[19], dst[ 6], step(one_sixth, f.x) ), dst[ 7], step(two_sixth, f.x) ), mix( mix(dst[ 8], dst[ 9], step(four_sixth, f.x) ), dst[26], step(five_sixth, f.x) ), step(0.50, f.x) ), step(one_sixth, f.y) ),\n                                            mix( mix( mix(dst[18], dst[ 5], step(one_sixth, f.x) ), dst[ 0], step(two_sixth, f.x) ), mix( mix(dst[ 1], dst[10], step(four_sixth, f.x) ), dst[27], step(five_sixth, f.x) ), step(0.50, f.x) ), step(two_sixth, f.y) ),\n                                mix( mix( mix( mix( mix(dst[17], dst[ 4], step(one_sixth, f.x) ), dst[ 3], step(two_sixth, f.x) ), mix( mix(dst[ 2], dst[11], step(four_sixth, f.x) ), dst[28], step(five_sixth, f.x) ), step(0.50, f.x) ),\n                                            mix( mix( mix(dst[16], dst[15], step(one_sixth, f.x) ), dst[14], step(two_sixth, f.x) ), mix( mix(dst[13], dst[12], step(four_sixth, f.x) ), dst[29], step(five_sixth, f.x) ), step(0.50, f.x) ), step(four_sixth, f.y) ),\n                                            mix( mix( mix(dst[35], dst[34], step(one_sixth, f.x) ), dst[33], step(two_sixth, f.x) ), mix( mix(dst[32], dst[31], step(four_sixth, f.x) ), dst[30], step(five_sixth, f.x) ), step(0.50, f.x) ), step(five_sixth, f.y) ),\n                                step(0.50, f.y) );\n                                    \n    FragColor = vec4(res, 1.0);\n} \n#endif\n","crt-easymode.glsl":"#if defined(VERTEX)\n\n    #if __VERSION__ >= 130\n    #define COMPAT_VARYING out\n    #define COMPAT_ATTRIBUTE in\n    #define COMPAT_TEXTURE texture\n    #else\n    #define COMPAT_VARYING varying\n    #define COMPAT_ATTRIBUTE attribute\n    #define COMPAT_TEXTURE texture2D\n    #endif\n    \n    #ifdef GL_ES\n    #define COMPAT_PRECISION mediump\n    #else\n    #define COMPAT_PRECISION\n    #endif\n    COMPAT_VARYING     float _frame_rotation;\n    struct input_dummy {\n    vec2 _video_size;\n    vec2 _texture_size;\n    vec2 _output_dummy_size;\n    float _frame_count;\n    float _frame_direction;\n    float _frame_rotation;\n    };\n    vec4 _oPosition1;\n    vec4 _r0005;\n    COMPAT_ATTRIBUTE vec4 VertexCoord;\n    COMPAT_ATTRIBUTE vec4 TexCoord;\n    COMPAT_VARYING vec4 TEX0;\n    \n    uniform mat4 MVPMatrix;\n    uniform int FrameDirection;\n    uniform int FrameCount;\n    uniform COMPAT_PRECISION vec2 OutputSize;\n    uniform COMPAT_PRECISION vec2 TextureSize;\n    uniform COMPAT_PRECISION vec2 InputSize;\n    void main()\n    {\n    vec2 _oTex;\n    _r0005 = VertexCoord.x*MVPMatrix[0];\n    _r0005 = _r0005 + VertexCoord.y*MVPMatrix[1];\n    _r0005 = _r0005 + VertexCoord.z*MVPMatrix[2];\n    _r0005 = _r0005 + VertexCoord.w*MVPMatrix[3];\n    _oPosition1 = _r0005;\n    _oTex = TexCoord.xy;\n    gl_Position = _r0005;\n    TEX0.xy = TexCoord.xy;\n    }\n    #elif defined(FRAGMENT)\n    \n    #if __VERSION__ >= 130\n    #define COMPAT_VARYING in\n    #define COMPAT_TEXTURE texture\n    out vec4 FragColor;\n    #else\n    #define COMPAT_VARYING varying\n    #define FragColor gl_FragColor\n    #define COMPAT_TEXTURE texture2D\n    #endif\n    \n    #ifdef GL_ES\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n    #define COMPAT_PRECISION mediump\n    #else\n    #define COMPAT_PRECISION\n    #endif\n    COMPAT_VARYING     float _frame_rotation;\n    struct input_dummy {\n    vec2 _video_size;\n    vec2 _texture_size;\n    vec2 _output_dummy_size;\n    float _frame_count;\n    float _frame_direction;\n    float _frame_rotation;\n    };\n    vec4 _ret_0;\n    float _TMP30;\n    float _TMP29;\n    float _TMP28;\n    float _TMP13;\n    float _TMP32;\n    float _TMP11;\n    float _TMP10;\n    float _TMP31;\n    float _TMP9;\n    float _TMP8;\n    float _TMP15;\n    float _TMP14;\n    float _TMP33;\n    vec4 _TMP34;\n    vec4 _TMP27;\n    vec4 _TMP25;\n    vec4 _TMP23;\n    vec4 _TMP21;\n    vec4 _TMP26;\n    vec4 _TMP24;\n    vec4 _TMP22;\n    vec4 _TMP20;\n    float _TMP4;\n    vec4 _TMP3;\n    vec4 _TMP2;\n    float _TMP19;\n    float _TMP18;\n    float _TMP17;\n    float _TMP16;\n    vec4 _TMP1;\n    vec2 _TMP0;\n    uniform sampler2D Texture;\n    input_dummy _IN1;\n    float _TMP43;\n    float _x_step0044;\n    float _curve0044;\n    float _a0048;\n    float _val0052;\n    float _a0052;\n    vec4 _TMP57;\n    vec4 _x0072;\n    vec2 _c0086;\n    vec4 _x0088;\n    vec4 _x0094;\n    vec2 _c0098;\n    vec4 _x0100;\n    vec2 _c0104;\n    vec4 _x0106;\n    vec4 _sample_min0110;\n    vec4 _sample_max0110;\n    vec4 _r0112;\n    vec4 _TMP117;\n    vec2 _co0124;\n    vec2 _c0126;\n    vec4 _x0128;\n    vec4 _x0134;\n    vec2 _c0138;\n    vec4 _x0140;\n    vec2 _c0144;\n    vec4 _x0146;\n    vec4 _sample_min0150;\n    vec4 _sample_max0150;\n    vec4 _r0152;\n    vec4 _TMP157;\n    float _TMP163;\n    float _x_step0164;\n    float _curve0164;\n    float _a0168;\n    float _val0172;\n    float _a0172;\n    float _TMP183;\n    float _TMP189;\n    float _x0190;\n    float _a0196;\n    float _x0198;\n    vec2 _x0200;\n    float _x0208;\n    COMPAT_VARYING vec4 TEX0;\n    \n    uniform COMPAT_PRECISION vec2 OutputSize;\n    uniform COMPAT_PRECISION vec2 TextureSize;\n    uniform COMPAT_PRECISION vec2 InputSize;\n    void main()\n    {\n    vec2 _dx1;\n    vec2 _dy;\n    vec2 _pix_co;\n    vec2 _tex_co;\n    vec2 _dist;\n    vec3 _col2;\n    vec3 _col21;\n    vec4 _coeffs1;\n    float _luma;\n    float _bright;\n    float _scan_weight;\n    vec2 _mod_fac;\n    int _dot_no;\n    vec3 _mask_weight;\n    vec3 _TMP37;\n    _dx1 = vec2(1.00000000E+00/TextureSize.x, 0.00000000E+00);\n    _dy = vec2(0.00000000E+00, 1.00000000E+00/TextureSize.y);\n    _pix_co = TEX0.xy*TextureSize - vec2( 5.00000000E-01, 5.00000000E-01);\n    _TMP0 = floor(_pix_co);\n    _tex_co = (_TMP0 + vec2( 5.00000000E-01, 5.00000000E-01))/TextureSize;\n    _dist = fract(_pix_co);\n    _x_step0044 = float((_dist.x >= 5.00000000E-01));\n    _a0048 = 2.50000000E-01 - (_dist.x - _x_step0044)*(_dist.x - _x_step0044);\n    _TMP33 = inversesqrt(_a0048);\n    _TMP14 = 1.00000000E+00/_TMP33;\n    _a0052 = 5.00000000E-01 - _dist.x;\n    _val0052 = float((_a0052 > 0.00000000E+00));\n    _TMP15 = _val0052 - float((_a0052 < 0.00000000E+00));\n    _curve0044 = 5.00000000E-01 - _TMP14*_TMP15;\n    _TMP43 = _dist.x + 2.50000000E-01*(_curve0044 - _dist.x);\n    _coeffs1 = 3.14159274E+00*vec4(1.00000000E+00 + _TMP43, _TMP43, 1.00000000E+00 - _TMP43, 2.00000000E+00 - _TMP43);\n    _TMP1 = abs(_coeffs1);\n    _TMP57 = max(_TMP1, vec4( 9.99999975E-06, 9.99999975E-06, 9.99999975E-06, 9.99999975E-06));\n    _TMP16 = sin(_TMP57.x);\n    _TMP17 = sin(_TMP57.y);\n    _TMP18 = sin(_TMP57.z);\n    _TMP19 = sin(_TMP57.w);\n    _TMP2 = vec4(_TMP16, _TMP17, _TMP18, _TMP19);\n    _x0072 = _TMP57/2.00000000E+00;\n    _TMP16 = sin(_x0072.x);\n    _TMP17 = sin(_x0072.y);\n    _TMP18 = sin(_x0072.z);\n    _TMP19 = sin(_x0072.w);\n    _TMP3 = vec4(_TMP16, _TMP17, _TMP18, _TMP19);\n    _coeffs1 = ((2.00000000E+00*_TMP2)*_TMP3)/(_TMP57*_TMP57);\n    _TMP4 = dot(_coeffs1, vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00));\n    _coeffs1 = _coeffs1/_TMP4;\n    _c0086 = _tex_co - _dx1;\n    _TMP20 = COMPAT_TEXTURE(Texture, _c0086);\n    _x0088 = vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00) + (_TMP20 - vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00));\n    _TMP21 = _TMP20*_x0088;\n    _TMP22 = COMPAT_TEXTURE(Texture, _tex_co);\n    _x0094 = vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00) + (_TMP22 - vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00));\n    _TMP23 = _TMP22*_x0094;\n    _c0098 = _tex_co + _dx1;\n    _TMP24 = COMPAT_TEXTURE(Texture, _c0098);\n    _x0100 = vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00) + (_TMP24 - vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00));\n    _TMP25 = _TMP24*_x0100;\n    _c0104 = _tex_co + 2.00000000E+00*_dx1;\n    _TMP26 = COMPAT_TEXTURE(Texture, _c0104);\n    _x0106 = vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00) + (_TMP26 - vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00));\n    _TMP27 = _TMP26*_x0106;\n    _r0112 = _coeffs1.x*_TMP21;\n    _r0112 = _r0112 + _coeffs1.y*_TMP23;\n    _r0112 = _r0112 + _coeffs1.z*_TMP25;\n    _r0112 = _r0112 + _coeffs1.w*_TMP27;\n    _sample_min0110 = min(_TMP23, _TMP25);\n    _sample_max0110 = max(_TMP23, _TMP25);\n    _TMP34 = min(_sample_max0110, _r0112);\n    _TMP117 = max(_sample_min0110, _TMP34);\n    _co0124 = _tex_co + _dy;\n    _c0126 = _co0124 - _dx1;\n    _TMP20 = COMPAT_TEXTURE(Texture, _c0126);\n    _x0128 = vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00) + (_TMP20 - vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00));\n    _TMP21 = _TMP20*_x0128;\n    _TMP22 = COMPAT_TEXTURE(Texture, _co0124);\n    _x0134 = vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00) + (_TMP22 - vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00));\n    _TMP23 = _TMP22*_x0134;\n    _c0138 = _co0124 + _dx1;\n    _TMP24 = COMPAT_TEXTURE(Texture, _c0138);\n    _x0140 = vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00) + (_TMP24 - vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00));\n    _TMP25 = _TMP24*_x0140;\n    _c0144 = _co0124 + 2.00000000E+00*_dx1;\n    _TMP26 = COMPAT_TEXTURE(Texture, _c0144);\n    _x0146 = vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00) + (_TMP26 - vec4( 1.00000000E+00, 1.00000000E+00, 1.00000000E+00, 1.00000000E+00));\n    _TMP27 = _TMP26*_x0146;\n    _r0152 = _coeffs1.x*_TMP21;\n    _r0152 = _r0152 + _coeffs1.y*_TMP23;\n    _r0152 = _r0152 + _coeffs1.z*_TMP25;\n    _r0152 = _r0152 + _coeffs1.w*_TMP27;\n    _sample_min0150 = min(_TMP23, _TMP25);\n    _sample_max0150 = max(_TMP23, _TMP25);\n    _TMP34 = min(_sample_max0150, _r0152);\n    _TMP157 = max(_sample_min0150, _TMP34);\n    _x_step0164 = float((_dist.y >= 5.00000000E-01));\n    _a0168 = 2.50000000E-01 - (_dist.y - _x_step0164)*(_dist.y - _x_step0164);\n    _TMP33 = inversesqrt(_a0168);\n    _TMP14 = 1.00000000E+00/_TMP33;\n    _a0172 = 5.00000000E-01 - _dist.y;\n    _val0172 = float((_a0172 > 0.00000000E+00));\n    _TMP15 = _val0172 - float((_a0172 < 0.00000000E+00));\n    _curve0164 = 5.00000000E-01 - _TMP14*_TMP15;\n    _TMP163 = _dist.y + (_curve0164 - _dist.y);\n    _col2 = _TMP117.xyz + _TMP163*(_TMP157.xyz - _TMP117.xyz);\n    _luma = dot(vec3( 2.12599993E-01, 7.15200007E-01, 7.22000003E-02), _col2);\n    _TMP8 = max(_col2.y, _col2.z);\n    _TMP9 = max(_col2.x, _TMP8);\n    _bright = (_TMP9 + _luma)/2.00000000E+00;\n    _TMP31 = min(6.49999976E-01, _bright);\n    _TMP183 = max(3.49999994E-01, _TMP31);\n    _x0190 = _bright*1.50000000E+00;\n    _TMP31 = min(1.50000000E+00, _x0190);\n    _TMP189 = max(1.50000000E+00, _TMP31);\n    _a0196 = TEX0.y*2.00000000E+00*3.14159274E+00*TextureSize.y;\n    _TMP10 = cos(_a0196);\n    _x0198 = _TMP10*5.00000000E-01 + 5.00000000E-01;\n    _TMP11 = pow(_x0198, _TMP189);\n    _scan_weight = 1.00000000E+00 - _TMP11;\n    _x0200 = (TEX0.xy*OutputSize*TextureSize)/InputSize;\n    _mod_fac = floor(_x0200);\n    _x0208 = _mod_fac.x/3.00000000E+00;\n    _TMP32 = floor(_x0208);\n    _TMP13 = _mod_fac.x - 3.00000000E+00*_TMP32;\n    _dot_no = int(_TMP13);\n    if (_dot_no == 0) {\n    _mask_weight = vec3( 1.00000000E+00, 6.99999988E-01, 6.99999988E-01);\n    } else {\n    if (_dot_no == 1) {\n    _mask_weight = vec3( 6.99999988E-01, 1.00000000E+00, 6.99999988E-01);\n    } else {\n    _mask_weight = vec3( 6.99999988E-01, 6.99999988E-01, 1.00000000E+00);\n    }\n    }\n    if (InputSize.y >= 4.00000000E+02) {\n    _scan_weight = 1.00000000E+00;\n    }\n    _col21 = _col2.xyz;\n    _col2 = _col2*vec3(_scan_weight, _scan_weight, _scan_weight);\n    _col2 = _col2 + _TMP183*(_col21 - _col2);\n    _col2 = _col2*_mask_weight;\n    _TMP28 = pow(_col2.x, 5.55555582E-01);\n    _TMP29 = pow(_col2.y, 5.55555582E-01);\n    _TMP30 = pow(_col2.z, 5.55555582E-01);\n    _col2 = vec3(_TMP28, _TMP29, _TMP30);\n    _TMP37 = _col2*1.20000005E+00;\n    _ret_0 = vec4(_TMP37.x, _TMP37.y, _TMP37.z, 1.00000000E+00);\n    FragColor = _ret_0;\n    return;\n    }\n    #endif\n","crt-aperture.glsl":'\n/*\nCRT Shader by EasyMode\nLicense: GPL\n*/\n/*\n#pragma parameter SHARPNESS_IMAGE "Sharpness Image" 1.0 1.0 5.0 1.0\n#pragma parameter SHARPNESS_EDGES "Sharpness Edges" 3.0 1.0 5.0 1.0\n#pragma parameter GLOW_WIDTH "Glow Width" 0.5 0.05 0.65 0.05\n#pragma parameter GLOW_HEIGHT "Glow Height" 0.5 0.05 0.65 0.05\n#pragma parameter GLOW_HALATION "Glow Halation" 0.1 0.0 1.0 0.01\n#pragma parameter GLOW_DIFFUSION "Glow Diffusion" 0.05 0.0 1.0 0.01\n#pragma parameter MASK_COLORS "Mask Colors" 2.0 2.0 3.0 1.0\n#pragma parameter MASK_STRENGTH "Mask Strength" 0.3 0.0 1.0 0.05\n#pragma parameter MASK_SIZE "Mask Size" 1.0 1.0 9.0 1.0\n#pragma parameter SCANLINE_SIZE_MIN "Scanline Size Min." 0.5 0.5 1.5 0.05\n#pragma parameter SCANLINE_SIZE_MAX "Scanline Size Max." 1.5 0.5 1.5 0.05\n#pragma parameter GAMMA_INPUT "Gamma Input" 2.4 1.0 5.0 0.1\n#pragma parameter GAMMA_OUTPUT "Gamma Output" 2.4 1.0 5.0 0.1\n#pragma parameter BRIGHTNESS "Brightness" 1.5 0.0 2.0 0.05\n* */\n\n#define Coord TEX0\n\n#if defined(VERTEX)\n\n#if __VERSION__ >= 130\n#define OUT out\n#define IN  in\n#define tex2D texture\n#else\n#define OUT varying \n#define IN attribute \n#define tex2D texture2D\n#endif\n\n#ifdef GL_ES\n#define PRECISION mediump\n#else\n#define PRECISION\n#endif\n\nIN  vec4 VertexCoord;\nIN  vec4 Color;\nIN  vec2 TexCoord;\nOUT vec4 color;\nOUT vec2 Coord;\n\nuniform mat4 MVPMatrix;\nuniform PRECISION int FrameDirection;\nuniform PRECISION int FrameCount;\nuniform PRECISION vec2 OutputSize;\nuniform PRECISION vec2 TextureSize;\nuniform PRECISION vec2 InputSize;\n\nvoid main()\n{\ngl_Position = MVPMatrix * VertexCoord;\ncolor = Color;\nCoord = TexCoord;\n}\n\n#elif defined(FRAGMENT)\n\n#if __VERSION__ >= 130\n#define IN in\n#define tex2D texture\nout vec4 FragColor;\n#else\n#define IN varying\n#define FragColor gl_FragColor\n#define tex2D texture2D\n#endif\n\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define PRECISION mediump\n#else\n#define PRECISION\n#endif\n\nuniform PRECISION int FrameDirection;\nuniform PRECISION int FrameCount;\nuniform PRECISION vec2 OutputSize;\nuniform PRECISION vec2 TextureSize;\nuniform PRECISION vec2 InputSize;\nuniform sampler2D Texture;\nIN vec2 Coord;\n\n#ifdef PARAMETER_UNIFORM\nuniform PRECISION float SHARPNESS_IMAGE;\nuniform PRECISION float SHARPNESS_EDGES;\nuniform PRECISION float GLOW_WIDTH;\nuniform PRECISION float GLOW_HEIGHT;\nuniform PRECISION float GLOW_HALATION;\nuniform PRECISION float GLOW_DIFFUSION;\nuniform PRECISION float MASK_COLORS;\nuniform PRECISION float MASK_STRENGTH;\nuniform PRECISION float MASK_SIZE;\nuniform PRECISION float SCANLINE_SIZE_MIN;\nuniform PRECISION float SCANLINE_SIZE_MAX;\nuniform PRECISION float GAMMA_INPUT;\nuniform PRECISION float GAMMA_OUTPUT;\nuniform PRECISION float BRIGHTNESS;\n#else\n#define SHARPNESS_IMAGE 1.0\n#define SHARPNESS_EDGES 3.0\n#define GLOW_WIDTH 0.5\n#define GLOW_HEIGHT 0.5\n#define GLOW_HALATION 0.1\n#define GLOW_DIFFUSION 0.05\n#define MASK_COLORS 2.0\n#define MASK_STRENGTH 0.3\n#define MASK_SIZE 1.0\n#define SCANLINE_SIZE_MIN 0.5\n#define SCANLINE_SIZE_MAX 1.5\n#define GAMMA_INPUT 2.4\n#define GAMMA_OUTPUT 2.4\n#define BRIGHTNESS 1.5\n#endif\n\n#define FIX(c) max(abs(c), 1e-5)\n#define PI 3.141592653589\n#define saturate(c) clamp(c, 0.0, 1.0)\n#define TEX2D(c) pow(tex2D(tex, c).rgb, vec3(GAMMA_INPUT))\n\nmat3 get_color_matrix(sampler2D tex, vec2 co, vec2 dx)\n{\nreturn mat3(TEX2D(co - dx), TEX2D(co), TEX2D(co + dx));\n}\n\nvec3 blur(mat3 m, float dist, float rad)\n{\nvec3 x = vec3(dist - 1.0, dist, dist + 1.0) / rad;\nvec3 w = exp2(x * x * -1.0);\n\nreturn (m[0] * w.x + m[1] * w.y + m[2] * w.z) / (w.x + w.y + w.z);\n}\n\nvec3 filter_gaussian(sampler2D tex, vec2 co, vec2 tex_size)\n{\nvec2 dx = vec2(1.0 / tex_size.x, 0.0);\nvec2 dy = vec2(0.0, 1.0 / tex_size.y);\nvec2 pix_co = co * tex_size;\nvec2 tex_co = (floor(pix_co) + 0.5) / tex_size;\nvec2 dist = (fract(pix_co) - 0.5) * -1.0;\n\nmat3 line0 = get_color_matrix(tex, tex_co - dy, dx);\nmat3 line1 = get_color_matrix(tex, tex_co, dx);\nmat3 line2 = get_color_matrix(tex, tex_co + dy, dx);\nmat3 column = mat3(blur(line0, dist.x, GLOW_WIDTH),\n                       blur(line1, dist.x, GLOW_WIDTH),\n                       blur(line2, dist.x, GLOW_WIDTH));\n\nreturn blur(column, dist.y, GLOW_HEIGHT);\n}\n\nvec3 filter_lanczos(sampler2D tex, vec2 co, vec2 tex_size, float sharp)\n{\ntex_size.x *= sharp;\n\nvec2 dx = vec2(1.0 / tex_size.x, 0.0);\nvec2 pix_co = co * tex_size - vec2(0.5, 0.0);\nvec2 tex_co = (floor(pix_co) + vec2(0.5, 0.0)) / tex_size;\nvec2 dist = fract(pix_co);\nvec4 coef = PI * vec4(dist.x + 1.0, dist.x, dist.x - 1.0, dist.x - 2.0);\n\ncoef = FIX(coef);\ncoef = 2.0 * sin(coef) * sin(coef / 2.0) / (coef * coef);\ncoef /= dot(coef, vec4(1.0));\n\nvec4 col1 = vec4(TEX2D(tex_co), 1.0);\nvec4 col2 = vec4(TEX2D(tex_co + dx), 1.0);\n\nreturn (mat4(col1, col1, col2, col2) * coef).rgb;\n}\n\nvec3 get_scanline_weight(float x, vec3 col)\n{\nvec3 beam = mix(vec3(SCANLINE_SIZE_MIN), vec3(SCANLINE_SIZE_MAX), col);\nvec3 x_mul = 2.0 / beam;\nvec3 x_offset = x_mul * 0.5;\n\nreturn smoothstep(0.0, 1.0, 1.0 - abs(x * x_mul - x_offset)) * x_offset;\n}\n\nvec3 get_mask_weight(float x)\n{\nfloat i = mod(floor(x * OutputSize.x * TextureSize.x / (InputSize.x * MASK_SIZE)), MASK_COLORS);\n\nif (i == 0.0) return mix(vec3(1.0, 0.0, 1.0), vec3(1.0, 0.0, 0.0), MASK_COLORS - 2.0);\nelse if (i == 1.0) return vec3(0.0, 1.0, 0.0);\nelse return vec3(0.0, 0.0, 1.0);\n}\n\nvoid main()\n{\nvec3 col_glow = filter_gaussian(Texture, Coord, TextureSize);\nvec3 col_soft = filter_lanczos(Texture, Coord, TextureSize, SHARPNESS_IMAGE);\nvec3 col_sharp = filter_lanczos(Texture, Coord, TextureSize, SHARPNESS_EDGES);\nvec3 col = sqrt(col_sharp * col_soft);\n\ncol *= get_scanline_weight(fract(Coord.y * TextureSize.y), col_soft);\ncol_glow = saturate(col_glow - col);\ncol += col_glow * col_glow * GLOW_HALATION;\ncol = mix(col, col * get_mask_weight(Coord.x) * MASK_COLORS, MASK_STRENGTH);\ncol += col_glow * GLOW_DIFFUSION;\ncol = pow(col * BRIGHTNESS, vec3(1.0 / GAMMA_OUTPUT));\n\nFragColor = vec4(col, 1.0);\n}\n\n#endif\n',"crt-geom.glsl":'\n/*\nCRT-interlaced\n\nCopyright (C) 2010-2012 cgwg, Themaister and DOLLS\n\nThis program is free software; you can redistribute it and/or modify it\nunder the terms of the GNU General Public License as published by the Free\nSoftware Foundation; either version 2 of the License, or (at your option)\nany later version.\n\n(cgwg gave their consent to have the original version of this shader\ndistributed under the GPL in this message:\n\nhttp://board.byuu.org/viewtopic.php?p=26075#p26075\n\n"Feel free to distribute my shaders under the GPL. After all, the\nbarrel distortion code was taken from the Curvature shader, which is\nunder the GPL."\n)\nThis shader variant is pre-configured with screen curvature\n*/\n/*\n#pragma parameter CRTgamma "CRTGeom Target Gamma" 2.4 0.1 5.0 0.1\n#pragma parameter monitorgamma "CRTGeom Monitor Gamma" 2.2 0.1 5.0 0.1\n#pragma parameter d "CRTGeom Distance" 1.6 0.1 3.0 0.1\n#pragma parameter CURVATURE "CRTGeom Curvature Toggle" 1.0 0.0 1.0 1.0\n#pragma parameter R "CRTGeom Curvature Radius" 2.0 0.1 10.0 0.1\n#pragma parameter cornersize "CRTGeom Corner Size" 0.03 0.001 1.0 0.005\n#pragma parameter cornersmooth "CRTGeom Corner Smoothness" 1000.0 80.0 2000.0 100.0\n#pragma parameter x_tilt "CRTGeom Horizontal Tilt" 0.0 -0.5 0.5 0.05\n#pragma parameter y_tilt "CRTGeom Vertical Tilt" 0.0 -0.5 0.5 0.05\n#pragma parameter overscan_x "CRTGeom Horiz. Overscan %" 100.0 -125.0 125.0 1.0\n#pragma parameter overscan_y "CRTGeom Vert. Overscan %" 100.0 -125.0 125.0 1.0\n#pragma parameter DOTMASK "CRTGeom Dot Mask Toggle" 0.3 0.0 0.3 0.3\n#pragma parameter SHARPER "CRTGeom Sharpness" 1.0 1.0 3.0 1.0\n#pragma parameter scanline_weight "CRTGeom Scanline Weight" 0.3 0.1 0.5 0.05\n*/\n\n#ifndef PARAMETER_UNIFORM\n#define CRTgamma 2.4\n#define monitorgamma 2.2\n#define d 1.6\n#define CURVATURE 1.0\n#define R 2.0\n#define cornersize 0.03\n#define cornersmooth 1000.0\n#define x_tilt 0.0\n#define y_tilt 0.0\n#define overscan_x 100.0\n#define overscan_y 100.0\n#define DOTMASK 0.3\n#define SHARPER 1.0\n#define scanline_weight 0.3\n#endif\n\n#if defined(VERTEX)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING out\n#define COMPAT_ATTRIBUTE in\n#define COMPAT_TEXTURE texture\n#else\n#define COMPAT_VARYING varying \n#define COMPAT_ATTRIBUTE attribute \n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nCOMPAT_ATTRIBUTE vec4 VertexCoord;\nCOMPAT_ATTRIBUTE vec4 COLOR;\nCOMPAT_ATTRIBUTE vec4 TexCoord;\nCOMPAT_VARYING vec4 COL0;\nCOMPAT_VARYING vec4 TEX0;\n\nvec4 _oPosition1; \nuniform mat4 MVPMatrix;\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\n\nCOMPAT_VARYING vec2 overscan;\nCOMPAT_VARYING vec2 aspect;\nCOMPAT_VARYING vec3 stretch;\nCOMPAT_VARYING vec2 sinangle;\nCOMPAT_VARYING vec2 cosangle;\nCOMPAT_VARYING vec2 one;\nCOMPAT_VARYING float mod_factor;\nCOMPAT_VARYING vec2 ilfac;\n\n#ifdef PARAMETER_UNIFORM\nuniform COMPAT_PRECISION float CRTgamma;\nuniform COMPAT_PRECISION float monitorgamma;\nuniform COMPAT_PRECISION float d;\nuniform COMPAT_PRECISION float CURVATURE;\nuniform COMPAT_PRECISION float R;\nuniform COMPAT_PRECISION float cornersize;\nuniform COMPAT_PRECISION float cornersmooth;\nuniform COMPAT_PRECISION float x_tilt;\nuniform COMPAT_PRECISION float y_tilt;\nuniform COMPAT_PRECISION float overscan_x;\nuniform COMPAT_PRECISION float overscan_y;\nuniform COMPAT_PRECISION float DOTMASK;\nuniform COMPAT_PRECISION float SHARPER;\nuniform COMPAT_PRECISION float scanline_weight;\n#endif\n\n#define FIX(c) max(abs(c), 1e-5);\n\nfloat intersect(vec2 xy)\n{\nfloat A = dot(xy,xy)+d*d;\nfloat B = 2.0*(R*(dot(xy,sinangle)-d*cosangle.x*cosangle.y)-d*d);\nfloat C = d*d + 2.0*R*d*cosangle.x*cosangle.y;\nreturn (-B-sqrt(B*B-4.0*A*C))/(2.0*A);\n}\n\nvec2 bkwtrans(vec2 xy)\n{\nfloat c = intersect(xy);\nvec2 point = vec2(c)*xy;\npoint -= vec2(-R)*sinangle;\npoint /= vec2(R);\nvec2 tang = sinangle/cosangle;\nvec2 poc = point/cosangle;\nfloat A = dot(tang,tang)+1.0;\nfloat B = -2.0*dot(poc,tang);\nfloat C = dot(poc,poc)-1.0;\nfloat a = (-B+sqrt(B*B-4.0*A*C))/(2.0*A);\nvec2 uv = (point-a*sinangle)/cosangle;\nfloat r = R*acos(a);\nreturn uv*r/sin(r/R);\n}\n\nvec2 fwtrans(vec2 uv)\n{\nfloat r = FIX(sqrt(dot(uv,uv)));\nuv *= sin(r/R)/r;\nfloat x = 1.0-cos(r/R);\nfloat D = d/R + x*cosangle.x*cosangle.y+dot(uv,sinangle);\nreturn d*(uv*cosangle-x*sinangle)/D;\n}\n\nvec3 maxscale()\n{\nvec2 c = bkwtrans(-R * sinangle / (1.0 + R/d*cosangle.x*cosangle.y));\nvec2 a = vec2(0.5,0.5)*aspect;\nvec2 lo = vec2(fwtrans(vec2(-a.x,c.y)).x, fwtrans(vec2(c.x,-a.y)).y)/aspect;\nvec2 hi = vec2(fwtrans(vec2(+a.x,c.y)).x, fwtrans(vec2(c.x,+a.y)).y)/aspect;\nreturn vec3((hi+lo)*aspect*0.5,max(hi.x-lo.x,hi.y-lo.y));\n}\n\nvoid main()\n{\n// START of parameters\n\n// gamma of simulated CRT\n//\tCRTgamma = 1.8;\n// gamma of display monitor (typically 2.2 is correct)\n//\tmonitorgamma = 2.2;\n// overscan (e.g. 1.02 for 2% overscan)\noverscan = vec2(1.00,1.00);\n// aspect ratio\naspect = vec2(1.0, 0.75);\n// lengths are measured in units of (approximately) the width\n// of the monitor simulated distance from viewer to monitor\n//\td = 2.0;\n// radius of curvature\n//\tR = 1.5;\n// tilt angle in radians\n// (behavior might be a bit wrong if both components are\n// nonzero)\nconst vec2 angle = vec2(0.0,0.0);\n// size of curved corners\n//\tcornersize = 0.03;\n// border smoothness parameter\n// decrease if borders are too aliased\n//\tcornersmooth = 1000.0;\n\n// END of parameters\n\nvec4 _oColor;\nvec2 _otexCoord;\ngl_Position = VertexCoord.x * MVPMatrix[0] + VertexCoord.y * MVPMatrix[1] + VertexCoord.z * MVPMatrix[2] + VertexCoord.w * MVPMatrix[3];\n_oPosition1 = gl_Position;\n_oColor = COLOR;\n_otexCoord = TexCoord.xy;\nCOL0 = COLOR;\nTEX0.xy = TexCoord.xy;\n\n// Precalculate a bunch of useful values we\'ll need in the fragment\n// shader.\nsinangle = sin(vec2(x_tilt, y_tilt)) + vec2(0.001);//sin(vec2(max(abs(x_tilt), 1e-3), max(abs(y_tilt), 1e-3)));\ncosangle = cos(vec2(x_tilt, y_tilt)) + vec2(0.001);//cos(vec2(max(abs(x_tilt), 1e-3), max(abs(y_tilt), 1e-3)));\nstretch = maxscale();\n\nilfac = vec2(1.0,clamp(floor(InputSize.y/200.0), 1.0, 2.0));\n\n// The size of one texel, in texture-coordinates.\nvec2 sharpTextureSize = vec2(SHARPER * TextureSize.x, TextureSize.y);\none = ilfac / sharpTextureSize;\n\n// Resulting X pixel-coordinate of the pixel we\'re drawing.\nmod_factor = TexCoord.x * TextureSize.x * OutputSize.x / InputSize.x;\n\n}\n\n#elif defined(FRAGMENT)\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING in\n#define COMPAT_TEXTURE texture\nout vec4 FragColor;\n#else\n#define COMPAT_VARYING varying\n#define FragColor gl_FragColor\n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nstruct output_dummy {\nvec4 _color;\n};\n\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\nuniform sampler2D Texture;\nCOMPAT_VARYING vec4 TEX0;\n\n// Comment the next line to disable interpolation in linear gamma (and\n// gain speed).\n#define LINEAR_PROCESSING\n\n// Enable screen curvature.\n//        #define CURVATURE\n\n// Enable 3x oversampling of the beam profile\n#define OVERSAMPLE\n\n// Use the older, purely gaussian beam profile\n//#define USEGAUSSIAN\n\n// Macros.\n#define FIX(c) max(abs(c), 1e-5);\n#define PI 3.141592653589\n\n#ifdef LINEAR_PROCESSING\n#       define TEX2D(c) pow(COMPAT_TEXTURE(Texture, (c)), vec4(CRTgamma))\n#else\n#       define TEX2D(c) COMPAT_TEXTURE(Texture, (c))\n#endif\n\nCOMPAT_VARYING vec2 one;\nCOMPAT_VARYING float mod_factor;\nCOMPAT_VARYING vec2 ilfac;\nCOMPAT_VARYING vec2 overscan;\nCOMPAT_VARYING vec2 aspect;\nCOMPAT_VARYING vec3 stretch;\nCOMPAT_VARYING vec2 sinangle;\nCOMPAT_VARYING vec2 cosangle;\n\n#ifdef PARAMETER_UNIFORM\nuniform COMPAT_PRECISION float CRTgamma;\nuniform COMPAT_PRECISION float monitorgamma;\nuniform COMPAT_PRECISION float d;\nuniform COMPAT_PRECISION float CURVATURE;\nuniform COMPAT_PRECISION float R;\nuniform COMPAT_PRECISION float cornersize;\nuniform COMPAT_PRECISION float cornersmooth;\nuniform COMPAT_PRECISION float x_tilt;\nuniform COMPAT_PRECISION float y_tilt;\nuniform COMPAT_PRECISION float overscan_x;\nuniform COMPAT_PRECISION float overscan_y;\nuniform COMPAT_PRECISION float DOTMASK;\nuniform COMPAT_PRECISION float SHARPER;\nuniform COMPAT_PRECISION float scanline_weight;\n#endif\n\nfloat intersect(vec2 xy)\n{\nfloat A = dot(xy,xy)+d*d;\nfloat B = 2.0*(R*(dot(xy,sinangle)-d*cosangle.x*cosangle.y)-d*d);\nfloat C = d*d + 2.0*R*d*cosangle.x*cosangle.y;\nreturn (-B-sqrt(B*B-4.0*A*C))/(2.0*A);\n}\n\nvec2 bkwtrans(vec2 xy)\n{\nfloat c = intersect(xy);\nvec2 point = vec2(c)*xy;\npoint -= vec2(-R)*sinangle;\npoint /= vec2(R);\nvec2 tang = sinangle/cosangle;\nvec2 poc = point/cosangle;\nfloat A = dot(tang,tang)+1.0;\nfloat B = -2.0*dot(poc,tang);\nfloat C = dot(poc,poc)-1.0;\nfloat a = (-B+sqrt(B*B-4.0*A*C))/(2.0*A);\nvec2 uv = (point-a*sinangle)/cosangle;\nfloat r = FIX(R*acos(a));\nreturn uv*r/sin(r/R);\n}\n\nvec2 transform(vec2 coord)\n{\ncoord *= TextureSize / InputSize;\ncoord = (coord-vec2(0.5))*aspect*stretch.z+stretch.xy;\nreturn (bkwtrans(coord)/vec2(overscan_x / 100.0, overscan_y / 100.0)/aspect+vec2(0.5)) * InputSize / TextureSize;\n}\n\nfloat corner(vec2 coord)\n{\ncoord *= TextureSize / InputSize;\ncoord = (coord - vec2(0.5)) * vec2(overscan_x / 100.0, overscan_y / 100.0) + vec2(0.5);\ncoord = min(coord, vec2(1.0)-coord) * aspect;\nvec2 cdist = vec2(cornersize);\ncoord = (cdist - min(coord,cdist));\nfloat dist = sqrt(dot(coord,coord));\nreturn clamp((cdist.x-dist)*cornersmooth,0.0, 1.0);\n}\n\n// Calculate the influence of a scanline on the current pixel.\n//\n// \'distance\' is the distance in texture coordinates from the current\n// pixel to the scanline in question.\n// \'color\' is the colour of the scanline at the horizontal location of\n// the current pixel.\nvec4 scanlineWeights(float distance, vec4 color)\n{\n// "wid" controls the width of the scanline beam, for each RGB\n// channel The "weights" lines basically specify the formula\n// that gives you the profile of the beam, i.e. the intensity as\n// a function of distance from the vertical center of the\n// scanline. In this case, it is gaussian if width=2, and\n// becomes nongaussian for larger widths. Ideally this should\n// be normalized so that the integral across the beam is\n// independent of its width. That is, for a narrower beam\n// "weights" should have a higher peak at the center of the\n// scanline than for a wider beam.\n#ifdef USEGAUSSIAN\nvec4 wid = 0.3 + 0.1 * pow(color, vec4(3.0));\nvec4 weights = vec4(distance / wid);\nreturn 0.4 * exp(-weights * weights) / wid;\n#else\nvec4 wid = 2.0 + 2.0 * pow(color, vec4(4.0));\nvec4 weights = vec4(distance / scanline_weight);\nreturn 1.4 * exp(-pow(weights * inversesqrt(0.5 * wid), wid)) / (0.6 + 0.2 * wid);\n#endif\n}\n\nvoid main()\n{\n// Here\'s a helpful diagram to keep in mind while trying to\n// understand the code:\n//\n//  |      |      |      |      |\n// -------------------------------\n//  |      |      |      |      |\n//  |  01  |  11  |  21  |  31  | <-- current scanline\n//  |      | @    |      |      |\n// -------------------------------\n//  |      |      |      |      |\n//  |  02  |  12  |  22  |  32  | <-- next scanline\n//  |      |      |      |      |\n// -------------------------------\n//  |      |      |      |      |\n//\n// Each character-cell represents a pixel on the output\n// surface, "@" represents the current pixel (always somewhere\n// in the bottom half of the current scan-line, or the top-half\n// of the next scanline). The grid of lines represents the\n// edges of the texels of the underlying texture.\n\n// Texture coordinates of the texel containing the active pixel.\nvec2 xy = (CURVATURE > 0.5) ? transform(TEX0.xy) : TEX0.xy;\n\nfloat cval = corner(xy);\n\n// Of all the pixels that are mapped onto the texel we are\n// currently rendering, which pixel are we currently rendering?\nvec2 ilvec = vec2(0.0,ilfac.y > 1.5 ? mod(float(FrameCount),2.0) : 0.0);\nvec2 ratio_scale = (xy * TextureSize - vec2(0.5) + ilvec)/ilfac;\n#ifdef OVERSAMPLE\nfloat filter_ = InputSize.y/OutputSize.y;//fwidth(ratio_scale.y);\n#endif\nvec2 uv_ratio = fract(ratio_scale);\n\n// Snap to the center of the underlying texel.\nxy = (floor(ratio_scale)*ilfac + vec2(0.5) - ilvec) / TextureSize;\n\n// Calculate Lanczos scaling coefficients describing the effect\n// of various neighbour texels in a scanline on the current\n// pixel.\nvec4 coeffs = PI * vec4(1.0 + uv_ratio.x, uv_ratio.x, 1.0 - uv_ratio.x, 2.0 - uv_ratio.x);\n\n// Prevent division by zero.\ncoeffs = FIX(coeffs);\n\n// Lanczos2 kernel.\ncoeffs = 2.0 * sin(coeffs) * sin(coeffs / 2.0) / (coeffs * coeffs);\n\n// Normalize.\ncoeffs /= dot(coeffs, vec4(1.0));\n\n// Calculate the effective colour of the current and next\n// scanlines at the horizontal location of the current pixel,\n// using the Lanczos coefficients above.\nvec4 col  = clamp(mat4(\n                TEX2D(xy + vec2(-one.x, 0.0)),\n                TEX2D(xy),\n                TEX2D(xy + vec2(one.x, 0.0)),\n                TEX2D(xy + vec2(2.0 * one.x, 0.0))) * coeffs,\n                0.0, 1.0);\nvec4 col2 = clamp(mat4(\n                TEX2D(xy + vec2(-one.x, one.y)),\n                TEX2D(xy + vec2(0.0, one.y)),\n                TEX2D(xy + one),\n                TEX2D(xy + vec2(2.0 * one.x, one.y))) * coeffs,\n                0.0, 1.0);\n\n#ifndef LINEAR_PROCESSING\ncol  = pow(col , vec4(CRTgamma));\ncol2 = pow(col2, vec4(CRTgamma));\n#endif\n\n// Calculate the influence of the current and next scanlines on\n// the current pixel.\nvec4 weights  = scanlineWeights(uv_ratio.y, col);\nvec4 weights2 = scanlineWeights(1.0 - uv_ratio.y, col2);\n#ifdef OVERSAMPLE\nuv_ratio.y =uv_ratio.y+1.0/3.0*filter_;\nweights = (weights+scanlineWeights(uv_ratio.y, col))/3.0;\nweights2=(weights2+scanlineWeights(abs(1.0-uv_ratio.y), col2))/3.0;\nuv_ratio.y =uv_ratio.y-2.0/3.0*filter_;\nweights=weights+scanlineWeights(abs(uv_ratio.y), col)/3.0;\nweights2=weights2+scanlineWeights(abs(1.0-uv_ratio.y), col2)/3.0;\n#endif\n\nvec3 mul_res  = (col * weights + col2 * weights2).rgb * vec3(cval);\n\n// dot-mask emulation:\n// Output pixels are alternately tinted green and magenta.\nvec3 dotMaskWeights = mix(\nvec3(1.0, 1.0 - DOTMASK, 1.0),\nvec3(1.0 - DOTMASK, 1.0, 1.0 - DOTMASK),\nfloor(mod(mod_factor, 2.0))\n);\n\nmul_res *= dotMaskWeights;\n\n// Convert the image gamma for display on our output device.\nmul_res = pow(mul_res, vec3(1.0 / monitorgamma));\n\n// Color the texel.\noutput_dummy _OUT;\n_OUT._color = vec4(mul_res, 1.0);\nFragColor = _OUT._color;\nreturn;\n} \n#endif\n\n',"crt-mattias.glsl":'\n#pragma parameter CURVATURE "Curvature" 0.5 0.0 1.0 0.05\n#pragma parameter SCANSPEED "Scanline Crawl Speed" 1.0 0.0 10.0 0.5\n#if defined(VERTEX)\n#if __VERSION__ >= 130\n#define COMPAT_VARYING out\n#define COMPAT_ATTRIBUTE in\n#define COMPAT_TEXTURE texture\n#else\n#define COMPAT_VARYING varying \n#define COMPAT_ATTRIBUTE attribute \n#define COMPAT_TEXTURE texture2D\n#endif\n\n#ifdef GL_ES\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\nCOMPAT_ATTRIBUTE vec4 VertexCoord;\nCOMPAT_ATTRIBUTE vec4 COLOR;\nCOMPAT_ATTRIBUTE vec4 TexCoord;\nCOMPAT_VARYING vec4 COL0;\nCOMPAT_VARYING vec4 TEX0;\n\nvec4 _oPosition1; \nuniform mat4 MVPMatrix;\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\n\n#define vTexCoord TEX0.xy\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define OutSize vec4(OutputSize, 1.0 / OutputSize)\n\nvoid main()\n{\n    gl_Position = MVPMatrix * VertexCoord;\n    TEX0.xy = TexCoord.xy;\n}\n\n#elif defined(FRAGMENT)\n\n#ifdef GL_ES\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n#define COMPAT_PRECISION mediump\n#else\n#define COMPAT_PRECISION\n#endif\n\n#if __VERSION__ >= 130\n#define COMPAT_VARYING in\n#define COMPAT_TEXTURE texture\nout COMPAT_PRECISION vec4 FragColor;\n#else\n#define COMPAT_VARYING varying\n#define FragColor gl_FragColor\n#define COMPAT_TEXTURE texture2D\n#endif\n\nuniform COMPAT_PRECISION int FrameDirection;\nuniform COMPAT_PRECISION int FrameCount;\nuniform COMPAT_PRECISION vec2 OutputSize;\nuniform COMPAT_PRECISION vec2 TextureSize;\nuniform COMPAT_PRECISION vec2 InputSize;\nuniform sampler2D Texture;\nCOMPAT_VARYING vec4 TEX0;\n\n// compatibility #defines\n#define Source Texture\n#define vTexCoord TEX0.xy\n\n#define SourceSize vec4(TextureSize, 1.0 / TextureSize) //either TextureSize or InputSize\n#define OutSize vec4(OutputSize, 1.0 / OutputSize)\n\n#ifdef PARAMETER_UNIFORM\nuniform COMPAT_PRECISION float CURVATURE, SCANSPEED;\n#else\n#define CURVATURE 0.5\n#define SCANSPEED 1.0\n#endif\n\n#define iChannel0 Texture\n#define iTime (float(FrameCount) / 60.0)\n#define iResolution OutputSize.xy\n#define fragCoord gl_FragCoord.xy\n\nvec3 sample_( sampler2D tex, vec2 tc )\n{\n    vec3 s = pow(COMPAT_TEXTURE(tex,tc).rgb, vec3(2.2));\n    return s;\n}\n\nvec3 blur(sampler2D tex, vec2 tc, float offs)\n{\n    vec4 xoffs = offs * vec4(-2.0, -1.0, 1.0, 2.0) / (iResolution.x * TextureSize.x / InputSize.x);\n    vec4 yoffs = offs * vec4(-2.0, -1.0, 1.0, 2.0) / (iResolution.y * TextureSize.y / InputSize.y);\n    tc = tc * InputSize / TextureSize;\n    \n    vec3 color = vec3(0.0, 0.0, 0.0);\n    color += sample_(tex,tc + vec2(xoffs.x, yoffs.x)) * 0.00366;\n    color += sample_(tex,tc + vec2(xoffs.y, yoffs.x)) * 0.01465;\n    color += sample_(tex,tc + vec2(    0.0, yoffs.x)) * 0.02564;\n    color += sample_(tex,tc + vec2(xoffs.z, yoffs.x)) * 0.01465;\n    color += sample_(tex,tc + vec2(xoffs.w, yoffs.x)) * 0.00366;\n    \n    color += sample_(tex,tc + vec2(xoffs.x, yoffs.y)) * 0.01465;\n    color += sample_(tex,tc + vec2(xoffs.y, yoffs.y)) * 0.05861;\n    color += sample_(tex,tc + vec2(    0.0, yoffs.y)) * 0.09524;\n    color += sample_(tex,tc + vec2(xoffs.z, yoffs.y)) * 0.05861;\n    color += sample_(tex,tc + vec2(xoffs.w, yoffs.y)) * 0.01465;\n    \n    color += sample_(tex,tc + vec2(xoffs.x, 0.0)) * 0.02564;\n    color += sample_(tex,tc + vec2(xoffs.y, 0.0)) * 0.09524;\n    color += sample_(tex,tc + vec2(    0.0, 0.0)) * 0.15018;\n    color += sample_(tex,tc + vec2(xoffs.z, 0.0)) * 0.09524;\n    color += sample_(tex,tc + vec2(xoffs.w, 0.0)) * 0.02564;\n    \n    color += sample_(tex,tc + vec2(xoffs.x, yoffs.z)) * 0.01465;\n    color += sample_(tex,tc + vec2(xoffs.y, yoffs.z)) * 0.05861;\n    color += sample_(tex,tc + vec2(    0.0, yoffs.z)) * 0.09524;\n    color += sample_(tex,tc + vec2(xoffs.z, yoffs.z)) * 0.05861;\n    color += sample_(tex,tc + vec2(xoffs.w, yoffs.z)) * 0.01465;\n    \n    color += sample_(tex,tc + vec2(xoffs.x, yoffs.w)) * 0.00366;\n    color += sample_(tex,tc + vec2(xoffs.y, yoffs.w)) * 0.01465;\n    color += sample_(tex,tc + vec2(    0.0, yoffs.w)) * 0.02564;\n    color += sample_(tex,tc + vec2(xoffs.z, yoffs.w)) * 0.01465;\n    color += sample_(tex,tc + vec2(xoffs.w, yoffs.w)) * 0.00366;\n\n    return color;\n}\n\nfloat rand(vec2 co)\n{\n    float a = 12.9898;\n    float b = 78.233;\n    float c = 43758.5453;\n    float dt= dot(co.xy ,vec2(a,b));\n    float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\nvec2 curve(vec2 uv)\n{\n    uv = (uv - 0.5) * 2.0;\n    uv *= 1.1;\t\n    uv.x *= 1.0 + pow((abs(uv.y) / 5.0), 2.0);\n    uv.y *= 1.0 + pow((abs(uv.x) / 4.0), 2.0);\n    uv  = (uv / 2.0) + 0.5;\n    uv =  uv *0.92 + 0.04;\n    return uv;\n}\n\nvoid main()\n{\n    vec2 q = (vTexCoord.xy * TextureSize.xy / InputSize.xy);//fragCoord.xy / iResolution.xy;\n    vec2 uv = q;\n    uv = mix( uv, curve( uv ), CURVATURE ) * InputSize.xy / TextureSize.xy;\n    vec3 col;\n    float x =  sin(0.1*iTime+uv.y*21.0)*sin(0.23*iTime+uv.y*29.0)*sin(0.3+0.11*iTime+uv.y*31.0)*0.0017;\n    float o =2.0*mod(fragCoord.y,2.0)/iResolution.x;\n    x+=o;\n    uv = uv * TextureSize / InputSize;\n    col.r = 1.0*blur(iChannel0,vec2(uv.x+0.0009,uv.y+0.0009),1.2).x+0.005;\n    col.g = 1.0*blur(iChannel0,vec2(uv.x+0.000,uv.y-0.0015),1.2).y+0.005;\n    col.b = 1.0*blur(iChannel0,vec2(uv.x-0.0015,uv.y+0.000),1.2).z+0.005;\n    col.r += 0.2*blur(iChannel0,vec2(uv.x+0.0009,uv.y+0.0009),2.25).x-0.005;\n    col.g += 0.2*blur(iChannel0,vec2(uv.x+0.000,uv.y-0.0015),1.75).y-0.005;\n    col.b += 0.2*blur(iChannel0,vec2(uv.x-0.0015,uv.y+0.000),1.25).z-0.005;\n    float ghs = 0.05;\n    col.r += ghs*(1.0-0.299)*blur(iChannel0,0.75*vec2(0.01, -0.027)+vec2(uv.x+0.001,uv.y+0.001),7.0).x;\n    col.g += ghs*(1.0-0.587)*blur(iChannel0,0.75*vec2(-0.022, -0.02)+vec2(uv.x+0.000,uv.y-0.002),5.0).y;\n    col.b += ghs*(1.0-0.114)*blur(iChannel0,0.75*vec2(-0.02, -0.0)+vec2(uv.x-0.002,uv.y+0.000),3.0).z;\n    \n    \n\n    col = clamp(col*0.4+0.6*col*col*1.0,0.0,1.0);\n    float vig = (0.0 + 1.0*16.0*uv.x*uv.y*(1.0-uv.x)*(1.0-uv.y));\n    vig = pow(vig,0.3);\n    col *= vec3(vig);\n\n    col *= vec3(0.95,1.05,0.95);\n    col = mix( col, col * col, 0.3) * 3.8;\n\n    float scans = clamp( 0.35+0.15*sin(3.5*(iTime * SCANSPEED)+uv.y*iResolution.y*1.5), 0.0, 1.0);\n    \n    float s = pow(scans,0.9);\n    col = col*vec3( s) ;\n\n    col *= 1.0+0.0015*sin(300.0*iTime);\n    \n    col*=1.0-0.15*vec3(clamp((mod(fragCoord.x+o, 2.0)-1.0)*2.0,0.0,1.0));\n    col *= vec3( 1.0 ) - 0.25*vec3( rand( uv+0.0001*iTime),  rand( uv+0.0001*iTime + 0.3 ),  rand( uv+0.0001*iTime+ 0.5 )  );\n    col = pow(col, vec3(0.45));\n\n    if (uv.x < 0.0 || uv.x > 1.0)\n        col *= 0.0;\n    if (uv.y < 0.0 || uv.y > 1.0)\n        col *= 0.0;\n    \n\n    float comp = smoothstep( 0.1, 0.9, sin(iTime) );\n\n    FragColor = vec4(col,1.0);\n} \n#endif\n'},be=n(6),xe=n.n(be);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){if("object"===Te(e)&&e.files&&(e=e.files[0]),this.littleEndian=!1,this.offset=0,this._lastRead=null,"object"===Te(e)&&e.name&&e.size){if("function"!=typeof window.FileReader)throw new Error("Incompatible Browser");this.fileName=e.name,this.fileType=e.type,this.fileSize=e.size,this._fileReader=new FileReader,this._fileReader.marcFile=this,this._fileReader.addEventListener("load",(function(){this.marcFile._u8array=new Uint8Array(this.result),this.marcFile._dataView=new DataView(this.result),t&&t.call()}),!1),this._fileReader.readAsArrayBuffer(e)}else if("object"===Te(e)&&"string"==typeof e.fileName&&"boolean"==typeof e.littleEndian){this.fileName=e.fileName,this.fileType=e.fileType,this.fileSize=e.fileSize;var n=new ArrayBuffer(e);this._u8array=new Uint8Array(this.fileType),this._dataView=new DataView(this.fileType),e.copyToFile(this,0),t&&t.call()}else if("object"===Te(e)&&"number"==typeof e.byteLength)this.fileName="file.bin",this.fileType="application/octet-stream",this.fileSize=e.byteLength,void 0!==e.buffer&&(e=e.buffer),this._u8array=new Uint8Array(e),this._dataView=new DataView(e),t&&t.call();else{if("number"!=typeof e)throw new Error("Invalid source");this.fileName="file.bin",this.fileType="application/octet-stream",this.fileSize=e,n=new ArrayBuffer(e),this._u8array=new Uint8Array(n),this._dataView=new DataView(n),t&&t.call()}}Ee.IS_MACHINE_LITTLE_ENDIAN=(pe=new ArrayBuffer(2),new DataView(pe).setInt16(0,256,!0),256===new Int16Array(pe)[0]),Ee.prototype.seek=function(e){this.offset=e},Ee.prototype.skip=function(e){this.offset+=e},Ee.prototype.isEOF=function(){return!(this.offset<this.fileSize)},Ee.prototype.slice=function(e,t){var n;return t=t||this.fileSize-e,void 0!==this._u8array.buffer.slice?((n=new Ee(0)).fileSize=t,n._u8array=new Uint8Array(this._u8array.buffer.slice(e,e+t))):(n=new Ee(t),this.copyToFile(n,e,t,0)),n.fileName=this.fileName,n.fileType=this.fileType,n.littleEndian=this.littleEndian,n},Ee.prototype.copyToFile=function(e,t,n,r){void 0===r&&(r=t),n=n||this.fileSize-t;for(var o=0;o<n;o++)e._u8array[r+o]=this._u8array[t+o]},Ee.prototype.save=function(){var e;try{e=new Blob([this._u8array],{type:this.fileType})}catch(n){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"InvalidStateError"!==n.name||!window.BlobBuilder)throw new Error("Incompatible Browser");var t=new BlobBuilder;t.append(this._u8array.buffer),e=t.getBlob(this.fileType)}saveAs(e,this.fileName)},Ee.prototype.readU8=function(){return this._lastRead=this._u8array[this.offset],this.offset++,this._lastRead},Ee.prototype.readU16=function(){return this.littleEndian?this._lastRead=this._u8array[this.offset]+(this._u8array[this.offset+1]<<8):this._lastRead=(this._u8array[this.offset]<<8)+this._u8array[this.offset+1],this.offset+=2,this._lastRead>>>0},Ee.prototype.readU24=function(){return this.littleEndian?this._lastRead=this._u8array[this.offset]+(this._u8array[this.offset+1]<<8)+(this._u8array[this.offset+2]<<16):this._lastRead=(this._u8array[this.offset]<<16)+(this._u8array[this.offset+1]<<8)+this._u8array[this.offset+2],this.offset+=3,this._lastRead>>>0},Ee.prototype.readU32=function(){return this.littleEndian?this._lastRead=this._u8array[this.offset]+(this._u8array[this.offset+1]<<8)+(this._u8array[this.offset+2]<<16)+(this._u8array[this.offset+3]<<24):this._lastRead=(this._u8array[this.offset]<<24)+(this._u8array[this.offset+1]<<16)+(this._u8array[this.offset+2]<<8)+this._u8array[this.offset+3],this.offset+=4,this._lastRead>>>0},Ee.prototype.readBytes=function(e){this._lastRead=new Array(e);for(var t=0;t<e;t++)this._lastRead[t]=this._u8array[this.offset+t];return this.offset+=e,this._lastRead},Ee.prototype.readString=function(e){this._lastRead="";for(var t=0;t<e&&this.offset+t<this.fileSize&&this._u8array[this.offset+t]>0;t++)this._lastRead=this._lastRead+String.fromCharCode(this._u8array[this.offset+t]);return this.offset+=e,this._lastRead},Ee.prototype.writeU8=function(e){this._u8array[this.offset]=e,this.offset++},Ee.prototype.writeU16=function(e){this.littleEndian?(this._u8array[this.offset]=255&e,this._u8array[this.offset+1]=e>>8):(this._u8array[this.offset]=e>>8,this._u8array[this.offset+1]=255&e),this.offset+=2},Ee.prototype.writeU24=function(e){this.littleEndian?(this._u8array[this.offset]=255&e,this._u8array[this.offset+1]=(65280&e)>>8,this._u8array[this.offset+2]=(16711680&e)>>16):(this._u8array[this.offset]=(16711680&e)>>16,this._u8array[this.offset+1]=(65280&e)>>8,this._u8array[this.offset+2]=255&e),this.offset+=3},Ee.prototype.writeU32=function(e){this.littleEndian?(this._u8array[this.offset]=255&e,this._u8array[this.offset+1]=(65280&e)>>8,this._u8array[this.offset+2]=(16711680&e)>>16,this._u8array[this.offset+3]=(4278190080&e)>>24):(this._u8array[this.offset]=(4278190080&e)>>24,this._u8array[this.offset+1]=(16711680&e)>>16,this._u8array[this.offset+2]=(65280&e)>>8,this._u8array[this.offset+3]=255&e),this.offset+=4},Ee.prototype.writeBytes=function(e){for(var t=0;t<e.length;t++)this._u8array[this.offset+t]=e[t];this.offset+=e.length},Ee.prototype.writeString=function(e,t){t=t||e.length;for(var n=0;n<e.length&&n<t;n++)this._u8array[this.offset+n]=e.charCodeAt(n);for(;n<t;n++)this._u8array[this.offset+n]=0;this.offset+=t};var Se=Ee;function Ce(){this.records=[],this.truncate=!1}function we(e){var t=new Ce;e.seek(5);for(var n=0,r=0;!e.isEOF();){if(4542278===(n=e.readU24())){if(e.isEOF())break;if(e.offset+3===e.fileSize){t.truncate=e.readU24();break}}0===(r=e.readU16())?t.addRLERecord(n,e.readU16(),e.readU8()):t.addSimpleRecord(n,e.readBytes(r))}return t}Ce.prototype.addSimpleRecord=function(e,t){this.records.push({offset:e,type:1,length:t.length,data:t})},Ce.prototype.addRLERecord=function(e,t,n){this.records.push({offset:e,type:0,length:t,byte:n})},Ce.prototype.toString=function(){nSimpleRecords=0,nRLERecords=0;for(var e=0;e<this.records.length;e++)0===this.records[e].type?nRLERecords++:nSimpleRecords++;var t="Simple records: "+nSimpleRecords;return t+="\nRLE records: "+nRLERecords,t+="\nTotal records: "+this.records.length,this.truncate&&(t+="\nTruncate at: 0x"+this.truncate.toString(16)),t},Ce.prototype.export=function(e){for(var t=5,n=0;n<this.records.length;n++)0===this.records[n].type?t+=8:t+=5+this.records[n].data.length;for(t+=3,this.truncate&&(t+=3),tempFile=new Se(t),tempFile.fileName=e+".ips",tempFile.writeString("PATCH"),n=0;n<this.records.length;n++){var r=this.records[n];tempFile.writeU24(r.offset),0===r.type?(tempFile.writeU16(0),tempFile.writeU16(r.length),tempFile.writeU8(r.byte)):(tempFile.writeU16(r.data.length),tempFile.writeBytes(r.data))}return tempFile.writeString("EOF"),r.truncate&&tempFile.writeU24(r.truncate),tempFile},Ce.prototype.apply=function(e){var t;if(this.truncate)t=e.slice(0,this.truncate);else{for(var n=e.fileSize,r=0;r<this.records.length;r++){var o=this.records[r];0===o.type?o.offset+o.length>n&&(n=o.offset+o.length):o.offset+o.data.length>n&&(n=o.offset+o.data.length)}n===e.fileSize?t=e.slice(0,e.fileSize):(t=new Se(n),e.copyToFile(t,0))}for(e.seek(0),r=0;r<this.records.length;r++)if(t.seek(this.records[r].offset),0===this.records[r].type)for(var a=0;a<this.records[r].length;a++)t.writeU8(this.records[r].byte);else t.writeBytes(this.records[r].data);return t},"0123456789abcdef".split("");var Oe=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();function Ae(e,t,n){for(var r=t?new Uint8Array(e._u8array.buffer,t):e._u8array,o=-1,a=n?r.length-4:r.length,i=0;i<a;i++)o=o>>>8^Oe[255&(o^r[i])];return(-1^o)>>>0}function Pe(){this.sourceSize=0,this.targetSize=0,this.metaData="",this.actions=[],this.sourceChecksum=0,this.targetChecksum=0,this.patchChecksum=0}function Me(e){e.readVLV=Ne,e.littleEndian=!0;var t=new Pe;e.seek(4),t.sourceSize=e.readVLV(),t.targetSize=e.readVLV();var n=e.readVLV();n&&(t.metaData=e.readString(n));for(var r=e.fileSize-12;e.offset<r;){var o=e.readVLV(),a={type:3&o,length:1+(o>>2)};if(1===a.type)a.bytes=e.readBytes(a.length);else if(2===a.type||3===a.type){var i=e.readVLV();a.relativeOffset=(1&i?-1:1)*(i>>1)}t.actions.push(a)}if(t.sourceChecksum=e.readU32(),t.targetChecksum=e.readU32(),t.patchChecksum=e.readU32(),t.patchChecksum!==Ae(e,0,!0))throw new Error("error_crc_patch");return t}function Ne(){for(var e=0,t=1;;){var n=this.readU8();if(e+=(127&n)*t,128&n)break;e+=t<<=7}return this._lastRead=e,e}function Ie(e){for(;;){var t=127&e;if(0==(e>>=7)){this.writeU8(128|t);break}this.writeU8(t),e--}}function Re(e){for(var t=0;;){if(0==(e>>=7)){t++;break}t++,e--}return t}Pe.prototype.toString=function(){var e="Source size: "+this.sourceSize;return e+="\nTarget size: "+this.targetSize,e+="\nMetadata: "+this.metaData,e+="\n#Actions: "+this.actions.length},Pe.prototype.validateSource=function(e,t){return this.sourceChecksum===Ae(e,t)},Pe.prototype.apply=function(e,t){if(t&&!this.validateSource(e))throw new Error("error_crc_input");for(var n=new Se(this.targetSize),r=0,o=0,a=0;a<this.actions.length;a++){var i=this.actions[a];if(0===i.type)e.copyToFile(n,n.offset,i.length),n.skip(i.length);else if(1===i.type)n.writeBytes(i.bytes);else if(2===i.type){r+=i.relativeOffset;for(var s=i.length;s--;)n.writeU8(e._u8array[r]),r++}else if(3===i.type)for(o+=i.relativeOffset,s=i.length;s--;)n.writeU8(n._u8array[o]),o++}if(t&&this.targetChecksum!==Ae(n))throw new Error("error_crc_output");return n},Pe.prototype.export=function(e){var t="BPS1".length;t+=Re(this.sourceSize),t+=Re(this.targetSize),t+=Re(this.metaData.length),t+=this.metaData.length;for(var n=0;n<this.actions.length;n++)t+=Re(((o=this.actions[n]).length-1<<2)+o.type),1===o.type?t+=o.length:2!==o.type&&3!==o.type||(t+=Re((Math.abs(o.relativeOffset)<<1)+(o.relativeOffset<0?1:0)));var r=new Se(t+=12);for(r.fileName=e+".bps",r.littleEndian=!0,r.writeVLV=Ie,r.writeString("BPS1"),r.writeVLV(this.sourceSize),r.writeVLV(this.targetSize),r.writeVLV(this.metaData.length),r.writeString(this.metaData,this.metaData.length),n=0;n<this.actions.length;n++){var o=this.actions[n];r.writeVLV((o.length-1<<2)+o.type),1===o.type?r.writeBytes(o.bytes):2!==o.type&&3!==o.type||r.writeVLV((Math.abs(o.relativeOffset)<<1)+(o.relativeOffset<0?1:0))}return r.writeU32(this.sourceChecksum),r.writeU32(this.targetChecksum),r.writeU32(this.patchChecksum),r};var Le="UPS1";function Be(){this.records=[],this.sizeInput=0,this.sizeOutput=0,this.checksumInput=0,this.checksumOutput=0}function ke(e){for(;;){var t=127&e;if(0==(e>>=7)){this.writeU8(128|t);break}this.writeU8(t),e-=1}}function De(){for(var e=0,t=1;;){var n=this.readU8();if(-1==n)throw new Error("Can't read UPS VLV at 0x"+(this.offset-1).toString(16));if(e+=(127&n)*t,0!=(128&n))break;e+=t<<=7}return e}function je(e){for(var t=0;t++,0!=(e>>=7);)e-=1;return t}function Fe(e){var t=new Be;for(e.readVLV=De,e.seek(Le.length),t.sizeInput=e.readVLV(),t.sizeOutput=e.readVLV();e.offset<e.fileSize-12;){for(var n=e.readVLV(),r=[];e.readU8();)r.push(e._lastRead);t.addRecord(n,r)}return e.littleEndian=!0,t.checksumInput=e.readU32(),t.checksumOutput=e.readU32(),e.littleEndian=!1,t}Be.prototype.addRecord=function(e,t){this.records.push({offset:e,XORdata:t})},Be.prototype.toString=function(){var e="Records: "+(void 0).records.length;return e+="\nInput file size: "+(void 0).sizeInput,e+="\nOutput file size: "+(void 0).sizeOutput,e+="\nInput file checksum: "+padZeroes((void 0).checksumInput,4),e+="\nOutput file checksum: "+padZeroes((void 0).checksumOutput,4)},Be.prototype.export=function(e){var t=Le.length;t+=je(this.sizeInput),t+=je(this.sizeOutput);for(var n=0;n<this.records.length;n++)t+=je(this.records[n].offset),t+=this.records[n].XORdata.length+1;for(t+=12,tempFile=new Se(t),tempFile.writeVLV=ke,tempFile.fileName=e+".ups",tempFile.writeString(Le),tempFile.writeVLV(this.sizeInput),tempFile.writeVLV(this.sizeOutput),n=0;n<this.records.length;n++)tempFile.writeVLV(this.records[n].offset),tempFile.writeBytes(this.records[n].XORdata),tempFile.writeU8(0);return tempFile.littleEndian=!0,tempFile.writeU32(this.checksumInput),tempFile.writeU32(this.checksumOutput),tempFile.writeU32(Ae(tempFile,0,!0)),tempFile},Be.prototype.validateSource=function(e,t){return Ae(e,t)===this.checksumInput},Be.prototype.apply=function(e,t){t&&this.validateSource(e),tempFile=new Se(this.sizeOutput),e.copyToFile(tempFile,0,this.sizeInput),e.seek(0);for(var n=0;n<this.records.length;n++){var r=this.records[n];tempFile.skip(r.offset),e.skip(r.offset);for(var o=0;o<r.XORdata.length;o++)tempFile.writeU8((e.isEOF()?0:e.readU8())^r.XORdata[o]);tempFile.skip(1),e.skip(1)}return t&&(Ae(tempFile),this.checksumOutput),tempFile};var Ue=n(132),Ge=n.n(Ue);function ze(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var He={romdb:null,supportBatterySave:!1,hash:"2b35cacf70ae",hash2:"f5cbb3f38c0bb20e4",hash3:"88cc8ad0c350400499a0",loading:null,gamePatch:null,saveFilenames:[],FS:null,Module:null,aspectRatio:4/3,memData:null,wasmData:null,coreFileData:{},coreFileName:"",coreFileVersion:"",newCore:!1,newCoreKey:null,newCoreKey2:null,servers:{},arcadeCores:["arcade","mame","mame0.193","mame0.243","mame2003","fbneo","fba0.2.97.29"],isArcadeCore:!1,buttonMaps:[],coreOptions:[],diskControl:null,isMobileDevice:!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(navigator.userAgent||"")};function Ye(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qe,Xe,We,Ke,Je,$e=(qe=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],Xe=function(){function e(t){var n=t.targetModal,r=t.triggers,o=void 0===r?[]:r,a=t.onShow,i=void 0===a?function(){}:a,s=t.onClose,c=void 0===s?function(){}:s,l=t.openTrigger,u=void 0===l?"data-micromodal-trigger":l,d=t.closeTrigger,f=void 0===d?"data-micromodal-close":d,p=t.disableScroll,h=void 0!==p&&p,m=t.disableFocus,v=void 0!==m&&m,_=t.awaitCloseAnimation,g=void 0!==_&&_,y=t.debugMode,b=void 0!==y&&y,x=t.closeByEsckey,T=void 0===x||x;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.modal=document.getElementById(n),this.config={debugMode:b,disableScroll:h,openTrigger:u,closeTrigger:f,onShow:i,onClose:c,awaitCloseAnimation:g,disableFocus:v,closeByEsckey:T},o.length>0&&this.registerTriggers.apply(this,Ye(o)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var t,n;return t=e,(n=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){t.addEventListener("click",(function(){return e.showModal()}))}))}},{key:"showModal",value:function(){this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(J("is-open")),this.setFocusToFirstNode(),this.addEventListeners(),this.config.onShow(this.modal)}},{key:"closeModal",value:function(){var e=this.modal;this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.config.onClose(this.modal),this.config.awaitCloseAnimation?this.modal.addEventListener("animationend",(function t(){e.classList.remove(J("is-open")),e.removeEventListener("animationend",t,!1)}),!1):e.classList.remove(J("is-open"))}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){e.target.hasAttribute(this.config.closeTrigger)&&(this.closeModal(),e.preventDefault())}},{key:"onKeydown",value:function(e){this.config.closeByEsckey&&27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.maintainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(qe);return Object.keys(e).map((function(t){return e[t]}))}},{key:"setFocusToFirstNode",value:function(){if(!this.config.disableFocus){var e=this.getFocusableNodes();e.length&&e[0].focus()}}},{key:"maintainFocus",value:function(e){var t=this.getFocusableNodes();if(this.modal.contains(document.activeElement)){var n=t.indexOf(document.activeElement);e.shiftKey&&0===n&&(t[t.length-1].focus(),e.preventDefault()),e.shiftKey||n!==t.length-1||(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&Ve(t.prototype,n),e}(),We=null,Ke=function(e){if(!document.getElementById(e))return!1},Je=function(e,t){if(e.length,!t)return!0;for(var n in t)Ke(n);return!0},{init:function(e){var t,n,r,o=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),a=Ye(document.querySelectorAll("[".concat(o.openTrigger,"]"))),i=(t=a,n=o.openTrigger,r=[],t.forEach((function(e){var t=e.attributes[n].value;void 0===r[t]&&(r[t]=[]),r[t].push(e)})),r);if(!0!==o.debugMode||!1!==Je(a,i))for(var s in i){var c=i[s];o.targetModal=s,o.triggers=Ye(c),new Xe(o)}},show:function(e,t){var n=t||{};return n.targetModal=e,!0===n.debugMode&&!1===Ke(e)?We=null:(We=new Xe(n)).showModal(),We},close:function(){We.closeModal()}});function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qe,et,tt,nt,rt,ot=(Qe=J("ejs-toast"),et=J("ejs-toast-item"),tt=function(){function e(t){var n=t.container,r=t.message,o=t.duraction;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=n,this.message=r,this.duraction=o||4e3,this.onClick=this.onClick.bind(this),this.timeout=null}var t,n;return t=e,(n=[{key:"showToast",value:function(){var e,t=this,n=this.container.querySelector(".".concat(Qe));if(n||(n=D("div",{class:Qe}),this.container.appendChild(n)),(e=n.querySelectorAll(".".concat(et))).length>5){var r=e[0];n.removeChild(r)}this.modal=D("div",{class:et},this.message),this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(J("is-open")),this.addEventListeners(),n.appendChild(this.modal),this.timeout=setTimeout((function(){t.closeToast()}),this.duraction)}},{key:"closeToast",value:function(){var e=this.modal,t=this.container.querySelector(".".concat(Qe));this.modal.setAttribute("aria-hidden","true");try{t.removeChild(e)}catch(e){}this.removeEventListeners(),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick)}},{key:"onClick",value:function(e){this.closeToast(),e.preventDefault()}}])&&Ze(t.prototype,n),e}(),nt=null,{show:function(e,t,n){var r={};return r.container=e,r.message=t,r.duraction=n,(nt=new tt(r)).showToast(),nt},close:function(){nt.closeModal()}});function at(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ct={defaultControllers:{0:{0:{value:"88",value2:"1"},1:{value:"83",value2:"3"},2:{value:"16",value2:"8"},3:{value:"13",value2:"9"},4:{value:"38",value2:"12"},5:{value:"40",value2:"13"},6:{value:"37",value2:"14"},7:{value:"39",value2:"15"},8:{value:"90",value2:"0"},9:{value:"65",value2:"2"},10:{value:"81",value2:"4"},11:{value:"69",value2:"5"},12:{value:"82",value2:"6"},13:{value:"84",value2:"7"},14:{},15:{},16:{value:"72"},17:{value:"70"},18:{value:"71"},19:{value:"84"},20:{},21:{},22:{},23:{}},1:{},2:{},3:{}},controllers:{},remappingAxis:{},virtualGamepadContainer:null,keyMap:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause/break",20:"caps lock",27:"escape",32:"space",33:"page up",34:"page down",35:"end",36:"home",37:"left arrow",38:"up arrow",39:"right arrow",40:"down arrow",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"left window key",92:"right window key",93:"select key",96:"numpad 0",97:"numpad 1",98:"numpad 2",99:"numpad 3",100:"numpad 4",101:"numpad 5",102:"numpad 6",103:"numpad 7",104:"numpad 8",105:"numpad 9",106:"multiply",107:"add",109:"subtract",110:"decimal point",111:"divide",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"num lock",145:"scroll lock",186:"semi-colon",187:"equal sign",188:"comma",189:"dash",190:"period",191:"forward slash",192:"grave accent",219:"open bracket",220:"back slash",221:"close braket",222:"single quote"},mamekeymap:{1:"a",2:"b",3:"c",4:"d",5:"e",6:"f",7:"g",8:"h",9:"i",10:"k",11:"l",12:"l",13:"m",14:"n",15:"o",16:"p",17:"q",18:"r",19:"s",20:"t",21:"u",22:"v",23:"w",24:"x",25:"y",26:"z",27:"0",28:"1",29:"2",30:"3",31:"4",32:"5",33:"6",34:"7",35:"8",36:"9",37:"f1",38:"f2",39:"f3",40:"f4",41:"f5",42:"f6",43:"f7",44:"f8",45:"f9",46:"f10",47:"f11",48:"f12",57:"escape",59:"dash",60:"equal sign",61:"backspace",65:"enter",73:"space",74:"insert",75:"delete",76:"home",77:"end",80:"left",81:"right",82:"up",83:"down"},mamekeytype:(rt={7:"START1",8:"START2",9:"START3",10:"START4",17:"COIN1",18:"COIN2",19:"COIN3",20:"COIN4",30:"SERVICE1",31:"SERVICE2",32:"SERVICE3",33:"SERVICE4",34:"TILT1",35:"TILT2",36:"TILT3",37:"TILT4",38:"POWER_ON",39:"POWER_OFF",40:"SERVICE",41:"TILT",42:"INTERLOCK",43:"MEMORY_RESET",46:"START",47:"SELECT",51:"JOYSTICK_UP",52:"JOYSTICK_DOWN",53:"JOYSTICK_LEFT",54:"JOYSTICK_RIGHT",55:"JOYSTICKRIGHT_UP",56:"JOYSTICKRIGHT_DOWN",57:"JOYSTICKRIGHT_LEFT",58:"JOYSTICKRIGHT_RIGHT",59:"JOYSTICKLEFT_UP",60:"JOYSTICKLEFT_DOWN",61:"JOYSTICKLEFT_LEFT"},st(rt,"61","JOYSTICKLEFT_RIGHT"),st(rt,64,"BUTTON1"),st(rt,65,"BUTTON2"),st(rt,66,"BUTTON3"),st(rt,67,"BUTTON4"),st(rt,68,"BUTTON5"),st(rt,69,"BUTTON6"),st(rt,70,"BUTTON7"),st(rt,71,"BUTTON8"),st(rt,72,"BUTTON9"),st(rt,73,"BUTTON10"),st(rt,74,"BUTTON11"),st(rt,75,"BUTTON12"),st(rt,76,"BUTTON13"),st(rt,77,"BUTTON14"),st(rt,78,"BUTTON15"),st(rt,79,"BUTTON16"),st(rt,81,"MAHJONG_A"),st(rt,82,"MAHJONG_B"),st(rt,83,"MAHJONG_C"),st(rt,84,"MAHJONG_D"),st(rt,85,"MAHJONG_E"),st(rt,86,"MAHJONG_F"),st(rt,87,"MAHJONG_G"),st(rt,88,"MAHJONG_H"),st(rt,89,"MAHJONG_I"),st(rt,90,"MAHJONG_J"),st(rt,91,"MAHJONG_K"),st(rt,92,"MAHJONG_L"),st(rt,93,"MAHJONG_M"),st(rt,94,"MAHJONG_N"),st(rt,95,"MAHJONG_O"),st(rt,96,"MAHJONG_P"),st(rt,97,"MAHJONG_Q"),st(rt,98,"MAHJONG_KAN"),st(rt,99,"MAHJONG_PON"),st(rt,100,"MAHJONG_CHI"),st(rt,101,"MAHJONG_REACH"),st(rt,102,"MAHJONG_RON"),st(rt,103,"MAHJONG_FLIP_FLOP"),st(rt,104,"MAHJONG_BET"),st(rt,105,"MAHJONG_SCORE"),st(rt,106,"MAHJONG_DOUBLE_UP"),st(rt,107,"MAHJONG_BIG"),st(rt,108,"MAHJONG_SMALL"),st(rt,109,"MAHJONG_LAST_CHANCE"),st(rt,112,"HANAFUDA_A"),st(rt,113,"HANAFUDA_B"),st(rt,114,"HANAFUDA_C"),st(rt,115,"HANAFUDA_D"),st(rt,116,"HANAFUDA_E"),st(rt,117,"HANAFUDA_F"),st(rt,118,"HANAFUDA_G"),st(rt,119,"HANAFUDA_H"),st(rt,120,"HANAFUDA_YES"),st(rt,121,"HANAFUDA_NO"),st(rt,124,"GAMBLE_KEYIN"),st(rt,125,"GAMBLE_KEYOUT"),st(rt,126,"GAMBLE_SERVICE"),st(rt,127,"GAMBLE_BOOK"),st(rt,128,"GAMBLE_DOOR"),st(rt,129,"GAMBLE_PAYOUT"),st(rt,130,"GAMBLE_BET"),st(rt,131,"GAMBLE_DEAL"),st(rt,132,"GAMBLE_STAND"),st(rt,133,"GAMBLE_TAKE"),st(rt,134,"GAMBLE_D_UP"),st(rt,135,"GAMBLE_HALF"),st(rt,136,"GAMBLE_HIGH"),st(rt,137,"GAMBLE_LOW"),st(rt,138,"POKER_HOLD1"),st(rt,139,"POKER_HOLD2"),st(rt,140,"POKER_HOLD3"),st(rt,141,"POKER_HOLD4"),st(rt,142,"POKER_HOLD5"),st(rt,143,"POKER_CANCEL"),st(rt,144,"SLOT_STOP1"),st(rt,145,"SLOT_STOP2"),st(rt,146,"SLOT_STOP3"),st(rt,147,"SLOT_STOP4"),st(rt,148,"SLOT_STOP_ALL"),st(rt,152,"AD_STICK_X"),st(rt,153,"AD_STICK_Y"),st(rt,154,"AD_STICK_Z"),st(rt,155,"PADDLE"),st(rt,156,"PADDLE_V"),st(rt,157,"PEDAL"),st(rt,158,"PEDAL2"),st(rt,159,"PEDAL3"),st(rt,160,"LIGHTGUN_X"),st(rt,161,"LIGHTGUN_Y"),st(rt,162,"POSITIONAL"),st(rt,163,"POSITIONAL_V"),st(rt,165,"DIAL"),st(rt,166,"DIAL_V"),st(rt,167,"TRACKBALL_X"),st(rt,168,"TRACKBALL_Y"),st(rt,169,"MOUSE_X"),st(rt,170,"MOUSE_Y"),rt),gamepad:null,allowCheat:!1,connection:null,connected:!1,playerName:"",players:[],roomMaster:null,coreOptionData:{},currentFrame:0,wait:!1,progressHelper:{},icons:{lock:'<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="lock" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-lock fa-w-14 fa-3x"><path fill="currentColor" d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z" class=""></path></svg>',chat:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 32C114.6 32 .0272 125.1 .0272 240c0 49.63 21.35 94.98 56.97 130.7c-12.5 50.37-54.27 95.27-54.77 95.77c-2.25 2.25-2.875 5.734-1.5 8.734C1.979 478.2 4.75 480 8 480c66.25 0 115.1-31.76 140.6-51.39C181.2 440.9 217.6 448 256 448c141.4 0 255.1-93.13 255.1-208S397.4 32 256 32z"/></svg>'},loadRoomsListTimer:null,loadRoomsList:function(){},stopLoadRooms:function(){ct.loadRoomsListTimer&&clearTimeout(ct.loadRoomsListTimer)},openRoom:function(){},isPaused:null,setVolume:null,setVariable:null,simulateInput:null,simulateInputFn:null,toggleShader:null,saveState:null,loadState:null,quickSaveState:null,quickLoadState:null,getScreenData:null,getStateInfo:null,setCheat:null,resetCheat:null,getDiskNum:null,setDisk:null,ejectDisk:null,getGameCoreOptions:null,stateSupported:!1,saveSavFiles:null,contentCrc32:null,netPlayHost:null,netPlayClient:null,netPlayClose:null,netplayNewUser:null,netplayPushData:null,netPlayString:null,netPlayIsHost:!1,netPlayUsers:["",""],netPlayPassword:null,romcrc32:"",_netPlayConnected:!1,netPlayDialogOpened:!1,netPlayConnectChange:function(){},classNames:{"dialog-container":J("dialog-container"),tabs:J("tabs"),"dialog-title":J("dialog-title"),"dialog-content":J("dialog-content"),"dialog-buttons":J("dialog-buttons"),gamepad:J("gamepad"),"gamepad-name":J("gamepad-name"),"gamepad-remapping-axis":J("gamepad-remapping-axis"),overlay:J("overlay"),"key-setting-popup":J("key-setting-popup"),"tabs-panel":J("tabs-panel"),"tabs-content":J("tabs-content"),"button-container":J("button-container"),set:J("set"),active:J("active"),"btn-cancel":J("btn-cancel"),"btn-create":J("btn-create"),"btn-submit":J("btn-submit"),"btn-join-room":J("btn-join-room"),"btn-quit":J("btn-quit"),"btn-create-room":J("btn-create-room"),"netplay-player-name":J("netplay-player-name"),"netplay-roomlist":J("netplay-roomlist"),"netplay-room-name-input":J("netplay-room-name-input"),"netplay-room-password-input":J("netplay-room-password-input"),"netplay-create-room-set":J("netplay-create-room-set"),"netplay-room":J("netplay-room"),modal:J("modal"),modal__overlay:J("modal__overlay"),modal__container:J("modal__container"),modal__header:J("modal__header"),modal__title:J("modal__title"),modal__close:J("modal__close"),modal__content:J("modal__content"),modal__btn:J("modal__btn"),"modal__btn-primary":J("modal__btn-primary"),"micromodal-slide":J("micromodal-slide"),modal__errmsg:J("modal__errmsg"),modal__footer:J("modal__footer"),"cheats-add":J("cheats-add"),"cheats-list":J("cheats-list"),"cheat-code-input":J("cheat-code-input"),"cheat-name-input":J("cheat-name-input"),"ejs-switch":J("ejs-switch"),"ejs-delete-cheat":J("ejs-delete-cheat"),"controls-toggle":J("ejs--controls-toggle")},initShaders:function(){for(var e=ye,t=Object.keys(e),n="",r=0;r<t.length;r+=1)n=e[t[r]],He.FS.writeFile("/shader/".concat(t[r]),n),ut.storage.get("shader")===t[r]&&He.FS.writeFile("/shader/shader.glslp",n)},setGamepadDialog:function(){var e=this;e.elements.dialogs.gamepad.innerHTML='\n        <div class="'.concat(ct.classNames["dialog-container"],'">\n            <div class="').concat(ct.classNames["dialog-title"],'">\n                <h4>Controls Settings</h4>\n            </div>\n            \n            <ul class="').concat(ct.classNames.tabs,'" id="controls-tabs">\n                <li class="tabs-title" role="presentation"><a href="#" onclick="return false" role="tab" aria-controls="controls-0" aria-selected="false" id="controls-0-label">Player 1</a></li>\n                <li class="tabs-title" role="presentation"><a href="#" onclick="return false" role="tab" aria-controls="controls-1" aria-selected="false" id="controls-1-label">Player 2</a></li>\n                <li class="tabs-title" role="presentation"><a href="#" onclick="return false" role="tab" aria-controls="controls-2" aria-selected="false" id="controls-2-label">Player 3</a></li>\n                <li class="tabs-title" role="presentation"><a href="#" onclick="return false" role="tab" aria-controls="controls-3" aria-selected="false" id="controls-3-label">Player 4</a></li>\n            </ul>\n            <div class="').concat(ct.classNames["dialog-content"],'">\n            <div class="').concat(ct.classNames["tabs-content"],' controls">\n                \n            </div>\n            </div>\n            <div class="').concat(ct.classNames["dialog-buttons"],'">\n                <a href="#" onclick="return false" class="').concat(ct.classNames["btn-submit"],'">Update</a>\n                <a href="#" onclick="return false" class="').concat(ct.classNames["btn-cancel"],'">Cancel</a>\n            </div>\n            <div class="').concat(ct.classNames.overlay,'" hidden>\n                <div class="').concat(ct.classNames["key-setting-popup"],'">\n                    <span>[Select]</span><br />\n                    <div style="color:#fff !important">Press keyboard or gamepad</div>\n                </div>\n            </div>\n        </div>\n        ');var t='\n        <div class="'.concat(ct.classNames["tabs-panel"],'" id="controls-{index}" hidden>\n            <div>\n                <div style="">\n                    <div class="').concat(ct.classNames.gamepad,'">Connected gamepad: <span class="').concat(ct.classNames["gamepad-name"],'">None detected</span></div>\n                    <div class="').concat(ct.classNames["gamepad-remapping-axis"],'" hidden><input type="checkbox" value="1" id="remapping-axis-{index}" /><label for="remapping-axis-{index}">Remapping left axis to D-Pad</label></div>\n                </div>\n                <div style="width:25%;float:left">&nbsp;</div>\n                <div style="font-size:12px;width:50%;float:left">\n                    <div class="row">\n                        <div style="text-align:center;width:50%;float:left">Gamepad</div>\n                        <div style="text-align:center;width:50%;float:left">Keyboard</div>\n                    </div>\n                </div>\n                <div style="clear:both"></div>\n            </div>\n        </div>'),n='\n        <div class="'.concat(ct.classNames["button-container"],'" data-id="{id}" data-index="{index}" data-label="{label}" style="margin-bottom:5px">\n            <div style="width:25%;float:left;font-size:12px">\n                <label>{label}:</label>\n            </div>\n            <div style="width:50%;float:left">\n                <div>\n                    <div style="width:50%;float:left;padding: 0 5px;">\n                        <input style="text-align:center;height:25px;width: 100%;" type="text" data-id="{id}" data-value="" data-type="2" data-index="{index}" readonly="" placeholder="">\n                    </div>\n                    <div style="width:50%;float:left;padding: 0 5px;">\n                        <input style="text-align:center;height:25px;width: 100%;" type="text" data-id="{id}" data-value="" data-type="1" data-index="{index}" readonly="" placeholder="">\n                    </div>\n                    <div style="clear:both"></div>\n                </div>\n            </div>\n            <div style="width:25%;float:left">\n                <a class="').concat(ct.classNames.set,'" href="#" onclick="return false">Set</a>\n            </div>\n            <div style="clear:both"></div>\n        </div>'),r={0:"B",1:"Y",2:"SELECT",3:"START",4:"UP",5:"DOWN",6:"LEFT",7:"RIGHT",8:"A",9:"X",10:"L",11:"R",12:"L2",13:"R2",14:"L3",15:"R3",19:"L STICK UP",18:"L STICK DOWN",17:"L STICK LEFT",16:"L STICK RIGHT",23:"R STICK UP",22:"R STICK DOWN",21:"R STICK LEFT",20:"R STICK RIGHT"};He.arcadeCores.includes(e.system)&&(r[2]="INSERT COIN"),"nds"===e.system&&(r[14]="Microphone"),"nes"===e.system&&(delete r[10],delete r[11],delete r[12],delete r[13],delete r[14],delete r[15],delete r[16],delete r[17],delete r[18],delete r[19],delete r[20],delete r[21],delete r[22],delete r[23]),"snes"===e.system&&(delete r[12],delete r[13],delete r[14],delete r[15],delete r[16],delete r[17],delete r[18],delete r[19],delete r[20],delete r[21],delete r[22],delete r[23]),"fmsx"===e.system&&(r={0:"Enter",1:"M",2:"F4",3:"F1",4:"Arrow Up",5:"Arrow Down",6:"Arrow Left",7:"Arrow Right",8:"Space",9:"N",10:"F2",11:"F3",12:"Graph",13:"Ctrl",14:"F5",15:"Escape"});var o=[];He.buttonMaps&&(o=He.buttonMaps);var a=[2,3,4,5,6,7,8,0,9,1,10,11,12,13,14,15,19,18,17,16,23,22,21,20];if(e.system,Array.isArray(o)&&o.length>0||g(o)){var i=e.elements.container.querySelectorAll("#controls-tabs li");if(i.forEach((function(e){U(e,!0)})),g(o)){var s=[];Object.keys(o).forEach((function(e,t){s.push(o[e])})),o=s}o.forEach((function(r,s){i[s]&&U(i[s],!1);var c=o[s];e.elements.dialogs.gamepad.querySelector(".".concat(ct.classNames["tabs-content"])).innerHTML+=t.replace(/{index}/g,s),a.forEach((function(t){c[t]&&(e.elements.dialogs.gamepad.querySelector("#controls-".concat(s)).innerHTML+=n.replace(/{index}/g,s).replace(/{id}/g,t).replace(/{label}/g,"object"==it(c[t])?c[t].text:c[t]))})),e.elements.dialogs.gamepad.querySelector('[data-id="16"][data-index="'.concat(s,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="16"][data-index="'.concat(s,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="17"][data-index="'.concat(s,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="17"][data-index="'.concat(s,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="18"][data-index="'.concat(s,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="18"][data-index="'.concat(s,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="19"][data-index="'.concat(s,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="19"][data-index="'.concat(s,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="20"][data-index="'.concat(s,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="20"][data-index="'.concat(s,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="21"][data-index="'.concat(s,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="21"][data-index="'.concat(s,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="22"][data-index="'.concat(s,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="22"][data-index="'.concat(s,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="23"][data-index="'.concat(s,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="23"][data-index="'.concat(s,'"][data-type="2"]')).style.backgroundColor="#ccc")}))}else for(var c=function(o){e.elements.dialogs.gamepad.querySelector(".".concat(ct.classNames["tabs-content"])).innerHTML+=t.replace(/{index}/g,o),a.forEach((function(t){r[t]&&(e.elements.dialogs.gamepad.querySelector("#controls-".concat(o)).innerHTML+=n.replace(/{index}/g,o).replace(/{id}/g,t).replace(/{label}/g,r[t]))})),e.elements.dialogs.gamepad.querySelector('[data-id="16"][data-index="'.concat(o,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="16"][data-index="'.concat(o,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="17"][data-index="'.concat(o,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="17"][data-index="'.concat(o,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="18"][data-index="'.concat(o,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="18"][data-index="'.concat(o,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="19"][data-index="'.concat(o,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="19"][data-index="'.concat(o,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="20"][data-index="'.concat(o,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="20"][data-index="'.concat(o,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="21"][data-index="'.concat(o,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="21"][data-index="'.concat(o,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="22"][data-index="'.concat(o,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="22"][data-index="'.concat(o,'"][data-type="2"]')).style.backgroundColor="#ccc"),e.elements.dialogs.gamepad.querySelector('[data-id="23"][data-index="'.concat(o,'"][data-type="2"]'))&&(e.elements.dialogs.gamepad.querySelector('[data-id="23"][data-index="'.concat(o,'"][data-type="2"]')).style.backgroundColor="#ccc")},l=0;l<=3;l+=1)c(l);Object.keys(ct.controllers).forEach((function(t){ct.controllers[t]&&Object.keys(ct.controllers[t]).forEach((function(n){var r=e.elements.dialogs.gamepad.querySelector('[data-id="'.concat(n,'"][data-index="').concat(t,'"][data-type="1"]')),o=e.elements.dialogs.gamepad.querySelector('[data-id="'.concat(n,'"][data-index="').concat(t,'"][data-type="2"]'));if(!r||!o)return!1;var a=ct.controllers[t][n];if(a&&(a.type&&1!==parseInt(a.type,10)?o.value="":a.value&&(r.value=ct.keyMap[a.value],r.setAttribute("data-value",a.value)),a.value2)){var i=ve.Gamepad.StandardButtons[a.value2];i||(i="button ".concat(parseInt(a.value2,10)+1)),o.value=i,o.setAttribute("data-value",a.value2)}}))}));var u=e.elements.dialogs.gamepad.querySelectorAll("input[type=checkbox]");Array.from(u).forEach((function(t){var n=t.getAttribute("id").replace("remapping-axis-","");ct.remappingAxis[n]?t.setAttribute("checked",!0):t.removeAttribute("checked"),P.call(e,t,"change",(function(e){ct.remappingAxis[n]=t.checked?1:0}))})),P.call(this,e.elements.dialogs.gamepad.querySelector(".".concat(ct.classNames["btn-submit"])),"click",(function(t){var n=e.elements.dialogs.gamepad.querySelectorAll("input[type=text]"),r={};Array.from(n).forEach((function(e){var t,n=e.getAttribute("data-index"),o=e.getAttribute("data-value");2===parseInt(e.getAttribute("data-type"),10)&&(t=e.getAttribute("data-value"));var a=e.getAttribute("data-id");r[n]||(r[n]={}),r[n][a]||(r[n][a]={}),o&&(r[n][a].value=o),t&&(r[n][a].value2=t)})),ut.storage.set({controllers:r}),ct.controllers=r;var o={},a=e.elements.dialogs.gamepad.querySelectorAll("input[type=checkbox]");return Array.from(a).forEach((function(e){var t=e.getAttribute("id").replace("remapping-axis-","");o[t]=e.checked?1:0})),ut.storage.set({remappingAxis:o}),ct.remappingAxis=o,U(e.elements.dialogs.gamepad,!0),e.elements.container.focus(),t.stopPropagation(),!1})),P.call(this,e.elements.dialogs.gamepad.querySelector(".".concat(ct.classNames["btn-cancel"])),"click",(function(t){return U(e.elements.dialogs.gamepad,!0),e.elements.container.focus(),t.stopPropagation(),!1})),Array.from(e.elements.dialogs.gamepad.querySelectorAll(".".concat(ct.classNames.tabs," li"))).forEach((function(t){P.call(e,t,"mousedown",(function(n){G(e.elements.dialogs.gamepad.querySelectorAll(".".concat(ct.classNames.tabs," li")),ct.classNames.active,!1),G(t,ct.classNames.active,!0);var r=t.querySelector("a").getAttribute("aria-controls");return Array.from(e.elements.dialogs.gamepad.querySelectorAll(".".concat(ct.classNames["tabs-content"]," .").concat(ct.classNames["tabs-panel"]))).forEach((function(e){U(e,!0)})),U(e.elements.dialogs.gamepad.querySelector(".".concat(ct.classNames["tabs-content"]," #").concat(r)),!1),n.stopPropagation(),!1}))})),I.call(e,e.elements.dialogs.gamepad.querySelector('[aria-controls="controls-0"]').parentNode,"mousedown");var d=e.elements.dialogs.gamepad.querySelector(".".concat(ct.classNames.overlay));P.call(e,d,"mousedown",(function(e){U(d,!0),e.stopPropagation()})),Array.from(e.elements.dialogs.gamepad.querySelectorAll(".".concat(ct.classNames["button-container"]))).forEach((function(t){P.call(e,t,"mousedown",(function(n){I.call(e,t.querySelector("a.".concat(ct.classNames.set)),n.type,!0,{})}))})),Array.from(e.elements.dialogs.gamepad.querySelectorAll(".".concat(ct.classNames["tabs-panel"]," a.").concat(ct.classNames.set))).forEach((function(t){P.call(e,t,"mousedown",(function(e){var n=t.parentNode.parentNode,r=n.getAttribute("data-id"),o=n.getAttribute("data-index"),a=n.getAttribute("data-label");U(d,!1),d.setAttribute("data-id",r),d.setAttribute("data-index",o);var i="[ ".concat(a," ]");ct.gamepad.gamepads[o]&&r<16?i+='<br /><span style="font-size:12px">Gamepad:'.concat(ct.gamepad.gamepads[o].id,"</span><br />Press keyboard or gamepad"):i+="<br />Press keyboard",d.querySelector(".".concat(ct.classNames["key-setting-popup"])).innerHTML=i,e.stopPropagation()}))}))},setCacheDialog:function(){var e=this;e.elements.dialogs.cache.innerHTML='\n        <div class="'.concat(ct.classNames["dialog-container"],'">\n            <div class="').concat(ct.classNames["dialog-title"],'">\n                <h4>Cache Manager</h4>\n            </div>\n            <div class="').concat(ct.classNames["dialog-content"],'">\n\n            </div>\n            <div class="').concat(ct.classNames["dialog-buttons"],'">\n                <a href="#" onclick="return false" class="').concat(ct.classNames["btn-cancel"],'">Close</a>\n            </div>\n        </div>\n        '),P.call(this,e.elements.dialogs.cache.querySelector(".".concat(ct.classNames["btn-cancel"])),"click",(function(t){return U(e.elements.dialogs.cache,!0),e.elements.container.focus(),t.stopPropagation(),!1})),P.call(this,e.elements.dialogs.cache.querySelector(".".concat(ct.classNames["dialog-title"]," a")),"click",(function(t){return He.romdb&&(He.romdb.clear(),e.elements.dialogs.cache.querySelector(".".concat(ct.classNames["dialog-content"])).innerHTML='<div style="text-align:center">Empty</div>'),t.stopPropagation(),!1}))},showLoading:function(e){$e.show("modal-6ed698f3d04061f5",{closeByEsckey:!1}),this.elements.container.querySelector(".".concat(ct.classNames.modal__container)).innerText=e||"Loading...",U(this.elements.dialogs.loading,!1)},hideLoading:function(){$e.close(),U(this.elements.dialogs.loading,!0)},setLoadingDialog:function(){this.elements.dialogs.loading&&(this.elements.dialogs.loading.innerHTML='\n            <div class="'.concat(ct.classNames.modal," ").concat(ct.classNames["micromodal-slide"],'" id="modal-6ed698f3d04061f5" aria-hidden="true">\n                <div class="').concat(ct.classNames.modal__overlay,'" tabindex="-1">\n                <div class="').concat(ct.classNames.modal__container,'" role="dialog" aria-modal="true" aria-labelledby="modal-6ed698f3d04061f5-title">\n                Loading...\n                </div>\n                </div>\n            </div>'))},setCheatDialog:function(){var e=this;if(e.elements.dialogs.cheat){e.elements.dialogs.cheat.innerHTML='\n            <div class="'.concat(ct.classNames["dialog-container"],'">\n                <div class="').concat(ct.classNames["dialog-title"],'">\n                    <h4>Cheats</h4>\n                </div>\n                <div class="').concat(ct.classNames["dialog-content"],'">\n                    <div class="').concat(ct.classNames["cheats-list"],'">\n                        \n                    </div>\n                </div>\n                <div class="').concat(ct.classNames["dialog-buttons"],'">\n                    <a href="#" onclick="return false" class="').concat(ct.classNames["cheats-add"],'">Add Cheat</a>\n                    <a href="#" onclick="return false" class="').concat(ct.classNames["btn-submit"],'">OK</a>\n                    <a href="#" onclick="return false" class="').concat(ct.classNames["btn-cancel"],'">Close</a>\n                </div>\n            </div>\n\n            \n\n            <div class="').concat(ct.classNames.modal," ").concat(ct.classNames["micromodal-slide"],'" id="modal-85cd7a1c543a484b" aria-hidden="true">\n                <div class="').concat(ct.classNames.modal__overlay,'" tabindex="-1" >\n                <div class="').concat(ct.classNames.modal__container,'" style="width:100%" role="dialog" aria-modal="true" aria-labelledby="modal-85cd7a1c543a484b-title">\n                    <div class="').concat(ct.classNames.modal__header,'">\n                    <h2 class="').concat(ct.classNames.modal__title,'" id="modal-85cd7a1c543a484b-title">\n                    Add Cheat Code\n                    </h2>\n                    <button class="').concat(ct.classNames.modal__close,'" aria-label="Close modal" data-modal-close></button>\n                    </div>\n                    <main class="').concat(ct.classNames.modal__content,'" id="modal-85cd7a1c543a484b-content">\n\n                        <div class="').concat(ct.classNames.modal__errmsg,'"></div>\n                        <strong>Code</strong><br />\n                        <textarea style="width:100%;height:80px;" class="').concat(ct.classNames["cheat-code-input"],'"></textarea><br />\n                        <strong>Description</strong><br />\n                        <input type="text" class="').concat(ct.classNames["cheat-name-input"],'" /><br />\n\n                    </main>\n                    <footer class="').concat(ct.classNames.modal__footer,'">\n                    <button class="').concat(ct.classNames.modal__btn," ").concat(ct.classNames["modal__btn-primary"],'">Submit</button>\n                    <button class="').concat(ct.classNames.modal__btn,'" data-modal-close aria-label="Close">Close</button>\n                    </footer>\n                </div>\n                </div>\n            </div>\n            ');var t=e.elements.dialogs.cheat.querySelector("#modal-85cd7a1c543a484b");P.call(this,e.elements.dialogs.cheat.querySelector(".".concat(ct.classNames["cheats-add"])),"click",(function(e){return $e.show("modal-85cd7a1c543a484b",{closeByEsckey:!1,closeTrigger:"data-modal-close"}),!1}));var n=e.elements.dialogs.cheat.querySelector(".".concat(ct.classNames["cheats-list"]));P.call(this,t.querySelector(".".concat(ct.classNames["modal__btn-primary"])),"click",(function(r){var o=t.querySelector(".".concat(ct.classNames["cheat-name-input"])).value,a=t.querySelector(".".concat(ct.classNames["cheat-code-input"])).value;if(o&&a){var i=n.querySelectorAll("input:checked");t.querySelector(".".concat(ct.classNames["cheat-name-input"])).value="",t.querySelector(".".concat(ct.classNames["cheat-code-input"])).value="",$e.close();var s=e.cheats.length;e.cheats.push([o,a]),n.innerHTML+='<div class="'.concat(ct.classNames["ejs-switch"],'">\n                            <input type="checkbox" value="').concat(s,'" id="ejs-cheat-switch-').concat(s,'">\n                            <label for="ejs-cheat-switch-').concat(s,'">').concat(o,'</label>\n                            <a href="#" data-idx="').concat(s,'" onclick="return false" class="').concat(ct.classNames["ejs-delete-cheat"],'">&times;</a>\n                        </div>'),i.forEach((function(e,t){n.querySelector("#ejs-cheat-switch-".concat(t)).setAttribute("checked","checked")}))}return e.storageSupported&&localStorage.setItem("".concat(e.system,"-").concat(e.startName,"-cheats"),JSON.stringify(e.cheats)),r.stopPropagation(),!1}));var r=function(){if(e.storageSupported){var t=localStorage.getItem("".concat(e.system,"-").concat(e.startName,"-cheats"));try{t=JSON.parse(t)}catch(e){}t&&(e.cheats=t)}n.innerHTML="",e.cheats&&Array.isArray(e.cheats)&&e.cheats.forEach((function(e,t){var r=e[0];e[1],n.innerHTML+='<div class="'.concat(ct.classNames["ejs-switch"],'">\n                                <input type="checkbox" value="').concat(t,'" id="ejs-cheat-switch-').concat(t,'">\n                                <label for="ejs-cheat-switch-').concat(t,'">').concat(r,'</label>\n                                <a href="#" data-idx="').concat(t,'" onclick="return false" class="').concat(ct.classNames["ejs-delete-cheat"],'">&times;</a>\n                            </div>')}))};P.call(e,n,"click",(function(t){if(t.target&&t.target.classList.contains(ct.classNames["ejs-delete-cheat"])&&t.target.getAttribute("data-idx")){var o=t.target.getAttribute("data-idx");e.cheats.splice(o,1),e.storageSupported&&localStorage.setItem("".concat(e.system,"-").concat(e.startName,"-cheats"),JSON.stringify(e.cheats));var a=[];n.querySelectorAll("input").forEach((function(e,t){a[t]=!!n.querySelector("#ejs-cheat-switch-".concat(t,":checked"))})),a.splice(o,1),r(),a.forEach((function(e,t){e&&n.querySelector("#ejs-cheat-switch-".concat(t)).setAttribute("checked","checked")}))}return t.stopPropagation(),!1})),P.call(e,e.elements.container,"start-game",(function(e){r()})),P.call(this,e.elements.dialogs.cheat.querySelector(".".concat(ct.classNames["btn-cancel"])),"click",(function(t){return U(e.elements.dialogs.cheat,!0),t.stopPropagation(),e.elements.container.focus(),!1})),P.call(this,e.elements.dialogs.cheat.querySelector(".".concat(ct.classNames["btn-submit"])),"click",(function(t){return ct.resetCheat(),n.querySelectorAll("input:checked").forEach((function(t,n){var r=e.cheats[t.value];r&&ct.setCheat(n,1,r[1])})),U(e.elements.dialogs.cheat,!0),e.elements.container.focus(),!1})),He.arcadeCores.includes(e.system)&&(ct.allowCheat=!1),ct.setCheat||(ct.allowCheat=!1),ct.allowCheat||S(e.elements.buttons.cheat)&&e.elements.buttons.cheat.remove()}},setNetplayDialog:function(){var e=this,t=this;if(!ct.netPlayHost||!ut.supportNetPlay.call(this))return S(t.elements.buttons.netplay)&&(t.elements.buttons.netplay.remove(),ut.fixMenuPos.call(t)),!1;if(t.elements.dialogs.netplay){t.elements.dialogs.netplay.innerHTML='\n            <div class="'.concat(ct.classNames["dialog-container"],'">\n                <div class="').concat(ct.classNames["dialog-title"],'">\n                    <h4>Netplay</h4>\n                </div>\n                <div class="').concat(ct.classNames["dialog-content"],'">\n                    <div class="').concat(ct.classNames["netplay-roomlist"],'" hidden>\n                        <strong>Rooms</strong>\n                        <table style="width:100%" cellspacing=0>\n                            <thead>\n                                <tr>\n                                    <td>Server</td>\n                                    <td>Room Name</td>\n                                    <td>Players</td>\n                                    <td></td>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                <tr>\n                                    <td></td>\n                                    <td></td>\n                                    <td></td>\n                                    <td></td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n\n                    <div class="').concat(ct.classNames["netplay-room"],'" hidden>\n                        <strong>Room Name</strong>\n                        <div data-room-password>Password: <span></span></div>\n                        <table style="width:calc(100% - 20px)" cellspacing="0">\n                            <thead>\n                            <tr>\n                                <td>Player</td>\n                                <td>Name</td>\n                                <td></td>\n                            </tr>\n                            </thead>\n                            <tbody>\n                            <tr>\n                                <td>1</td>\n                                <td>Name 1</td>\n                                <td></td>\n                            </tr>\n                            <tr>\n                                <td>2</td>\n                                <td>Name 2</td>\n                                <td></td>\n                            </tr>\n                            <tr>\n                                <td>3</td>\n                                <td>Name 3</td>\n                                <td></td>\n                            </tr>\n                            <tr>\n                                <td>4</td>\n                                <td>Name 4</td>\n                                <td></td>\n                            </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                </div>\n                <div class="').concat(ct.classNames["dialog-buttons"],'">\n                    <a href="#" onclick="return false" class="').concat(ct.classNames["btn-quit"],'">Quit Room</a>\n                    <a href="#" onclick="return false" class="').concat(ct.classNames["btn-create-room"],'">Create a Room</a>\n                    <a href="#" onclick="return false" class="').concat(ct.classNames["btn-cancel"],'">Close</a>\n                </div>\n            </div>\n\n            \n            <div class="').concat(ct.classNames.modal," ").concat(ct.classNames["micromodal-slide"],'" id="modal-9de6c4e9ce2b9361" aria-hidden="true">\n                <div class="').concat(ct.classNames.modal__overlay,'" tabindex="-1">\n                <div class="').concat(ct.classNames.modal__container,'" role="dialog" aria-modal="true" aria-labelledby="modal-9de6c4e9ce2b9361-title">\n                    <div class="').concat(ct.classNames.modal__header,'">\n                    <h2 class="').concat(ct.classNames.modal__title,'" id="modal-9de6c4e9ce2b9361-title">\n                        Set Player Name\n                    </h2>\n                    </div>\n                    <main class="').concat(ct.classNames.modal__content,'" id="modal-9de6c4e9ce2b9361-content">\n\n                        <div class="').concat(ct.classNames.modal__errmsg,'"></div>\n                        <strong>Player Name</strong><br />\n                        <input type="text" maxlength="10" class="').concat(ct.classNames["netplay-player-name"],'" /><br />\n\n                    </main>\n                    <footer class="').concat(ct.classNames.modal__footer,'">\n                    <button class="').concat(ct.classNames.modal__btn," ").concat(ct.classNames["modal__btn-primary"],'">Submit</button>\n                    </footer>\n                </div>\n                </div>\n            </div>\n            \n            <div class="').concat(ct.classNames.modal," ").concat(ct.classNames["micromodal-slide"],'" id="modal-85cd7a1c543a484a" aria-hidden="true">\n                <div class="').concat(ct.classNames.modal__overlay,'" tabindex="-1">\n                <div class="').concat(ct.classNames.modal__container,'" role="dialog" aria-modal="true" aria-labelledby="modal-85cd7a1c543a484a-title">\n                    <div class="').concat(ct.classNames.modal__header,'">\n                        <h2 class="').concat(ct.classNames.modal__title,'" id="modal-85cd7a1c543a484a-title">\n                        Create a Room\n                        </h2>\n                        <button class="').concat(ct.classNames.modal__close,'" aria-label="Close modal" data-modal-close></button>\n                    </div>\n                    <main class="').concat(ct.classNames.modal__content,'" id="modal-85cd7a1c543a484a-content">\n\n                        <div class="').concat(ct.classNames.modal__errmsg,'"></div>\n                        <div><strong>Room Name</strong></div>\n                        <div><input type="text" maxlength="20" class="').concat(ct.classNames["netplay-room-name-input"],'" /></div>\n                        <div><strong>Server</strong></div>\n                        <div><select data-server></select></div>\n                        <div><strong>Max Players</strong></div>\n                        <div>\n                            <select data-max-players>\n                                <option value="2">2</option>\n                                <option value="3">3</option>\n                                <option value="4">4</option>\n                            </select>\n                        </div>\n                        <div><strong>Password (Optional)</strong></div>\n                        <div><input type="text" maxlength="10" class="').concat(ct.classNames["netplay-room-password-input"],'" /></div>\n\n                    </main>\n                    <footer class="').concat(ct.classNames.modal__footer,'">\n                    <button class="').concat(ct.classNames.modal__btn," ").concat(ct.classNames["modal__btn-primary"],'">Submit</button>\n                    <button class="').concat(ct.classNames.modal__btn,'" data-modal-close aria-label="Close">Close</button>\n                    </footer>\n                </div>\n                </div>\n            </div>\n            \n            <div class="').concat(ct.classNames.modal," ").concat(ct.classNames["micromodal-slide"],'" id="modal-5aa765d61d8327de" aria-hidden="true">\n                <div class="').concat(ct.classNames.modal__overlay,'" tabindex="-1" data-modal-close>\n                <div class="').concat(ct.classNames.modal__container,'" role="dialog" aria-modal="true" aria-labelledby="modal-5aa765d61d8327de-title">\n                    <div class="').concat(ct.classNames.modal__header,'">\n                    <h2 class="').concat(ct.classNames.modal__title,'" id="modal-5aa765d61d8327de-title">\n                        Password\n                    </h2>\n                    <button class="').concat(ct.classNames.modal__close,'" aria-label="Close modal" data-modal-close></button>\n                    </div>\n                    <main class="').concat(ct.classNames.modal__content,'" id="modal-5aa765d61d8327de-content">\n\n                        <div class="').concat(ct.classNames.modal__errmsg,'"></div>\n                        <input type="text" maxlength="10" class="').concat(ct.classNames["netplay-room-password-input"],'" /><br />\n\n                    </main>\n                    <footer class="').concat(ct.classNames.modal__footer,'">\n                    <button class="').concat(ct.classNames.modal__btn," ").concat(ct.classNames["modal__btn-primary"],'">Submit</button>\n                    <button class="').concat(ct.classNames.modal__btn,'" data-modal-close aria-label="Close">Close</button>\n                    </footer>\n                </div>\n                </div>\n            </div>\n            \n            \n            <div class="').concat(ct.classNames.modal," ").concat(ct.classNames["micromodal-slide"],'" id="modal-7d8fd50ed642340b" aria-hidden="true">\n                <div class="').concat(ct.classNames.modal__overlay,'" tabindex="-1" data-modal-close>\n                <div class="').concat(ct.classNames.modal__container,'" role="dialog" aria-modal="true" aria-labelledby="modal-7d8fd50ed642340b-title">\n                    <div class="').concat(ct.classNames.modal__header,'">\n                    <h2 class="').concat(ct.classNames.modal__title,'" id="modal-7d8fd50ed642340b-title"></h2>\n                    <button class="').concat(ct.classNames.modal__close,'" aria-label="Close modal" data-modal-close></button>\n                    </div>\n                    <main class="').concat(ct.classNames.modal__content,'" id="modal-7d8fd50ed642340b-content">\n                        \n                    </main>\n                    <footer class="').concat(ct.classNames.modal__footer,'">\n                    <button class="').concat(ct.classNames.modal__btn," ").concat(ct.classNames["modal__btn-primary"],'" data-modal-close>OK</button>\n                    </footer>\n                </div>\n                </div>\n            </div>\n            \n            ');var n,r=t.elements.dialogs.netplay.querySelector("#modal-9de6c4e9ce2b9361"),o=t.elements.dialogs.netplay.querySelector("#modal-85cd7a1c543a484a"),a=t.elements.dialogs.netplay.querySelector("#modal-7d8fd50ed642340b"),i=t.elements.dialogs.netplay.querySelector("#modal-5aa765d61d8327de"),s=null;if(ct.netplayNewUser){P.call(this,t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["btn-cancel"])),"click",(function(e){return U(t.elements.dialogs.netplay,!0),ct.netPlayDialogOpened=!1,ct.stopLoadRooms(),e.stopPropagation(),t.elements.container.focus(),!1}));var c,l=function(){U(t.elements.widgets.netplay,!1);var e=t.elements.widgets.netplay.querySelector(J("netplay-players",1)),n=t.elements.widgets.netplay.querySelector(J("chat-toggle",1)),r=t.elements.widgets.netplay.querySelector(J("chat-box",1));e||(e=D("ul",{class:J("netplay-players")}),t.elements.widgets.netplay.appendChild(e)),n||((n=D("div",{class:J("chat-toggle")})).innerHTML="".concat(ct.icons.chat,' <span class="').concat(J("chat-count"),'">0</span>'),t.elements.widgets.netplay.appendChild(n),P.call(t,n,"click",(function(e){G(t.elements.widgets.netplay,J("with-chat-box")),n.querySelector(J("chat-count",1)).innerText="0"}))),r||((r=D("div",{class:J("chat-box")})).innerHTML='\n                            <div class="'.concat(J("chat-messages"),'">\n                                <ul></ul>\n                            </div>\n                            <div class="').concat(J("chat-input"),'">\n                                <textarea maxlength="100"></textarea>\n                                <button type="button">Send</button>\n                            </div>'),t.elements.widgets.netplay.appendChild(r),P.call(t,r.querySelector("textarea"),"keydown keyup",(function(e){return("keydown"!=e.type||13!=e.keyCode)&&("keyup"==e.type&&13==e.keyCode?(I.call(t,r.querySelector("button"),"click"),!1):void e.stopPropagation())})),P.call(t,r.querySelector("button"),"click",(function(e){if(ct.connected){var t=r.querySelector("textarea").value.trim();if(r.querySelector("textarea").value="",t){var n=r.querySelector(".".concat(J("chat-messages")," ul")),o=D("li",{});o.innerHTML="<strong>".concat(ct.playerName,"</strong> (You) : ").concat(t),n.appendChild(o);var a=n.querySelectorAll("li");a.length>50&&n.removeChild(a[0]),a=null,ct.connection?ct.connection.send(JSON.stringify({type:"chat",content:t.substring(0,100)})):s.send(JSON.stringify({type:"chat",content:t.substring(0,100),from:ct.playerName})),r.querySelector(J("chat-messages",1)).scroll(0,n.clientHeight),r.querySelector("textarea").focus()}}e.stopPropagation()})));var o="";if(ct.connection)ct.players.forEach((function(e,t){var n=null;if(e){ct.connection.peers[e]?n=ct.connection.peers[e].extra:ct.connection.userid===e&&(n=ct.connection.extra);var r=n.country?'<i class="ejs-flag ejs-flag-'.concat(n.country.toLocaleLowerCase(),'"></i>'):" ";o+="<li>".concat(t+1,". ").concat(n.name," ").concat(r,"</li>")}else o+="<li>".concat(t+1,". </li>")})),o+="",e.innerHTML=o;else{var a=t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["netplay-room"])).querySelector("tbody");a.innerHTML="",ct.netPlayUsers.forEach((function(e,t){if(e){var n=document.createElement("tr");n.innerHTML="<td>".concat(t+1,"</td><td>").concat(e,"</td><td></td>"),a.appendChild(n)}})),o="<ul>",ct.netPlayUsers.forEach((function(e,t){o+="<li>".concat(t+1,". ").concat(e,"</li>")})),o+="</ul>",e.innerHTML=o}},u="https://lobby.emulatorjs.com",d=function(e){var n,r,o=e.data;if("object"==it(o)&&o.arrayBuffer)(n=regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.arrayBuffer();case 2:t=e.sent,n=new Uint8Array(t),r=He.Module._malloc(n.length*n.BYTES_PER_ELEMENT),He.Module.HEAPU8.set(n,r),He.Module.ccall("netplay_push_data","number",["number","number"],[r,n.byteLength]),He.Module._free(r);case 8:case"end":return e.stop()}}),e)})),r=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function i(e){at(a,r,o,i,s,"next",e)}function s(e){at(a,r,o,i,s,"throw",e)}i(void 0)}))},function(){return r.apply(this,arguments)})();else if("string"==typeof o){var a=null;try{a=JSON.parse(o)}catch(e){}if(a){if("chat"==a.type){var i=a.from,c=a.content;if(c){var u=t.elements.widgets.netplay.querySelector(".".concat(J("chat-messages")," ul")),d=D("li",{});d.innerHTML="<strong>".concat(i,"</strong> : ").concat(c),u.appendChild(d);var f=u.querySelectorAll("li");if(f.length>50&&u.removeChild(f[0]),f=null,t.elements.widgets.netplay.querySelector(J("chat-messages",1)).scroll(0,u.clientHeight),!t.elements.widgets.netplay.classList.contains(J("with-chat-box"))){var p=t.elements.widgets.netplay.querySelector(J("chat-count",1)).innerText;p=parseInt(p),p++,t.elements.widgets.netplay.querySelector(J("chat-count",1)).innerText=p}}}}else"n:"==o.substring(0,2)&&(ct.netplayNewUser(),ct.netPlayUsers[1]=decodeURIComponent(o.substring(2)),l(),ot.show(t.elements.container,decodeURIComponent(o.substring(2))+" joined")),"q:"==o.substring(0,2)&&(ct.netPlayIsHost?(ct.netPlayClose(),ct.netPlayHost(),ct.netPlayUsers[1]="",l(),ot.show(t.elements.container,decodeURIComponent(o.substring(2))+" quited")):s.close())}},f=function(){ct.hideLoading.call(t),ct.connected=!0,["n64","mupen64plus","mupen64plus2","mupen64plus-nx"].includes(t.system)||He.Module._fast_forward_2,U(t.elements.buttons.loadState,!0),U(t.elements.buttons.saveState,!0),ct.resetCheat(),U(t.elements.buttons.cheat,!0),U(ut.contextMenu.querySelectorAll("ul li").item(1),!0),U(ut.contextMenu.querySelectorAll("ul li").item(2),!0),Array.from(t.elements.buttons.play).forEach((function(e){U(e,!0)}));var e=t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["netplay-room"])),n=e.querySelector("[data-room-password]");null===ct.netPlayPassword?U(n,!0):(U(n,!1),n.querySelector("span").innerText=ct.netPlayPassword),e.querySelector("strong").innerText=ct.netPlayRoomname,l(),ut.updateCoreOptionMenuItems.call(t)},p=function(){ct.connected=!1,["n64","mupen64plus","mupen64plus2","mupen64plus-nx"].includes(t.system)||He.Module._fast_forward_2,ct.netPlayUsers=["",""],ct.netPlayClose(),ct.netPlayIsHost=!1,ct.hideLoading.call(t),U(t.elements.buttons.restart,!1),U(t.elements.buttons.loadState,!1),U(t.elements.buttons.saveState,!1),ct.allowCheat&&U(t.elements.buttons.cheat,!1),U(ut.contextMenu.querySelectorAll("ul li").item(1),!1),U(ut.contextMenu.querySelectorAll("ul li").item(2),!1),Array.from(t.elements.buttons.play).forEach((function(e){U(e,!1)})),ut.updateCoreOptionMenuItems.call(t);var e=t.elements.widgets.netplay.querySelector(".".concat(J("chat-messages")," ul"));e&&(e.innerHTML="");var n=t.elements.widgets.netplay.querySelector(J("netplay-players",1));n&&(n.innerHTML=""),U(t.elements.widgets.netplay,!0)},h=function(e,n,r){ct.showLoading.call(t),xe.a.post(u+"/join",{id:n,password:r,nickname:ct.playerName}).then((function(n){if(n){if(!n.data.room_id)throw n.data.error;var o=n.data.nicknames;o[1]&&(ct.playerName=o[1]),i.classList.remove(J("is-open")),c=He.servers[e].url,(s=new WebSocket(c+"room/"+n.data.room_id)).onopen=function(e){ct.hideLoading.call(t),s.send("n:".concat(encodeURIComponent(ct.playerName))),t.playing||Array.from(t.elements.buttons.play).forEach((function(e){I.call(t,e,"click")})),ct.netPlayClient(),ct.stopLoadRooms(),ct.openRoom(t),f()},s.onclose=function(e){ct.hideLoading.call(t),ct.loadRoomsList(),p(),1005!=e.code&&(a.querySelector("#modal-7d8fd50ed642340b-content").innerHTML="Error",$e.show("modal-7d8fd50ed642340b",{closeTrigger:"data-modal-close"}))},s.onmessage=function(e){d(e)},s.onerror=function(e){},ct.netPlayUsers[0]=o[0],ct.netPlayUsers[1]=o[1],ct.netPlayRoomname=n.data.room_name,ct.netPlayPassword=r,l()}})).catch((function(e){ct.hideLoading.call(t),a.querySelector("#modal-7d8fd50ed642340b-content").innerHTML="Error: "+("string"==typeof e?e:""),$e.show("modal-7d8fd50ed642340b",{closeTrigger:"data-modal-close"})}))},m=function(e){var n=e.target.getAttribute("data-id"),r=e.target.getAttribute("data-server");return"Y"===e.target.getAttribute("data-password")?($e.show("modal-5aa765d61d8327de",{closeTrigger:"data-modal-close"}),i.setAttribute("data-id",n),i.setAttribute("data-server",r)):(ct.showLoading.call(t),h(r,n,"")),e.stopPropagation(),!1};ct.loadRoomsList=function(){U(t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["netplay-roomlist"])),!1),U(t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["netplay-room"])),!0),U(t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["btn-create-room"])),!1),U(t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["btn-quit"])),!0);var n=t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["netplay-roomlist"])).querySelector("tbody");ct.netPlayString=encodeURIComponent(JSON.stringify({system:t.system,crc32:ct.romcrc32,romname:t.startName}));var r=u+"/list?q="+ct.netPlayString;xe.a.get(r,{}).then((function(t){if(t.data){var r=[],o=[];n.querySelectorAll("tr").forEach((function(e){o.push(e.getAttribute("id"))})),t.data.forEach((function(t){var a=t.id;if(r.push(a),o.includes(a)){var i=n.querySelector('tr[id="'.concat(a,'"]'));n.removeChild(i)}var s=document.createElement("tr");s.setAttribute("id",a);var c=t.password?ct.icons.lock:"",l=t.password?"Y":"N",u=t.players<2?'<span data-id="'.concat(a,'" data-server="').concat(t.server,'" data-password="').concat(l,'" class="').concat(ct.classNames["btn-join-room"],'">Join</span>'):"",d=t.country?"[".concat(t.country,"] "):"",f=t.server?t.server:"";if(f&&He.servers[f]){var p=He.servers[f].name;s.innerHTML="<td>".concat(p,"</td><td>").concat(d).concat(c).concat(t.name,"</td><td>").concat(t.players,"/2</td><td>").concat(u,"</td>"),P.call(e,s.querySelector(".".concat(ct.classNames["btn-join-room"])),"click",m),n.appendChild(s)}})),n.querySelectorAll("tr").forEach((function(e){r.includes(e.id)||n.removeChild(e)}))}ct.loadRoomsListTimer=setTimeout(ct.loadRoomsList,2e3)})).catch((function(e){ct.loadRoomsListTimer=setTimeout(ct.loadRoomsList,2e3)}))},ct.openRoom=function(e){ct.stopLoadRooms(),U(e.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["netplay-roomlist"])),!0),U(e.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["netplay-room"])),!1),U(e.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["btn-create-room"])),!0),U(e.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["btn-quit"])),!1),ct.resetCheat(),U(e.elements.buttons.cheat,!0);var t=e.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["netplay-room"])),n=t.querySelector("[data-room-password]");null===ct.netPlayPassword?U(n,!0):(U(n,!1),n.querySelector("span").innerText=ct.netPlayPassword);var r=t.querySelector("tbody");r.innerHTML="",t.querySelector("strong").innerText=ct.netPlayRoomname,ct.netPlayUsers.forEach((function(e,t){var n=document.createElement("tr");n.innerHTML="<td>".concat(t+1,"</td><td>").concat(e,"</td><td></td>"),r.appendChild(n)}))},P.call(this,i.querySelector(".".concat(ct.classNames["modal__btn-primary"])),"click",(function(e){var n=i.querySelector(".".concat(ct.classNames["netplay-room-password-input"])).value;ct.showLoading.call(t);var r=i.getAttribute("data-id"),o=i.getAttribute("data-server");h(o,r,n),e.stopPropagation()})),P.call(this,r.querySelector(".".concat(ct.classNames["modal__btn-primary"])),"click",(function(e){var t=r.querySelector(".".concat(ct.classNames["netplay-player-name"])).value;t=t.replace(/<|>/g,""),r.querySelector(".".concat(ct.classNames.modal__errmsg)).innerHTML="",t.trim()&&(ct.playerName=t.trim(),$e.close()),e.stopPropagation()})),P.call(this,o.querySelector(".".concat(ct.classNames["modal__btn-primary"])),"click",(function(e){var r=o.querySelector(".".concat(ct.classNames["netplay-room-name-input"])).value;r=r.replace(/<|>/g,"");var i=o.querySelector("select[data-server] option:checked").value;c=He.servers[i].url;var l=o.querySelector("select[data-max-players] option:checked").value;l<2&&(l=2),l>4&&(l=4),l=2;for(var h=0;h<l;h++)ct.players[h]=null;var m=o.querySelector(".".concat(ct.classNames["netplay-room-password-input"])).value;o.querySelector(".".concat(ct.classNames.modal__errmsg)).innerHTML="",r.trim()?(ct.showLoading.call(t),xe.a.post(u+"/add",{room_name:r,room_password:m,server:i,room_key:encodeURIComponent(JSON.stringify({system:t.system,crc32:ct.romcrc32,romname:t.startName,url:t.config.url}))}).then((function(e){if(ct.stopLoadRooms(),n.closeModal(),!e.data.room_id)throw"error";ct.netPlayPassword=m,ct.netPlayRoomname=r,(s=new WebSocket(c+"room/"+e.data.room_id)).onopen=function(e){ct.hideLoading.call(t),s.send("core_name=".concat(t.system,"&game_crc=").concat(ct.romcrc32,"&nick=").concat(encodeURIComponent(ct.playerName))),t.playing||Array.from(t.elements.buttons.play).forEach((function(e){I.call(t,e,"click")})),ct.netPlayIsHost=!0,ct.netPlayHost(),n.closeModal(),ct.stopLoadRooms(),ct.openRoom(t),ct.netPlayUsers[0]=ct.playerName,f()},s.onclose=function(e){ct.hideLoading.call(t),ct.loadRoomsList(),p(),1005!=e.code&&(a.querySelector("#modal-7d8fd50ed642340b-content").innerHTML="Error",$e.show("modal-7d8fd50ed642340b",{closeTrigger:"data-modal-close"}))},s.onmessage=function(e){d(e)},s.onerror=function(e){}})).catch((function(e){ct.loadRoomsList(),ct.hideLoading.call(t),a.querySelector("#modal-7d8fd50ed642340b-content").innerHTML="Error",$e.show("modal-7d8fd50ed642340b",{closeTrigger:"data-modal-close"})}))):n.closeModal(),e.stopPropagation()})),P.call(this,t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["btn-create-room"])),"click",(function(e){n=$e.show("modal-85cd7a1c543a484a",{closeTrigger:"data-modal-close",closeByEsckey:!1,onClose:function(){t.elements.container.focus()}}),o.querySelector("select[data-max-players]").setAttribute("disabled","disabled");var r=o.querySelector("select[data-server]");if(r.innerHTML="",Object.keys(He.servers).forEach((function(e){var t=document.createElement("option");t.text=He.servers[e].name,t.value=e,r.appendChild(t)})),"object"==it(He.servers))try{var a=null;Object.keys(He.servers).forEach((function(e,t){var n=He.servers[e].url.replace("wss://","https://");fetch(n).then((function(t){var o,i=(new Date).valueOf();fetch(n).then((function(t){o=(new Date).valueOf()-i,He.servers[e].latency=o;var n=r.querySelector("option[value="+e+"]");n.text=He.servers[e].name+" ("+o+"ms)",(!a||a>o)&&(a=o,n.setAttribute("selected",!0))})).catch((function(e){}))})).catch((function(e){}))}))}catch(e){}return e.stopPropagation(),!1})),P.call(this,t.elements.dialogs.netplay.querySelector(".".concat(ct.classNames["btn-quit"])),"click",(function(e){return s.close(),ct.stopLoadRooms(),ct.loadRoomsList(),ct.netPlayClose(),e.stopPropagation(),!1})),P(window,"message",(function(e){return e.source==window&&"object"==it(e.data)&&("netplay"==e.data.type&&e.data.data instanceof Uint8Array&&(e.data.data[3],s.send(e.data.data)),void("netplay-close"==e.data.type&&(s.close(),ct.netPlayDialogOpened&&(ct.stopLoadRooms(),ct.loadRoomsList()),ct.netPlayClose(),p())))}))}}},setDiskContainer:function(){var e=this;if(!1===He.diskControl)return e.elements.container.querySelector(J("ejs__disk",1)).remove(),!1;if(ct.getDiskNum&&ct.getDiskNum()>1){for(var t,n=ct.getDiskNum(),r=e.elements.container.querySelector(".".concat(J("ejs__disk__container")," > div")),o=function(n){(t=D("div",{class:J("ejs__disk__index")})).innerHTML="Disk ".concat(n),P.call(e,t,"click touchstart",(function(t){ct.ejectDisk&&ct.ejectDisk(),ct.setDisk(n-1),ct.ejectDisk&&setTimeout((function(){ct.ejectDisk()}),300),"psx"==e.system||"psx-legacy"==e.system?(e.elements.buttons.disk.querySelector("span").innerHTML="Current Disc: "+n,ot.show(e.elements.container,"Change Disc: "+n)):(e.elements.buttons.disk.querySelector("span").innerHTML="Current Disk: "+n,ot.show(e.elements.container,"Change Disk: "+n)),U(e.elements.container.querySelector(J("ejs__disk__container",1)),!0);var r=J("ejs__tooltip--visible"),o=e.elements.buttons.disk.querySelector(J("ejs__tooltip",1));G(o,r,!0),setTimeout((function(){G(o,r,!1)}),5e3)})),r.appendChild(t)},a=n;a>=1;a--)o(a);e.elements.buttons.disk.querySelector("span").innerHTML="Current Disk: 1",P.call(e,e.elements.buttons.disk,"click",(function(t){U(e.elements.container.querySelector(J("ejs__disk__container",1)))}))}else e.elements.container.querySelector(J("ejs__disk",1)).remove()},initKeyboard:function(){var e=this,t=this,n=this.elements.dialogs.gamepad.querySelector(".".concat(ct.classNames.overlay)),r=function(r){if(t.focused){var o=!e.elements.dialogs.gamepad.hidden&&!n.hidden;if(r.which>=112&&r.which<=123);else{var a="keydown"===r.type;if(a&&o){var i=n.getAttribute("data-index"),s=n.getAttribute("data-id"),c=null;r.key&&((c=t.elements.dialogs.gamepad.querySelector('[data-id="'.concat(s,'"][data-index="').concat(i,'"][data-type="1"]'))).setAttribute("data-value",r.keyCode),c.value=ct.keyMap[r.keyCode]),U(n,!0)}else Object.keys(ct.controllers).forEach((function(e){Object.keys(ct.controllers[e]).forEach((function(t){if(parseInt(ct.controllers[e][t].value,10)===r.keyCode)if(a)if(t>=16&&t<=23){var n=32767;19!=t&&17!=t&&23!=t&&21!=t||(n=-n),ct.simulateInput(e,t,n)}else ct.simulateInput(e,t,1);else ct.simulateInput(e,t,0)}))}))}if(["input","textarea"].includes(r.target.nodeName.toLocaleLowerCase())||r.preventDefault(),r.stopPropagation(),o)return!1;if(t.keyboard){var l=new KeyboardEvent(r.type,{isTrusted:!1,bubbles:!1,cancelable:!1,char:r.char,key:r.key,shiftKey:r.shiftKey,ctrlKey:r.ctrlKey,altKey:r.altKey,keyCode:r.keyCode,code:r.code});He.Module.canvas.dispatchEvent(l),He.Module.canvas.parentElement.querySelector("input").dispatchEvent(l)}}};document.body.addEventListener("keydown",r),document.body.addEventListener("keyup",r)},initGamepad:function(){var e=this,t=this,n=this.elements.dialogs.gamepad.querySelector(".".concat(ct.classNames.overlay)),r=new ve.Gamepad;if(ct.gamepad=r,r.init()){var o=0;r.bind(ve.Gamepad.Event.TICK,(function(e){e.forEach((function(e){var t,n;e&&e.axes&&e.axes[9]&&((t=e.axes[9])<3.28571?(o=t,1==t?(e.extra_buttons[12].pressed||(e.extra_buttons[12]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[12],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:12,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[13]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[13],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:13,gamepad:e,gamepadIndex:e.index})),e.extra_buttons[14].pressed||(e.extra_buttons[14]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[14],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:14,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[15]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[15],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:15,gamepad:e,gamepadIndex:e.index}))):t<=-.7142857&&t>=-.714291?(e.extra_buttons[12].pressed||(e.extra_buttons[12]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[12],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:12,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[13]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[15],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:13,gamepad:e,gamepadIndex:e.index})),e.extra_buttons[15].pressed||(e.extra_buttons[15]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[15],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:15,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[14]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[14],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:14,gamepad:e,gamepadIndex:e.index}))):t>=.42856&&t<=.42858?(e.extra_buttons[13].pressed||(e.extra_buttons[13]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[13],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:13,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[12]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[12],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:12,gamepad:e,gamepadIndex:e.index})),e.extra_buttons[14].pressed||(e.extra_buttons[14]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[14],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:14,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[15]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[15],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:15,gamepad:e,gamepadIndex:e.index}))):t>=-.14287&&t<=-.14285?(e.extra_buttons[13].pressed||(e.extra_buttons[13]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[13],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:13,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[12]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[12],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:12,gamepad:e,gamepadIndex:e.index})),e.extra_buttons[15].pressed||(e.extra_buttons[15]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[15],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:15,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[14]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[14],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:14,gamepad:e,gamepadIndex:e.index}))):t<=-1&&t>=-1.01?e.extra_buttons[12].pressed||(e.extra_buttons[12]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[12],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:12,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[13]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[13],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:13,gamepad:e,gamepadIndex:e.index})):t>=.142857&&t<=.142858?e.extra_buttons[13].pressed||(e.extra_buttons[13]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[13],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:13,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[12]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[12],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:12,gamepad:e,gamepadIndex:e.index})):t>=.7142857&&t<=.7142858?e.extra_buttons[14].pressed||(e.extra_buttons[14]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[14],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:14,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[15]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[15],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:15,gamepad:e,gamepadIndex:e.index})):t<=-.42857&&t>=-.42858&&(e.extra_buttons[15].pressed||(e.extra_buttons[15]={pressed:!0,value:1},n=ve.Gamepad.StandardButtons[15],r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:15,gamepad:e,gamepadIndex:e.index}),e.extra_buttons[14]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[14],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:14,gamepad:e,gamepadIndex:e.index})))):o!=t&&(e.extra_buttons[12].pressed&&(e.extra_buttons[12]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[12],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:12,gamepad:e,gamepadIndex:e.index})),e.extra_buttons[13].pressed&&(e.extra_buttons[13]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[13],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:13,gamepad:e,gamepadIndex:e.index})),e.extra_buttons[14].pressed&&(e.extra_buttons[14]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[14],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:14,gamepad:e,gamepadIndex:e.index})),e.extra_buttons[15].pressed&&(e.extra_buttons[15]={pressed:!1,value:0},n=ve.Gamepad.StandardButtons[15],r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:15,gamepad:e,gamepadIndex:e.index})),o=t)),e&&e.axes&&0 in e.axes&&ct.remappingAxis[e.index]&&(t=e.axes[0],Math.abs(t)<=.2&&(t=0),t>=.5&&(n=ve.Gamepad.StandardButtons[15],e.extra_buttons[15].pressed||(e.extra_buttons[15]={pressed:!0,value:1},r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:15,gamepad:e,gamepadIndex:e.index}))),t<=-.5&&(n=ve.Gamepad.StandardButtons[14],e.extra_buttons[14].pressed||(e.extra_buttons[14]={pressed:!0,value:1},r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:14,gamepad:e,gamepadIndex:e.index}))),0==t&&(n=ve.Gamepad.StandardButtons[14],e.extra_buttons[14].pressed&&(e.extra_buttons[14]={pressed:!1,value:0},r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:14,gamepad:e,gamepadIndex:e.index})),n=ve.Gamepad.StandardButtons[15],e.extra_buttons[15].pressed&&(e.extra_buttons[15]={pressed:!1,value:0},r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:15,gamepad:e,gamepadIndex:e.index})))),e&&e.axes&&1 in e.axes&&ct.remappingAxis[e.index]&&(t=e.axes[1],Math.abs(t)<=.2&&(t=0),t>=.5&&(n=ve.Gamepad.StandardButtons[13],e.extra_buttons[13].pressed||(e.extra_buttons[13]={pressed:!0,value:1},r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:13,gamepad:e,gamepadIndex:e.index}))),t<=-.5&&(n=ve.Gamepad.StandardButtons[12],e.extra_buttons[12].pressed||(e.extra_buttons[12]={pressed:!0,value:1},r._fire(ve.Gamepad.Event.BUTTON_DOWN,{control:n,index:12,gamepad:e,gamepadIndex:e.index}))),0==t&&(n=ve.Gamepad.StandardButtons[12],e.extra_buttons[12].pressed&&(e.extra_buttons[12]={pressed:!1,value:0},r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:12,gamepad:e,gamepadIndex:e.index})),n=ve.Gamepad.StandardButtons[13],e.extra_buttons[13].pressed&&(e.extra_buttons[13]={pressed:!1,value:0},r._fire(ve.Gamepad.Event.BUTTON_UP,{control:n,index:13,gamepad:e,gamepadIndex:e.index}))))}))})),r.bind(ve.Gamepad.Event.BUTTON_DOWN,(function(r){if(e.elements.dialogs.gamepad.hidden||n.hidden){var o=[];He.buttonMaps&&(o=He.buttonMaps),Object.keys(ct.controllers).forEach((function(e){Object.keys(ct.controllers[e]).forEach((function(t){parseInt(ct.controllers[e][t].value2,10)===parseInt(r.index,10)&&parseInt(e,10)===parseInt(r.gamepad.index,10)&&(!o[e]||o[e]&&o[e][t])&&ct.simulateInput(e,t,1)}))}))}else{var a,i=parseInt(n.getAttribute("data-index"),10),s=n.getAttribute("data-id");if(r.gamepad.index===parseInt(i,10)){for(var c=0;c<32&&((a=r.gamepad.buttons[c])||(a=r.gamepad.extra_buttons[c]),!a||!("number"==typeof a&&1===a||"number"==typeof a.value&&1===a.value));c+=1);var l=null;(l=t.elements.dialogs.gamepad.querySelector('[data-id="'.concat(s,'"][data-index="').concat(i,'"][data-type="2"]'))).setAttribute("data-value",r.index),l.value=r.control?r.control:"button ".concat(r.index+1),U(n,!0)}}})),r.bind(ve.Gamepad.Event.BUTTON_UP,(function(e){var t=[];He.buttonMaps&&(t=He.buttonMaps),Object.keys(ct.controllers).forEach((function(n){Object.keys(ct.controllers[n]).forEach((function(r){parseInt(ct.controllers[n][r].value2,10)===parseInt(e.index,10)&&parseInt(n,10)===parseInt(e.gamepad.index,10)&&(!t[n]||t[n]&&t[n][r])&&ct.simulateInput(n,r,0)}))}))})),r.bind(ve.Gamepad.Event.AXIS_CHANGED,(function(e){var t=e.gamepad.index,n=[];if(He.buttonMaps&&(n=He.buttonMaps),0==n.length||!n[t])return!1;"LEFT_STICK_X"===e.axis&&(e.value>0?(n[t][16]&&ct.simulateInput(t,16,32767*e.value),n[t][17]&&ct.simulateInput(t,17,0)):(n[t][17]&&ct.simulateInput(t,17,32767*e.value),n[t][16]&&ct.simulateInput(t,16,0))),"LEFT_STICK_Y"===e.axis&&(e.value>0?(n[t][18]&&ct.simulateInput(t,18,32767*e.value),n[t][19]&&ct.simulateInput(t,19,0)):(n[t][19]&&ct.simulateInput(t,19,32767*e.value),n[t][18]&&ct.simulateInput(t,18,0))),"RIGHT_STICK_X"===e.axis&&(e.value>0?(n[t][20]&&ct.simulateInput(t,20,32767*e.value),n[t][21]&&ct.simulateInput(t,21,0)):(n[t][21]&&ct.simulateInput(t,21,32767*e.value),n[t][20]&&ct.simulateInput(t,20,0))),"RIGHT_STICK_Y"===e.axis&&(e.value>0?(n[t][22]&&ct.simulateInput(t,22,32767*e.value),n[t][23]&&ct.simulateInput(t,23,0)):(n[t][23]&&ct.simulateInput(t,23,32767*e.value),n[t][22]&&ct.simulateInput(t,22,0)))})),r.bind(ve.Gamepad.Event.DISCONNECTED,(function(e){[0,1,2,3].forEach((function(e){var n=r.gamepads[e];n?t.elements.dialogs.gamepad.querySelector("#controls-".concat(e))&&(t.elements.dialogs.gamepad.querySelector("#controls-".concat(e," .").concat(ct.classNames["gamepad-name"])).innerHTML=n.id,U(t.elements.dialogs.gamepad.querySelector("#controls-".concat(e," .").concat(ct.classNames["gamepad-remapping-axis"])),!1)):t.elements.dialogs.gamepad.querySelector("#controls-".concat(e))&&(t.elements.dialogs.gamepad.querySelector("#controls-".concat(e," .").concat(ct.classNames["gamepad-name"])).innerHTML="None detected",U(t.elements.dialogs.gamepad.querySelector("#controls-".concat(e," .").concat(ct.classNames["gamepad-remapping-axis"])),!0))}))})),r.bind(ve.Gamepad.Event.CONNECTED,(function(e){Object.keys(r.gamepads).forEach((function(e){var n=r.gamepads[e];n?t.elements.dialogs.gamepad.querySelector("#controls-".concat(e))&&(t.elements.dialogs.gamepad.querySelector("#controls-".concat(e," .").concat(ct.classNames["gamepad-name"])).innerHTML=n.id,U(t.elements.dialogs.gamepad.querySelector("#controls-".concat(e," .").concat(ct.classNames["gamepad-remapping-axis"])),!1)):t.elements.dialogs.gamepad.querySelector("#controls-".concat(e))&&(t.elements.dialogs.gamepad.querySelector("#controls-".concat(e," .").concat(ct.classNames["gamepad-name"])).innerHTML="None detected",U(t.elements.dialogs.gamepad.querySelector("#controls-".concat(e," .").concat(ct.classNames["gamepad-remapping-axis"])),!0))}))}))}},setShader:function(e){if("disabled"===e)He.FS.unlink("/shader/shader.glslp",""),ct.toggleShader&&ct.toggleShader(0);else{ct.toggleShader&&ct.toggleShader(0);var t="/shader/".concat(e);He.FS.writeFile("/shader/shader.glslp",function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e[n];r>255&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")}(He.FS.readFile(t))),ct.toggleShader&&ct.toggleShader(1)}},toggleVirtualGamepad:function(e){var t=this;if(null===ct.virtualGamepadContainer){var n=2;switch(t.system){case"gb":case"gbc":case"atari7800":case"lynx":case"segaMS":case"segaGG":case"atari2600":n=1;break;case"nes":n=2;break;case"snes":case"snes2002":case"snes2005":case"snes2010":case"zc210":n=3;break;case"gba":case"vbanext":n=4;break;case"segaMD":case"segaCD":case"sega32x":case"openbor":n=5;break;case"segaSaturn":n=6;break;case"arcade":case"fba0.2.97.29":case"mame2003":case"mame":case"mame0.193":case"mame0.243":n=7;break;case"n64":case"mupen64plus":case"mupen64plus2":case"mupen64plus-nx":n=8;break;case"psx":n=9;break;case"pce":n=10;break;case"ws":n=11}var r={"ejs-virtual-gamepad":!0};r["ejs-virtual-gamepad-style-".concat(n)]=!0,ct.virtualGamepadContainer=D("div",{class:W(r),hidden:""}),this.elements.container.appendChild(ct.virtualGamepadContainer),ct.virtualGamepadContainer.innerHTML='\n            <div class="'.concat(J("virtual-gamepad"),'" style="display: block;">\n            <div class="').concat(J("top"),'">\n            </div>\n            <div class="').concat(J("dpad-container"),'"></div>\n            <div class="').concat(J("left"),'"></div>\n            <div class="').concat(J("center"),'">\n            <div data-key-id-2 class="').concat(W({buttons:!0,b_select:!0}),'">SELECT</div>\n            <div data-key-id-3 class="').concat(W({buttons:!0,b_start:!0}),'">START</div>\n            <div data-key-id-2 class="').concat(W({buttons:!0,b_insert_coin:!0}),'">INSERT COIN</div>\n            </div>\n            <div class="').concat(J("right"),'">\n            <div data-key-id-8 class="').concat(W({buttons:!0,b_a:!0}),'">A</div>\n            <div data-key-id-0 class="').concat(W({buttons:!0,b_b:!0}),'">B</div>\n            <div data-key-id-9 class="').concat(W({buttons:!0,b_x:!0}),'">X</div>\n            <div data-key-id-1 class="').concat(W({buttons:!0,b_y:!0}),'">Y</div>\n            <div data-key-id-10 class="').concat(W({buttons:!0,b_c:!0}),'">C</div>\n            <div data-key-id-11 class="').concat(W({buttons:!0,b_z:!0}),'">Z</div>\n            <div data-key-id-8 class="').concat(W({buttons:!0,b_1:!0}),'">1</div>\n            <div data-key-id-0 class="').concat(W({buttons:!0,b_2:!0}),'">2</div>\n            <div data-key-id-10 class="').concat(W({buttons:!0,b_3:!0}),'">3</div>\n            <div data-key-id-9 class="').concat(W({buttons:!0,b_4:!0}),'">4</div>\n            <div data-key-id-1 class="').concat(W({buttons:!0,b_5:!0}),'">5</div>\n            <div data-key-id-11 class="').concat(W({buttons:!0,b_6:!0}),'">6</div>\n            <div data-key-id-10 class="').concat(W({buttons:!0,b_l:!0}),'">L</div>\n            <div data-key-id-11 class="').concat(W({buttons:!0,b_r:!0}),'">R</div>\n            <div data-key-id-12 class="').concat(W({buttons:!0,b_l2:!0}),'">L2</div>\n            <div data-key-id-13 class="').concat(W({buttons:!0,b_r2:!0}),'">R2</div>\n\n\n            <div data-key-id-23 class="').concat(W({buttons:!0,b_c1:!0}),'">C1</div>\n            <div data-key-id-22 class="').concat(W({buttons:!0,b_c2:!0}),'">C2</div>\n            <div data-key-id-21 class="').concat(W({buttons:!0,b_c3:!0}),'">C3</div>\n            <div data-key-id-20 class="').concat(W({buttons:!0,b_c4:!0}),'">C4</div>\n            <div data-key-id-12 class="').concat(W({buttons:!0,b_z_t:!0}),'">Z</div>\n            <div data-key-id-10 class="').concat(W({buttons:!0,b_l_t:!0}),'">L</div>\n            <div data-key-id-11 class="').concat(W({buttons:!0,b_r_t:!0}),'">R</div>\n\n            </div>\n            </div>'),U(ct.virtualGamepadContainer,!e);var o=[];He.buttonMaps&&(o=He.buttonMaps),o[0]&&Object.keys(o[0]).forEach((function(e,t){t=o[0][e],ct.virtualGamepadContainer.querySelectorAll(J("buttons",1)).forEach((function(n){"data-key-id-".concat(e)in n.attributes&&(n.innerHTML=t)}))})),ct.virtualGamepadContainer.querySelectorAll(J("buttons",1)).forEach((function(e){var t=D("canvas",{style:"width: 100%;height: 100%;position: absolute;left: 0;z-index:1"});e.appendChild(t)}));var a=ge.a.create({zone:V.call(t,".".concat(J("ejs-virtual-gamepad")," .").concat(J("left"))),mode:"static",position:{left:"50%",top:"50%"},color:"red"});a.on("end",(function(e,t){ct.syncInput(0,19,0),ct.syncInput(0,18,0),ct.syncInput(0,17,0),ct.syncInput(0,16,0)})),a.on("move",(function(e,t){var n=t.angle.degree,r=0,o=0;n>0&&n<=45&&(r=t.distance/50,o=-1/45*n*t.distance/50),n>45&&n<=90&&(r=1/45*(90-n)*t.distance/50,o=-t.distance/50),n>90&&n<=135&&(r=1/45*(90-n)*t.distance/50,o=-t.distance/50),n>135&&n<=180&&(r=-t.distance/50,o=-1/45*(180-n)*t.distance/50),n>135&&n<=225&&(r=-t.distance/50,o=-1/45*(180-n)*t.distance/50),n>225&&n<=270&&(r=-1/45*(270-n)*t.distance/50,o=t.distance/50),n>270&&n<=315&&(r=-1/45*(270-n)*t.distance/50,o=t.distance/50),n>315&&n<=359.9&&(r=t.distance/50,o=1/45*(360-n)*t.distance/50),r>0?(ct.simulateInput(0,16,32767*r),ct.simulateInput(0,17,0)):(ct.simulateInput(0,17,32767*r),ct.simulateInput(0,16,0)),o>0?(ct.simulateInput(0,18,32767*o),ct.simulateInput(0,19,0)):(ct.simulateInput(0,19,32767*o),ct.simulateInput(0,18,0))})),function(e){e.width;var t=e.container,n=e.event;"function"!=typeof n&&(n=function(){});var r=D("div",{class:J("dpad-bg")}),o=D("div",{class:J("dpad-front")});function a(e){var t;if(t=e.targetTouches[0]){var a=o.getBoundingClientRect(),i=t.clientX-a.left-o.clientWidth/2,s=t.clientY-a.top-o.clientHeight/2,c=0,l=0,u=0,d=0,f=Math.atan(i/s)/(Math.PI/180);s<=-10&&(c=1),s>=10&&(l=1),i>=10&&(d=1,u=0,(f<0&&f>=-35||f>0&&f<=35)&&(d=0),c=f<0&&f>=-55?1:0,l=f>0&&f<=55?1:0),i<=-10&&(d=0,u=1,(f<0&&f>=-35||f>0&&f<=35)&&(u=0),c=f>0&&f<=55?1:0,l=f<0&&f>=-55?1:0),r.classList.toggle(J("dpad-right"),d),r.classList.toggle(J("dpad-left"),u),r.classList.toggle(J("dpad-up"),c),r.classList.toggle(J("dpad-down"),l),n(u,d,c,l)}e.stopPropagation()}function i(e){n(0,0,0,0),r.classList.toggle(J("dpad-up"),!1),r.classList.toggle(J("dpad-down"),!1),r.classList.toggle(J("dpad-right"),!1),r.classList.toggle(J("dpad-left"),!1),e.stopPropagation()}r.innerHTML='<div class="'.concat(J("dpad-1"),'"><div class="').concat(J("dpad-1-bg"),'"></div></div>\n    <div class="').concat(J("dpad-2"),'"><div class="').concat(J("dpad-2-bg"),'"></div></div>'),t.append(r),t.append(o),P(o,"touchstart",a),P(o,"touchmove",a),P(o,"touchend",i),P(o,"touchcancel",i)}({container:V.call(t,".".concat(J("ejs-virtual-gamepad")," .").concat(J("dpad-container"))),event:function(e,t,n,r){ct.syncInput(0,4,n),ct.syncInput(0,5,r),ct.syncInput(0,6,e),ct.syncInput(0,7,t)}});var i=J("virtual-gamepad"),s=J("touch");P.call(t,V.call(t,".".concat(i)),"touchmove",(function(e){e.stopPropagation()}));var c={};c[J("b_a")]=8,c[J("b_b")]=0,c[J("b_c")]=10,c[J("b_x")]=9,c[J("b_y")]=1,c[J("b_z")]=11,c[J("b_l")]=10,c[J("b_r")]=11,c[J("b_l2")]=12,c[J("b_r2")]=13,c[J("b_1")]=8,c[J("b_2")]=0,c[J("b_3")]=10,c[J("b_4")]=9,c[J("b_5")]=1,c[J("b_6")]=11,c[J("b_c1")]=23,c[J("b_c2")]=22,c[J("b_c3")]=21,c[J("b_c4")]=20,c[J("b_l_t")]=10,c[J("b_r_t")]=11,c[J("b_z_t")]=12,c[J("b_start")]=3,c[J("b_select")]=2,c[J("b_insert_coin")]=2,Object.keys(c).forEach((function(e){var n=c[e];P.call(t,V.call(t,".".concat(i," .").concat(e," canvas")),"touchstart touchend",(function(r){if("touchend"===r.type)G(V.call(t,".".concat(i," .").concat(e)),s,!1),window.setTimeout((function(){ct.syncInput(0,n,0)}),10);else if(G(V.call(t,".".concat(i," .").concat(e)),s,!0),[20,21,22,23].includes(n)){var o=32767;23!=n&&21!=n||(o=-o),ct.syncInput(0,n,o)}else ct.syncInput(0,n,1);r.stopPropagation()}))}))}else U(ct.virtualGamepadContainer,!e)},setup:function(){var e,t,n,r=this;if(this.game){if(ct.playerName=r.config.playerName,G(this.elements.container,this.config.classNames.type,!0),this.elements.container.setAttribute("tabindex","0"),this.color){var o=function(e){var t=e.toLowerCase();if(t&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var n="#",r=1;r<4;r+=1)n+=t.slice(r,r+1).concat(t.slice(r,r+1));t=n}for(var o=[],a=1;a<7;a+=2)o.push(parseInt("0x".concat(t.slice(a,a+2)),16));return o}return null}(this.color);o&&this.elements.container.setAttribute("style","--ejs-primary-color: ".concat(o[0],", ").concat(o[1],", ").concat(o[2]))}if(this.elements.wrapper=D("div",{class:this.config.classNames.video}),e=this.game,t=this.elements.wrapper,n=e.length?e:[e],Array.from(n).reverse().forEach((function(e,n){var r=n>0?t.cloneNode(!0):t,o=e.parentNode,a=e.nextSibling;r.appendChild(e),a?o.insertBefore(r,a):o.appendChild(r)})),"video"!==r.game.tagName.toLocaleLowerCase()){var a=this.config.volume;Object.defineProperty(r.game,"volume",{get:function(){return a},set:function(e){a=e,I.call(r,r.game,"volumechange")}});var i=r.storage.get("muted");Object.defineProperty(r.game,"muted",{get:function(){return i},set:function(e){var t=!!b(e)&&e;i=t,I.call(r,r.game,"volumechange")}})}}},listeners:function(){var e=this,t=e.elements.container;e.elements.buttons.restart&&P.call(e,e.elements.buttons.restart,"click",(function(e){ot.show(t,"Restart Game",1500),ct.restartGame()})),e.elements.buttons.play&&Array.from(e.elements.buttons.play).forEach((function(n){P.call(e,n,"click",(function(n){e.playing?(e.playing=!1,He.Module.pauseMainLoop(),I.call(e,t,"pause",!1,{pause:!0})):(e.playing=!0,He.Module.resumeMainLoop(),I.call(e,t,"pause",!1,{pause:!1}))}))})),e.elements.buttons.netplay&&P.call(e,e.elements.buttons.netplay,"click",(function(t){U(e.elements.dialogs.netplay,!1),ct.netPlayUsers.filter((function(e){return""!=e})).length>0?ct.openRoom(e):(ct.netPlayDialogOpened=!0,ct.stopLoadRooms(),ct.loadRoomsList()),ct.playerName||$e.show("modal-9de6c4e9ce2b9361",{closeByEsckey:!1})})),e.elements.buttons.cheat&&P.call(e,e.elements.buttons.cheat,"click",(function(t){U(e.elements.dialogs.cheat,!1)}));var n=e.SelectorAll(".".concat(J("ejs__contextmenu")," ul li"));Array.from(n).forEach((function(t,n){0===n&&P.call(e,t,"click",(function(t){var n=ct.getScreenData();return me()(new Blob([n]),e.startName+".png"),!1})),1===n&&P.call(e,t,"click",(function(e){ct.quickSaveState(),ut.contextMenu.style.display="none"})),2===n&&P.call(e,t,"click",(function(e){ct.quickLoadState(),ut.contextMenu.style.display="none"}))})),P.call(e,t,"savestate",(function(n){var o=n.detail.state,i=e.startName.split("/").pop().split("."),s=i.slice(0,i.length-1).join("."),c=s?"".concat(s,".state"):"game.state";if("custom"==e.config.onsavestate)loaderWindow&&loaderWindow.postMessage({act:"ejs-savestate",data:{screenshot:n.detail.screenshot,state:o},name:c},"*");else if(x(e.config.onsavestate))e.config.onsavestate.call(null,{screenshot:n.detail.screenshot,state:o});else{let t=r.F.getKeyName(e.startName),i=He.savefullpath+"/";a.MKFILE(i+t+".state",o,1),a.MKFILE(i+t+".png",n.detail.screenshot,1)}t.focus()})),e.game.stateloadField=D("input"),e.game.stateloadField.type="file",e.game.stateloadField.onchange=function t(n){var r,o=n.target.files;o.length>0&&((r=new FileReader).file_name=o[0].name,r.onload=function(){var e=new Uint8Array(r.result);EJS_loadState(e)},r.readAsArrayBuffer(o[0])),e.game.stateloadField=D("input"),e.game.stateloadField.type="file",e.game.stateloadField.onchange=t},P.call(e,t,"loadstate",(function(n){if("custom"==e.config.onsavestate&&loaderWindow)loaderWindow.postMessage({act:"ejs-loadstate"},"*");else{if(!x(e.config.onsavestate)){let t=r.F.getKeyName(e.startName),n=He.savefullpath+"/"+t+".state";return void(He.FS.analyzePath(n).exists&&ct.loadState(He.FS.readFile(n),0))}e.config.onloadstate.call(null,e.loadState)}t.focus()})),document.addEventListener("visibilitychange",(function(){document.visibilityState}))},bindFunction:function(){var e,t=this,n=t.system;He.Module&&(He.Module._set_volume||He.Module._adjust_volume)&&(He.Module._adjust_volume&&(e=He.Module.cwrap("adjust_volume","null",["number"])),He.Module._set_volume&&(e=He.Module.cwrap("set_volume","null",["number"])),ct.setVolume=function(){var n=0;t.volume<1&&(n=0===t.volume?-80:30*t.volume-30,e(n)),t.muted&&(n=-80),e(n)}),ct.setVariable=He.Module.cwrap("set_variable","null",["string","string"]),ct.simulateInputFn=He.Module.cwrap("simulate_input","null",["number","number","number"]),ct.simulateInput=function(e,t,n){ct.simulateInputFn(e,t,n)},ct.syncInput=ct.simulateInput;var r=He.Module.cwrap("shader_enable","null",["number"]);ct.toggleShader=function(e){return r(e)},ct.getStateInfo=He.Module.cwrap("get_state_info","string",[]),ct.saveState=function(){var e,t=ct.getStateInfo().split("|"),n=t[0]>>0;if(n>0){var r=t[1]>>0;e=He.Module.HEAPU8.slice?He.Module.HEAPU8.slice(r,r+n):He.Module.HEAPU8.subarray(r,r+n)}return e};var o=He.Module.cwrap("load_state","number",["string","number"]);ct.loadState=function(e,r){if(ct.netPlayConnected)return!1;var a;a=e,He.FS.analyzePath("/game.state").exists&&He.FS.unlink("game.state"),He.FS.createDataFile("/","game.state",a,!0,!0),null===r&&(r=0),o("game.state",r),"arcade"===n?setTimeout((function(){ct.getStateInfo(),o("game.state",r),He.FS.unlink("game.state")}),10):He.FS.unlink("game.state"),t.elements.container.focus()},He.Module._set_cheat&&(ct.setCheat=He.Module.cwrap("set_cheat","number",["number","number","string"])),He.Module._reset_cheat?ct.resetCheat=He.Module._reset_cheat:ct.resetCheat=function(){},ct.quickSaveState=function(){if(ct.netPlayConnected)return!1;if(t.started&&!ct.connected){var e=ct.saveState();try{He.FS.unlink("quick.state")}catch(e){}He.FS.createDataFile("/","quick.state",e,!0,!0),ot.show(t.elements.container,"Quick Save")}},ct.quickLoadState=function(){if(ct.netPlayConnected)return!1;if(t.started&&!ct.connected)try{o("quick.state",0),"arcade"===n&&setTimeout((function(){ct.getStateInfo(),o("quick.state",0)}),10),ot.show(t.elements.container,"Quick Load")}catch(e){}},He.Module._get_disk_num&&(ct.getDiskNum=He.Module.cwrap("get_disk_num","number",[])),He.Module._set_disk&&(ct.setDisk=He.Module.cwrap("set_disk","number",["number"])),He.Module._eject_disk&&(ct.ejectDisk=He.Module.cwrap("eject_disk","null",[])),He.Module._netplay_host&&(ct.netPlayHost=He.Module.cwrap("netplay_host","number",["string","string"])),He.Module._netplay_client&&(ct.netPlayClient=He.Module.cwrap("netplay_client","number",["string","string"])),He.Module._netplay_close&&(ct.netPlayClose=He.Module.cwrap("netplay_close","number",[])),He.Module._netplay_new_user&&(ct.netplayNewUser=He.Module.cwrap("netplay_new_user","number",[])),He.Module._netplay_push_data&&(ct.netplayPushData=He.Module.cwrap("netplay_push_data","number",["string","number"])),He.Module._get_content_crc&&(ct.contentCrc32=He.Module.cwrap("get_content_crc","string",[])),window.EJS_loadState=function(e){ct.loadState(e,0)};var a=He.Module.cwrap("cmd_take_screenshot","",[]);ct.getScreenData=function(){return ct.toggleShader(0),a(),ct.toggleShader(1),He.FS.analyzePath("screenshot.png").exists?He.FS.readFile("screenshot.png"):new Uint8Array(0)},ct.restartGame=He.Module.cwrap("system_restart","",[]),ct.currentFrameNum=He.Module.cwrap("get_current_frame_count","",[]),He.Module._cmd_savefiles&&(ct.saveSavFiles=He.Module.cwrap("cmd_savefiles","",[])),He.Module._get_core_options&&(ct.getGameCoreOptions=He.Module.cwrap("get_core_options","string",[])),ct.systemPause=function(e){return!1},ct.controllers=ut.storage.get("controllers"),ct.controllers||(ct.controllers=ct.defaultControllers),ct.remappingAxis=ut.storage.get("remappingAxis"),ct.remappingAxis||(ct.remappingAxis={})}};function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperties(ct,{netPlayConnected:{get:function(){return ct._netPlayConnected},set:function(e){ct._netPlayConnected=e,ct.netPlayConnectChange(e)}}});var ut={storage:null,coreOptionsValues:{},contextMenu:null,normalOptions:{mypanel:{label:"My Panel",options:{disabled:"Disabled",importSates:"import sates"},default:"disabled"},shader:{label:"Shader",options:{disabled:"Disabled","2xScaleHQ.glslp":"2xScaleHQ","4xScaleHQ.glslp":"4xScaleHQ","5xbrz.glslp":"5xbrz","6xbrz.glslp":"6xbrz","crt-easymode.glslp":"CRT easymode","crt-aperture.glslp":"CRT aperture","crt-geom.glslp":"CRT geom","crt-mattias.glslp":"CRT mattias"},default:"disabled"},"virtual-gamepad":{label:"Virtual Gamepad",options:{disabled:"Disabled",enabled:"Enabled"},default:"enabled"}},defaultCoreOptionsValues:function(){var e={};switch(this.system){case"pce":e={pce_nospritelimit:"enabled"};break;case"jaguar":e={virtualjaguar_doom_res_hack:"enabled"};break;case"psx":case"nds":e={};break;case"nes":e={fceumm_turbo_enable:"Both"}}return e},getCoreOptionsValues:function(){var e=ut.storage.get("core-options");return O(e)&&(e={}),e},getCoreOptions:function(){var e={};switch(this.system){case"nes":e.fceumm_palette={label:"Color Palette",options:{default:"Default",asqrealc:"AspiringSquire's Real","nintendo-vc":"Nintendo Virtual Console",rgb:"Nintendo RGB PPU","yuv-v3":"FBX's YUV-V3","unsaturated-final":"FBX's Unsaturated-Final","sony-cxa2025as-us":"Sony CXA2025AS US",pal:"PAL","bmf-final2":"BMF's Final 2","bmf-final3":"BMF's Final 3","smooth-fbx":"FBX's Smooth","composite-direct-fbx":"FBX's Composite Direct","pvm-style-d93-fbx":"FBX's PVM Style D93","ntsc-hardware-fbx":"FBX's NTSC Hardware","nes-classic-fbx-fs":"FBX's NES-Classic FS",nescap:"RGBSource's NESCAP",wavebeam:"nakedarthur's Wavebeam",raw:"Raw"},default:"default",netplay:!0},e.fceumm_nospritelimit={label:"No Sprite Limit",options:{enabled:"Enabled",disabled:"Disabled"},default:"disabled",netplay:!0},e.fceumm_sndquality={label:"Sound Quality",options:{Low:"Low",High:"High","Very High":"Very High"},default:"Low",netplay:!0},e.fceumm_turbo_enable={label:"Turbo Enable",options:["None","Player 1","Player 2","Both"],default:"Both",netplay:!0},e.fceumm_region={label:"Region",options:["Auto","NTSC","PAL","Dendy"],default:"Auto",netplay:!0};break;case"snes":e={snes9x_next_overclock:{label:"SuperFX Overclock",options:{disabled:"Disabled(10MHz)","40MHz":"40MHz","60MHz":"60MHz","80MHz":"80MHz","100MHz":"100MHz"},default:"disabled",netplay:!0}};break;case"snes2002":case"snes2005":case"snes2010":case"gb":case"gba":case"vbanext":case"n64":e={};break;case"nds":e={desmume_screens_layout:{label:"Screen layout",options:["top/bottom","bottom/top","left/right","right/left","top only","bottom only"],default:"top/bottom"},screen_rotation:{label:"Screen Rotation",options:{0:"0°",90:"90°",180:"180°",270:"270°"},default:0},desmume_frameskip:{label:"Frameskip",options:["0","1","2","3","4","5","6","7","8","9"],default:"0"}},le.wasm||delete e.screen_rotation;break;case"vb":case"pce":e={};break;case"segaMS":case"segaGG":case"segaMD":case"segaCD":e={genesis_plus_gx_no_sprite_limit:{label:"No Sprite Limit",options:["disabled","enabled"],default:"disabled",netplay:!0},genesis_plus_gx_overclock:{label:"CPU speed",options:["100%","125%","150%","175%","200%"],default:"100%",netplay:!0},genesis_plus_gx_sound_output:{label:"Sound output",options:["stereo","mono"],default:"stereo",netplay:!0}};break;case"sega32x":e={picodrive_sprlim:{label:"No sprite limit",options:["disabled","enabled"],default:"disabled",netplay:!0}};break;case"segaSaturn":e={yabause_frameskip:{label:"Frameskip",options:["disabled","enabled"],default:"disabled"}};break;case"msx":e={bluemsx_nospritelimits:{label:"No Sprite Limit",options:["OFF","ON"],default:"OFF"}};break;case"ws":case"ngp":e={};break;case"jaguar":e={virtualjaguar_usefastblitter:{label:"Fast Blitter",options:["disabled","enabled"],default:"disabled"},virtualjaguar_bios:{label:"Bios",options:["disabled","enabled"],default:"disabled"}};break;case"psx":e={pcsx_rearmed_vibration:{label:"Enable Vibration",options:["enabled","disabled"],default:"enabled",netplay:!0}};break;case"arcade":case"fba0.2.97.29":e={"fba-aspect":{label:"Aspect ratio",options:["DAR","PAR"],default:"DAR"},"fba-cpu-speed-adjust":{label:"CPU overclock",options:["100","110","120","130","140","150","160","170","180","190","200"],default:"100",netplay:!0},"fba-diagnostic-input":{label:"Diagnostic Input",options:["None","Hold Start","Start + A + B","Hold Start + A + B","Start + L + R","Hold Start + L + R","Hold Select","Select + A + B","Hold Select + A + B","Select + L + R","Hold Select + L + R"],default:"None",netplay:!0},"fba-neogeo-mode":{label:"Force Neo Geo mode",options:["MVS","AES","UNIBIOS","DIPSWITCH"],default:"MVS",netplay:!0}};break;case"mame2003":case"mame2010":case"mame":e={};break;default:e={}}return He.coreOptions&&Array.isArray(He.coreOptions)&&He.coreOptions.forEach((function(t,n){var r=t.key;e[r]={label:t.label,options:t.options,default:t.default,netplay:t.netplay}})),ct.getGameCoreOptions&&ct.getGameCoreOptions().split("\n").forEach((function(t,n){var r=t.split("; "),o=r[0];if(0===o.indexOf("fba-dipswitch-")||0===o.indexOf("fbneo-dipswitch-")){var a=r[1].split("|"),i=o.replace(/_/g," ").replace(/.+\-(.+)/,"$1"),s=0==o.indexOf("fbneo-dipswitch-")?a.slice(0,-1):a.slice(1,-1),c=a[0].replace("(Default) ","");e[o]={label:i,options:s,default:c,netplay:!0}}})),e},supportNetPlay:function(){return!!le.websocket&&"segaGG"!=this.system&&!this.lightgun&&!this.mouse&&"openbor"!=this.system},isNetPlay:function(){},findElements:function(){let e=this;try{return e.elements.controls=e.Selector(e.config.selectors.controls.wrapper),e.elements.buttons={play:e.SelectorAll(e.config.selectors.buttons.play),pause:e.Selector(e.config.selectors.buttons.pause),restart:e.Selector(e.config.selectors.buttons.restart),mute:e.Selector(e.config.selectors.buttons.mute),settings:e.Selector(e.config.selectors.buttons.settings),fullscreen:e.Selector(e.config.selectors.buttons.fullscreen),saveState:e.Selector(e.config.selectors.buttons.saveState),loadState:e.Selector(e.config.selectors.buttons.loadState),disk:e.Selector('[data-btn="disk"]'),gamepad:e.Selector(e.config.selectors.buttons.gamepad),netplay:e.Selector(e.config.selectors.buttons.netplay),cheat:e.Selector(e.config.selectors.buttons.cheat)},e.elements.inputs={volume:e.Selector(e.config.selectors.inputs.volume)},!0}catch(t){return e.debug.warn("It looks like there is a problem with your custom controls HTML",t),!1}},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");k(n,de(t,{role:"presentation",focusable:"false"}));var r=document.createElement("div");r.innerHTML="<svg>".concat(this.icons[e],"</svg>");for(var o=r.childNodes[0].childNodes,a=0;a<o.length;a+=1)n.appendChild(o[a]);return n},createLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.getLang(e);"saveState"==e&&(n+='<span class="'.concat(this.config.classNames.hotkey,'"> (Shift + F2)</span>')),"loadState"==e&&(n+='<span class="'.concat(this.config.classNames.hotkey,'"> (Shift + F4)</span>'));var o={};o[t.class]=!0,o[this.config.classNames.hidden]=!0;var a=Object.assign({},t,{class:[t.class,this.config.classNames.tooltip].filter(Boolean).join(" ")});return D("span",a,n)},createBadge:function(e){if(O(e))return null;var t=D("span",{class:this.config.classNames.menu.value});return t.appendChild(D("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n,r,o,a,i=D("button"),s=Object.assign({},t),c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return(e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return e=fe(e,"-"," "),e=fe(e,"_"," "),fe(e=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}(e)," ","")}(e)).charAt(0).toLowerCase()+e.slice(1)}(e),l=!1;"type"in s||(s.type="button");var u=J("ejs__control");switch("class"in s?s.class.includes(u)||(s.class+=" ".concat(u)):s.class=u,e){case"play":l=!0,n="play",o="pause",r="play",a="pause";break;case"mute":l=!0,n="mute",o="unmute",r="volume",a="muted";break;case"fullscreen":l=!0,n="enterFullscreen",o="exitFullscreen",r="enter-fullscreen",a="exit-fullscreen";break;default:n=c,r=e}return l?(i.appendChild(ut.createIcon.call(this,a,{class:J("icon--pressed")})),i.appendChild(ut.createIcon.call(this,r,{class:J("icon--not-pressed")})),i.appendChild(ut.createLabel.call(this,o,{class:J("icon--pressed")})),i.appendChild(ut.createLabel.call(this,n,{class:J("icon--not-pressed")}))):(i.appendChild(ut.createIcon.call(this,r)),i.appendChild(ut.createLabel.call(this,n))),de(s,F(this.config.selectors.buttons[c],s)),k(i,s),"play"===c?(T(this.elements.buttons[c])||(this.elements.buttons[c]=[]),this.elements.buttons[c].push(i)):this.elements.buttons[c]=i,i},createRange:function(e,t){var n=D("input",de(F(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.1,value:0,autocomplete:"off",role:"slider","aria-label":r.getLang(e),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,ut.updateRangeFill.call(this,n),n},bindMenuItemShortcuts:function(e,t){var n=this;P(e,"keydown keyup",(function(r){if([32,38,39,40].includes(r.which)&&(r.preventDefault(),r.stopPropagation(),"keydown"!==r.type)){var o,a=H(e,'[role="menuitemradio"]');!a&&[32,39].includes(r.which)?ut.showMenuPanel.call(n,t,!0):32!==r.which&&(40===r.which||a&&39===r.which?(o=e.nextElementSibling,S(o)||(o=e.parentNode.firstElementChild)):(o=e.previousElementSibling,S(o)||(o=e.parentNode.lastElementChild)),X.call(n,o,!0))}}),!1),P(e,"keyup",(function(e){13===e.which&&ut.focusFirstMenuItem.call(n,null,!0)}))},createMenuItem:function(e){var t=this,n=e.value,o=e.list,a=e.type,i=e.title,s=e.badge,c=void 0===s?null:s,l=e.checked,u=void 0!==l&&l,d=F(this.config.selectors.inputs[a]),f=D("button",de(d,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(d.class?d.class:"").trim(),"aria-checked":u,value:n})),p=D("span");p.innerHTML=r.getLang(i),S(c)&&p.appendChild(c),f.appendChild(p),Object.defineProperty(f,"checked",{enumerable:!0,get:function(){return"true"===f.getAttribute("aria-checked")},set:function(e){e&&Array.from(f.parentNode.children).filter((function(e){return H(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),f.setAttribute("aria-checked",e?"true":"false")}});var h=ut.getCoreOptions.call(this);this.listeners.bind(f,"click keyup",(function(e){w(e)&&32!==e.which||(e.preventDefault(),e.stopPropagation(),f.checked=!0,Object.keys(ut.normalOptions).includes(a)&&ut.updateNormalOptions.call(t,a,n),Object.keys(h).includes(a)&&(h[a].netplay&&ct.connected?ct.connection.isInitiator&&ut.updateCoreOptions.call(t,a,n):ut.updateCoreOptions.call(t,a,n)),ut.showMenuPanel.call(t,"home",w(e)))}),a,!1),ut.bindMenuItemShortcuts.call(this,f,a),o.appendChild(f)},updateVolume:function(){S(this.elements.inputs.volume)&&ut.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),S(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume)},setRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;S(e)&&(e.value=t,ut.updateRangeFill.call(this,e))},updateRangeFill:function(e){var t=C(e)?e.target:e;if(S(t)&&"range"===t.getAttribute("type")){if(H(t,this.config.selectors.inputs.volume)){var n=100*t.value;t.setAttribute("aria-valuenow",n),t.setAttribute("aria-valuetext","".concat(n.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);ie&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"))}},toggleMenuButton:function(e,t){U(this.elements.settings.buttons[e],!t)},updateNormalOptions:function(e,t){"mypanel"===e&&"importSates"==t&&this.game.stateloadField.click(),this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=r.getLang(ut.normalOptions[e].options[t]);var n={};n[e]=t,ut.storage.set(n),"shader"===e&&ct.setShader(t),"virtual-gamepad"===e&&ct.toggleVirtualGamepad.call(this,"enabled"===t)},updateCoreOptions:function(e,t){if("nds"==this.system&&!le.wasm)return!0;if(ut.coreOptionsValues[e]=t,"psx"===this.system?(setTimeout((function(){"pcsx_rearmed_frameskip"!=e&&"pcsx_rearmed_memcard2"!=e&&ct.setVariable(e,t)}),100),setTimeout((function(){}),200)):setTimeout((function(){ct.setVariable(e,t)}),50),"nds"===this.system&&le.wasm){var n=this.elements.wrapper.querySelector("canvas");if("screen_rotation"===e)switch(n.style.transform="rotate("+t+"deg)",t){case"0":ct.setVariable("desmume_input_rotation","0");break;case"90":ct.setVariable("desmume_input_rotation","270");break;case"180":ct.setVariable("desmume_input_rotation","180");break;case"270":ct.setVariable("desmume_input_rotation","90")}}if("arcade"===this.system||"fba0.2.97.29"===this.system){var r=this.elements.wrapper.querySelector("canvas");r.height="fba-aspect"===e&&"PAR"===t?r.width/16*9:r.width/4*3}var o=ut.getCoreOptions.call(this),a=ut.storage.get("core-options");if(O(a)&&(a={}),a[e]=t,ut.storage.set({"core-options":a}),this.elements.settings.buttons[e]){var i=this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value));g(o[e].options)?i.innerHTML=o[e].options[t]:i.innerHTML=t}},setOptionMenuItem:function(e,t){var n=this,o=this.elements.settings.panels.home.querySelector('[role="menu"]'),a=this.elements.settings.popup.children[0];Object.keys(e).forEach((function(i){var s=i,c=D("button",de(F(n.config.selectors.buttons.settings),{type:"button",class:W({ejs__control:!0,"ejs__control--forward":!0}),role:"menuitem",item:i,"aria-haspopup":!0}));P(c,"click",(function(){ut.showMenuPanel.call(n,s,!1)}));var l,u=D("span",null,r.getLang(e[i].label)),d=D("span",{class:n.config.classNames.menu.value});g(t)&&(l=t[s]),O(l)&&(l=e[s].default),g(e[s].options)?d.innerHTML=r.getLang(e[s].options[l]):d.innerHTML=r.getLang(l),u.appendChild(d),c.appendChild(u),o.appendChild(c);var f=D("div",{"data-pane":escape(s),hidden:""}),p=D("button",{type:"button",class:W({ejs__control:!0,"ejs__control--back":!0})});p.appendChild(D("span",{"aria-hidden":!0},r.getLang(e[i].label))),p.appendChild(D("span",{class:J("ejs__sr-only")},r.getLang("Go back to previous menu"))),P(f,"keydown",(function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),ut.showMenuPanel.call(n,"home",!0))}),!1),P(p,"click",(function(){ut.showMenuPanel.call(n,"home",!1)})),f.appendChild(p),f.appendChild(D("div",{role:"menu"})),a.appendChild(f),n.elements.settings.buttons[s]=c,n.elements.settings.panels[s]=f;var h=f.querySelector('[role="menu"]');!function(e){if(S(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}(h),g(e[i].options)?Object.keys(e[i].options).forEach((function(t){ut.createMenuItem.call(n,{value:t,list:h,type:s,title:e[i].options[t],badge:null,checked:Boolean(l===t)})})):T(e[i].options)&&e[i].options.forEach((function(e){ut.createMenuItem.call(n,{value:e,list:h,type:s,title:e,badge:null,checked:Boolean(l===e)})}))}))},setNormalOptionsMenu:function(){var e=this,t=this,n={};n.orientation=ut.storage.get("orientation"),n.shader=ut.storage.get("shader"),t.touch?(n["virtual-gamepad"]=ut.storage.get("virtual-gamepad"),P.call(t,t.elements.container,"start-game",(function(){("enabled"===n["virtual-gamepad"]||O(n["virtual-gamepad"]))&&ct.toggleVirtualGamepad.call(t,!0)}))):delete ut.normalOptions["virtual-gamepad"],ut.setOptionMenuItem.call(this,ut.normalOptions,n),P.call(t,t.elements.container,"start-game",(function(){var n=e,r={};He.coreOptions&&Array.isArray(He.coreOptions)&&He.coreOptions.forEach((function(e,t){var n=e.key;r[n]={label:e.label,options:e.options,default:e.default,netplay:e.netplay}})),ct.getGameCoreOptions&&ct.getGameCoreOptions().split("\n").forEach((function(e,t){var n=e.split("; "),o=n[0];if(0===o.indexOf("fba-dipswitch-")||0===o.indexOf("fbneo-dipswitch-")){var a=n[1].split("|"),i=o.replace(/_/g," ").replace(/.+\-(.+)/,"$1"),s=0==o.indexOf("fbneo-dipswitch-")?a.slice(0,-1):a.slice(1,-1),c=a[0].replace("(Default) ","");r[o]={label:i,options:s,default:c,netplay:!0}}}));var o=ut.storage.get("core-options");ut.coreOptionsValues=o||{},ut.setOptionMenuItem.call(t,r,ut.coreOptionsValues),Object.keys(ut.coreOptionsValues).forEach((function(e,t){ut.updateCoreOptions.call(n,e,ut.coreOptionsValues[e])}))}))},updateCoreOptionMenuItems:function(){var e=this.elements.settings.panels.home.querySelector('[role="menu"]'),t=ut.getCoreOptions.call(this);ct.connected?Object.keys(t).forEach((function(n){t[n].netplay&&e.querySelector('[item="'.concat(n,'"]')).setAttribute("disabled","")})):Object.keys(t).forEach((function(t){e.querySelector('[item="'.concat(t,'"]')).removeAttribute("disabled")}))},setCoreOptionsMenu:function(){this.elements.settings.panels.home.querySelector('[role="menu"]'),this.elements.settings.popup.children[0];var e=ut.getCoreOptions.call(this),t=ut.storage.get("core-options");ut.coreOptionsValues=t||{},ut.setOptionMenuItem.call(this,e,t)},checkMenu:function(){var e=this.elements.settings.buttons;!O(e)&&Object.values(e).some((function(e){return!e.hidden})),U(this.elements.settings.menu,!1)},focusFirstMenuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var n=e;S(n)||(n=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var r=n.querySelector('[role^="menuitem"]');X.call(this,r,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(S(t)&&S(n)){var r=t.hidden,o=r;if(b(e))o=e;else if(w(e)&&27===e.which)o=!1;else if(C(e)){var a=t.contains(e.target);if(a||!a&&e.target!==n&&o)return}n.setAttribute("aria-expanded",o),U(t,!o),G(this.elements.container,this.config.classNames.menu.open,o),o&&w(e)?ut.focusFirstMenuItem.call(this,null,!0):o||r||X.call(this,n,w(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,r=t.scrollHeight;return j(t),{width:n,height:r}},showLoadStatePanel:function(){},showMenuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.Selector('[data-pane="'.concat(escape(t),'"]'));if(S(r)){var o=r.parentNode,a=Array.from(o.children).find((function(e){return!e.hidden}));if(le.transitions&&!le.reducedMotion){o.style.width="".concat(a.scrollWidth,"px"),o.style.height="".concat(a.scrollHeight,"px");var i=ut.getMenuSize.call(e,r),s=function t(n){n.target===o&&["width","height"].includes(n.propertyName)&&(o.style.width="",o.style.height="",M.call(e,o,ee,t))};P.call(e,o,ee,s),o.style.width="".concat(i.width,"px"),o.style.height="".concat(i.height,"px")}U(a,!0),U(r,!1),ut.focusFirstMenuItem.call(e,r,n)}},setLoadState:function(e,t){e.appendChild(ut.createButton.call(this,"load-state",{"aria-haspopup":!0,"aria-expanded":!1}));var n=D("div",{class:W({ejs__dialog:!0,"ejs__load-state__container":!0}),hidden:""}),r=D("div");n.appendChild(r),V.call(this,".".concat(J("ejs__dialogs"))).appendChild(n),this.elements.dialogs.loadState=n},setDisk:function(e,t){var n=D("div",{class:J("ejs__disk")});n.appendChild(ut.createButton.call(this,"disk",{"aria-haspopup":!0,"aria-expanded":!1}));var r=D("div",{class:J("ejs__disk__container"),hidden:""}),o=D("div");r.appendChild(o),n.appendChild(r),e.appendChild(n)},setGamepad:function(e,t){var n=ut.createButton.call(this,"gamepad",{"aria-haspopup":!0,"aria-expanded":!1});e.appendChild(n);var r=D("div",{class:W({ejs__dialog:!0,ejs__gamepad__container:!0}),hidden:""}),o=D("div");r.appendChild(o),V.call(this,".".concat(J("ejs__dialogs"))).appendChild(r),this.elements.dialogs.gamepad=r},setCheat:function(e,t){var n=ut.createButton.call(this,"cheat",{"aria-haspopup":!0,"aria-expanded":!1});e.appendChild(n);var r=D("div",{class:W({ejs__dialog:!0,ejs__cheat__container:!0}),hidden:""}),o=D("div");r.appendChild(o),V.call(this,".".concat(J("ejs__dialogs"))).appendChild(r),this.elements.dialogs.cheat=r},setNetplayWidgets:function(){var e=D("div",{class:W({ejs__widget:!0,ejs__widget_netplay:!0})}),t=D("div");e.appendChild(t),V.call(this,".".concat(J("ejs__widgets"))).appendChild(e),this.elements.widgets.netplay=e},setControllToggleWidgets:function(){var e=this,t=D("div",{class:W({ejs__widget:!0,ejs__widget_controls_toggle:!0})},'<svg stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 5H21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 12H21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 19H21" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>'),n=D("div");t.appendChild(n),V.call(this,".".concat(J("ejs__widgets"))).appendChild(t),this.elements.widgets.controlToggle=t,P(this.elements.container,"click touchstart",(function(n){if(!e.started)return!1;e.elements.controls.contains(n.target)||t.contains(n.target)||(U(e.elements.controls.querySelector(J("ejs__menu__container",1)),!0),e.callaction("toggleControls",!1),e.elements.controls.classList.toggle(J("ejs__controls_show"),!1))})),P(t,"click",(function(t){e.elements.controls.classList.toggle(J("ejs__controls_show")),t.stopPropagation()})),P.call(e,e.elements.container,"start-game",(function(){He.Module._event_load_save_files&&He.Module.cwrap("event_load_save_files","",[])();var t=D("div",{class:W({ejs__widget:!0,ejs__widget_load_srm:!0}),title:r.getLang("Import save file")},'<svg stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 6.5V5C3 3.89543 3.89543 3 5 3H16.1716C16.702 3 17.2107 3.21071 17.5858 3.58579L20.4142 6.41421C20.7893 6.78929 21 7.29799 21 7.82843V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V17.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 3H16V8.4C16 8.73137 15.7314 9 15.4 9H8.6C8.26863 9 8 8.73137 8 8.4V3Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 21V13.6C18 13.2686 17.7314 13 17.4 13H15" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 21V17.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 12H1M1 12L4 9M1 12L4 15" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>'),n=D("div");t.appendChild(n),V.call(e,".".concat(J("ejs__widgets"))).appendChild(t);var o=null;(o=D("input")).type="file",o.onchange=function t(n){var r,a=n.target.files;a.length>0&&((r=new FileReader).file_name=a[0].name,r.onload=function(){var t=new Uint8Array(r.result);He.FS.writeFile("/data/saves/".concat(e.savepath,"/").concat(e.gameName,".").concat(e.gameSaveExt),t),He.Module._event_load_save_files()},r.readAsArrayBuffer(a[0])),(o=D("input")).type="file",o.onchange=t,o.accept=".srm,.sav,.dsv,.mcr",e.system.includes(["psx","psx-legacy"])&&(o.accept=".srm,.mcr")},o.accept=".srm,.sav,.dsv,.mcr",e.system.includes(["psx","psx-legacy"])&&(o.accept=".srm,.mcr"),P(t,"click",(function(e){o.click(),e.stopPropagation()}));var a=D("div",{class:W({ejs__widget:!0,ejs__widget_save_srm:!0}),title:r.getLang("Export save file")},'<svg stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 7.5V5C3 3.89543 3.89543 3 5 3H16.1716C16.702 3 17.2107 3.21071 17.5858 3.58579L20.4142 6.41421C20.7893 6.78929 21 7.29799 21 7.82843V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V16.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M6 21V17" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M18 21V13.6C18 13.2686 17.7314 13 17.4 13H15" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 3V8.4C16 8.73137 15.7314 9 15.4 9H13.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 3V6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M1 12H12M12 12L9 9M12 12L9 15" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>'),i=D("div");a.appendChild(i),V.call(e,".".concat(J("ejs__widgets"))).appendChild(a),P(a,"click",(function(t){var n="/data/saves/".concat(e.savepath,"/").concat(e.gameName,".").concat(e.gameSaveExt);""!=e.config.savename&&(n="/data/saves/".concat(e.savepath,"/").concat(e.config.savename,".").concat(e.gameSaveExt));try{var r=He.FS.readFile(n);Object(he.saveAs)(new Blob([r]),e.gameName+"."+e.gameSaveExt)}catch(e){}t.stopPropagation()}))}))},setNetplay:function(e,t){e.appendChild(ut.createButton.call(this,"netplay",{"aria-haspopup":!0,"aria-expanded":!1}));var n=D("div",{class:W({ejs__dialog:!0,ejs__netplay__container:!0}),hidden:""}),r=D("div");n.appendChild(r),V.call(this,".".concat(J("ejs__dialogs"))).appendChild(n),this.elements.dialogs.netplay=n,ut.setNetplayWidgets.call(this)},toggleContextMenu:function(e,t){if(z(e.target,J("ejs__dialogs"))){var n=ut.contextMenu.timer;if(this.started){var r=V.call(this,".".concat(J("ejs__contextmenu")," ul"));if(t){ut.contextMenu.style.display="block",ut.contextMenu.style.left="".concat(e.layerX,"px"),ut.contextMenu.style.top="".concat(e.layerY,"px");var o=Y.call(this,".".concat(J("ejs__contextmenu")," ul li"));Array.from(o).forEach((function(e,t){})),null===r.getAttribute("menu")&&r.setAttribute("menu",""),n&&clearTimeout(n),n=setTimeout((function(){}),4e3),ut.contextMenu.timer=n}else ut.contextMenu.style.display="none"}}},fixMenuPos:function(){document.querySelectorAll("".concat(this.config.selectors.controls.wrapper," > div, ").concat(this.config.selectors.controls.wrapper," > button")).forEach((function(e,t){var n=J("ejs__menu");e.classList.contains(n)&&t%2==0?e.classList.add(J("ejs__menu_right")):e.classList.remove(J("ejs__menu_right"))}))},create:function(e){ut.storage=new mt(this,"ejs_".concat(this.system,"_settings"));var t=D("div",F(this.config.selectors.controls.wrapper));t.classList.add(J("ejs__controls_show")),ut.contextMenu=D("div",{class:J("ejs__contextmenu"),style:"position: absolute; display:none;z-index:9"}),ut.contextMenu.innerHTML='<ul><li><a href="#" onclick="return false">Take Screenshot</a></li><li><a href="#" onclick="return false">Quick Save (F2)</a></li><li><a href="#" onclick="return false">Quick Load (F4)</a></li></ul>',this.elements.container.appendChild(ut.contextMenu);var n=D("div",{class:W({ejs__dialog:!0,ejs__cache__container:!0}),hidden:""});V.call(this,".".concat(J("ejs__dialogs"))).appendChild(n),this.elements.dialogs.cache=n;var r=D("div",{class:W({ejs__dialog:!0,ejs__loading__container:!0}),hidden:""});V.call(this,".".concat(J("ejs__dialogs"))).appendChild(r),this.elements.dialogs.loading=r,t.appendChild(ut.createButton.call(this,"restart")),t.appendChild(ut.createButton.call(this,"play")),t.appendChild(ut.createButton.call(this,"save-state",{"aria-expanded":!1})),ut.setLoadState.call(this,t,e),ut.setDisk.call(this,t,e),ut.supportNetPlay.call(this,t),ut.setNetplay.call(this,t,e),ut.setGamepad.call(this,t,e),ut.setCheat.call(this,t,e);var o=D("div",{class:J("ejs__volume")});o.appendChild(ut.createButton.call(this,"mute"));var a={max:1,step:.01,value:this.config.volume};o.appendChild(ut.createRange.call(this,"volume",de(a,{}))),this.elements.volume=o,t.appendChild(o);var i=D("div",{class:J("ejs__menu")});i.appendChild(ut.createButton.call(this,"settings",{"aria-haspopup":!0,"aria-expanded":!1}));var s=D("div",{class:J("ejs__menu__container"),hidden:""}),c=D("div"),l=D("div",{"data-pane":"home"}),u=D("div",{role:"menu"});return l.appendChild(u),c.appendChild(l),this.elements.settings.panels.home=l,s.appendChild(c),i.appendChild(s),t.appendChild(i),this.elements.settings.popup=s,this.elements.settings.menu=i,t.appendChild(ut.createButton.call(this,"fullscreen")),this.elements.controls=t,ut.setNormalOptionsMenu.call(this),ut.setCoreOptionsMenu.call(this),ut.setControllToggleWidgets.call(this),t},inject:function(){var e,t=this;this.icons=(lt(e={"enter-fullscreen":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M208 281.4c-12.5-12.5-32.76-12.5-45.26-.002l-78.06 78.07l-30.06-30.06c-6.125-6.125-14.31-9.367-22.63-9.367c-4.125 0-8.279 .7891-12.25 2.43c-11.97 4.953-19.75 16.62-19.75 29.56v135.1C.0013 501.3 10.75 512 24 512h136c12.94 0 24.63-7.797 29.56-19.75c4.969-11.97 2.219-25.72-6.938-34.87l-30.06-30.06l78.06-78.07c12.5-12.49 12.5-32.75 .002-45.25L208 281.4zM487.1 0h-136c-12.94 0-24.63 7.797-29.56 19.75c-4.969 11.97-2.219 25.72 6.938 34.87l30.06 30.06l-78.06 78.07c-12.5 12.5-12.5 32.76 0 45.26l22.62 22.62c12.5 12.5 32.76 12.5 45.26 0l78.06-78.07l30.06 30.06c9.156 9.141 22.87 11.84 34.87 6.937C504.2 184.6 512 172.9 512 159.1V23.1C512 10.74 501.3 0 487.1 0z"/></svg>',"exit-fullscreen":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M215.1 272h-136c-12.94 0-24.63 7.797-29.56 19.75C45.47 303.7 48.22 317.5 57.37 326.6l30.06 30.06l-78.06 78.07c-12.5 12.5-12.5 32.75-.0012 45.25l22.62 22.62c12.5 12.5 32.76 12.5 45.26 .0013l78.06-78.07l30.06 30.06c6.125 6.125 14.31 9.367 22.63 9.367c4.125 0 8.279-.7891 12.25-2.43c11.97-4.953 19.75-16.62 19.75-29.56V296C239.1 282.7 229.3 272 215.1 272zM296 240h136c12.94 0 24.63-7.797 29.56-19.75c4.969-11.97 2.219-25.72-6.938-34.87l-30.06-30.06l78.06-78.07c12.5-12.5 12.5-32.76 .0002-45.26l-22.62-22.62c-12.5-12.5-32.76-12.5-45.26-.0003l-78.06 78.07l-30.06-30.06c-9.156-9.141-22.87-11.84-34.87-6.937c-11.97 4.953-19.75 16.62-19.75 29.56v135.1C272 229.3 282.7 240 296 240z"/></svg>',gamepad:'<svg viewBox="0 0 640 512"><path fill="currentColor" d="M480 96H160C71.6 96 0 167.6 0 256s71.6 160 160 160c44.8 0 85.2-18.4 114.2-48h91.5c29 29.6 69.5 48 114.2 48 88.4 0 160-71.6 160-160S568.4 96 480 96zM256 276c0 6.6-5.4 12-12 12h-52v52c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-52H76c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h52v-52c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h52c6.6 0 12 5.4 12 12v40zm184 68c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-80c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"/></svg>',"load-state":'<svg viewBox="0 0 576 512"><path fill="currentColor" d="M572.694 292.093L500.27 416.248A63.997 63.997 0 0 1 444.989 448H45.025c-18.523 0-30.064-20.093-20.731-36.093l72.424-124.155A64 64 0 0 1 152 256h399.964c18.523 0 30.064 20.093 20.73 36.093zM152 224h328v-48c0-26.51-21.49-48-48-48H272l-64-64H48C21.49 64 0 85.49 0 112v278.046l69.077-118.418C86.214 242.25 117.989 224 152 224z"/></svg>',muted:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M301.2 34.85c-11.5-5.188-25.02-3.122-34.44 5.253L131.8 160H48c-26.51 0-48 21.49-48 47.1v95.1c0 26.51 21.49 47.1 48 47.1h83.84l134.9 119.9c5.984 5.312 13.58 8.094 21.26 8.094c4.438 0 8.972-.9375 13.17-2.844c11.5-5.156 18.82-16.56 18.82-29.16V64C319.1 51.41 312.7 40 301.2 34.85zM513.9 255.1l47.03-47.03c9.375-9.375 9.375-24.56 0-33.94s-24.56-9.375-33.94 0L480 222.1L432.1 175c-9.375-9.375-24.56-9.375-33.94 0s-9.375 24.56 0 33.94l47.03 47.03l-47.03 47.03c-9.375 9.375-9.375 24.56 0 33.94c9.373 9.373 24.56 9.381 33.94 0L480 289.9l47.03 47.03c9.373 9.373 24.56 9.381 33.94 0c9.375-9.375 9.375-24.56 0-33.94L513.9 255.1z"/></svg>',netplay:'<svg viewBox="0 0 512 512"><path fill="currentColor" d="M364.215 192h131.43c5.439 20.419 8.354 41.868 8.354 64s-2.915 43.581-8.354 64h-131.43c5.154-43.049 4.939-86.746 0-128zM185.214 352c10.678 53.68 33.173 112.514 70.125 151.992.221.001.44.008.661.008s.44-.008.661-.008c37.012-39.543 59.467-98.414 70.125-151.992H185.214zm174.13-192h125.385C452.802 84.024 384.128 27.305 300.95 12.075c30.238 43.12 48.821 96.332 58.394 147.925zm-27.35 32H180.006c-5.339 41.914-5.345 86.037 0 128h151.989c5.339-41.915 5.345-86.037-.001-128zM152.656 352H27.271c31.926 75.976 100.6 132.695 183.778 147.925-30.246-43.136-48.823-96.35-58.393-147.925zm206.688 0c-9.575 51.605-28.163 104.814-58.394 147.925 83.178-15.23 151.852-71.949 183.778-147.925H359.344zm-32.558-192c-10.678-53.68-33.174-112.514-70.125-151.992-.221 0-.44-.008-.661-.008s-.44.008-.661.008C218.327 47.551 195.872 106.422 185.214 160h141.572zM16.355 192C10.915 212.419 8 233.868 8 256s2.915 43.581 8.355 64h131.43c-4.939-41.254-5.154-84.951 0-128H16.355zm136.301-32c9.575-51.602 28.161-104.81 58.394-147.925C127.872 27.305 59.198 84.024 27.271 160h125.385z"/></svg>',pause:'<path d="M6 1H3c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1zM12 1c-.6 0-1 .4-1 1v14c0 .6.4 1 1 1h3c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1h-3z"/>'},"pause",'<svg viewBox="0 0 320 512"><path d="M272 63.1l-32 0c-26.51 0-48 21.49-48 47.1v288c0 26.51 21.49 48 48 48L272 448c26.51 0 48-21.49 48-48v-288C320 85.49 298.5 63.1 272 63.1zM80 63.1l-32 0c-26.51 0-48 21.49-48 48v288C0 426.5 21.49 448 48 448l32 0c26.51 0 48-21.49 48-48v-288C128 85.49 106.5 63.1 80 63.1z"/></svg>'),lt(e,"play",'<svg viewBox="0 0 320 512"><path d="M361 215C375.3 223.8 384 239.3 384 256C384 272.7 375.3 288.2 361 296.1L73.03 472.1C58.21 482 39.66 482.4 24.52 473.9C9.377 465.4 0 449.4 0 432V80C0 62.64 9.377 46.63 24.52 38.13C39.66 29.64 58.21 29.99 73.03 39.04L361 215z"/></svg>'),lt(e,"restart",'<svg viewBox="0 0 512 512"><path d="M496 48V192c0 17.69-14.31 32-32 32H320c-17.69 0-32-14.31-32-32s14.31-32 32-32h63.39c-29.97-39.7-77.25-63.78-127.6-63.78C167.7 96.22 96 167.9 96 256s71.69 159.8 159.8 159.8c34.88 0 68.03-11.03 95.88-31.94c14.22-10.53 34.22-7.75 44.81 6.375c10.59 14.16 7.75 34.22-6.375 44.81c-39.03 29.28-85.36 44.86-134.2 44.86C132.5 479.9 32 379.4 32 256s100.5-223.9 223.9-223.9c69.15 0 134 32.47 176.1 86.12V48c0-17.69 14.31-32 32-32S496 30.31 496 48z"/></svg>'),lt(e,"save-state",'<svg viewBox="0 0 448 512"><path fill="currentColor" d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"/></svg>'),lt(e,"settings",'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M495.9 166.6C499.2 175.2 496.4 184.9 489.6 191.2L446.3 230.6C447.4 238.9 448 247.4 448 256C448 264.6 447.4 273.1 446.3 281.4L489.6 320.8C496.4 327.1 499.2 336.8 495.9 345.4C491.5 357.3 486.2 368.8 480.2 379.7L475.5 387.8C468.9 398.8 461.5 409.2 453.4 419.1C447.4 426.2 437.7 428.7 428.9 425.9L373.2 408.1C359.8 418.4 344.1 427 329.2 433.6L316.7 490.7C314.7 499.7 307.7 506.1 298.5 508.5C284.7 510.8 270.5 512 255.1 512C241.5 512 227.3 510.8 213.5 508.5C204.3 506.1 197.3 499.7 195.3 490.7L182.8 433.6C167 427 152.2 418.4 138.8 408.1L83.14 425.9C74.3 428.7 64.55 426.2 58.63 419.1C50.52 409.2 43.12 398.8 36.52 387.8L31.84 379.7C25.77 368.8 20.49 357.3 16.06 345.4C12.82 336.8 15.55 327.1 22.41 320.8L65.67 281.4C64.57 273.1 64 264.6 64 256C64 247.4 64.57 238.9 65.67 230.6L22.41 191.2C15.55 184.9 12.82 175.3 16.06 166.6C20.49 154.7 25.78 143.2 31.84 132.3L36.51 124.2C43.12 113.2 50.52 102.8 58.63 92.95C64.55 85.8 74.3 83.32 83.14 86.14L138.8 103.9C152.2 93.56 167 84.96 182.8 78.43L195.3 21.33C197.3 12.25 204.3 5.04 213.5 3.51C227.3 1.201 241.5 0 256 0C270.5 0 284.7 1.201 298.5 3.51C307.7 5.04 314.7 12.25 316.7 21.33L329.2 78.43C344.1 84.96 359.8 93.56 373.2 103.9L428.9 86.14C437.7 83.32 447.4 85.8 453.4 92.95C461.5 102.8 468.9 113.2 475.5 124.2L480.2 132.3C486.2 143.2 491.5 154.7 495.9 166.6V166.6zM256 336C300.2 336 336 300.2 336 255.1C336 211.8 300.2 175.1 256 175.1C211.8 175.1 176 211.8 176 255.1C176 300.2 211.8 336 256 336z"/></svg>'),lt(e,"volume",'<svg viewBox="0 0 640 512"><path d="M412.6 182c-10.28-8.334-25.41-6.867-33.75 3.402c-8.406 10.24-6.906 25.35 3.375 33.74C393.5 228.4 400 241.8 400 255.1c0 14.17-6.5 27.59-17.81 36.83c-10.28 8.396-11.78 23.5-3.375 33.74c4.719 5.806 11.62 8.802 18.56 8.802c5.344 0 10.75-1.779 15.19-5.399C435.1 311.5 448 284.6 448 255.1S435.1 200.4 412.6 182zM473.1 108.2c-10.22-8.334-25.34-6.898-33.78 3.34c-8.406 10.24-6.906 25.35 3.344 33.74C476.6 172.1 496 213.3 496 255.1s-19.44 82.1-53.31 110.7c-10.25 8.396-11.75 23.5-3.344 33.74c4.75 5.775 11.62 8.771 18.56 8.771c5.375 0 10.75-1.779 15.22-5.431C518.2 366.9 544 313 544 255.1S518.2 145 473.1 108.2zM534.4 33.4c-10.22-8.334-25.34-6.867-33.78 3.34c-8.406 10.24-6.906 25.35 3.344 33.74C559.9 116.3 592 183.9 592 255.1s-32.09 139.7-88.06 185.5c-10.25 8.396-11.75 23.5-3.344 33.74C505.3 481 512.2 484 519.2 484c5.375 0 10.75-1.779 15.22-5.431C601.5 423.6 640 342.5 640 255.1S601.5 88.34 534.4 33.4zM301.2 34.98c-11.5-5.181-25.01-3.076-34.43 5.29L131.8 160.1H48c-26.51 0-48 21.48-48 47.96v95.92c0 26.48 21.49 47.96 48 47.96h83.84l134.9 119.8C272.7 477 280.3 479.8 288 479.8c4.438 0 8.959-.9314 13.16-2.835C312.7 471.8 320 460.4 320 447.9V64.12C320 51.55 312.7 40.13 301.2 34.98z"/></svg>'),lt(e,"cheat",'<svg viewBox="0 0 496 512"><path fill="currentColor" d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 448c-110.3 0-200-89.7-200-200S137.7 56 248 56s200 89.7 200 200-89.7 200-200 200zm-80-216c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32-32 14.3-32 32 14.3 32 32 32zm4 72.6c-20.8 25-51.5 39.4-84 39.4s-63.2-14.3-84-39.4c-8.5-10.2-23.7-11.5-33.8-3.1-10.2 8.5-11.5 23.6-3.1 33.8 30 36 74.1 56.6 120.9 56.6s90.9-20.6 120.9-56.6c8.5-10.2 7.1-25.3-3.1-33.8-10.1-8.4-25.3-7.1-33.8 3.1z" class=""></path></svg>'),lt(e,"disk",'<svg viewBox="0 0 24 24" fill="none"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9ZM11 12C11 12.5523 11.4477 13 12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12Z" fill="currentColor" /><path d="M5 12C5 8.13401 8.13401 5 12 5V7C9.23858 7 7 9.23858 7 12H5Z" fill="currentColor" /><path d="M12 17C14.7614 17 17 14.7614 17 12H19C19 15.866 15.866 19 12 19V17Z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1C5.92487 1 1 5.92487 1 12C1 18.0751 5.92487 23 12 23C18.0751 23 23 18.0751 23 12C23 5.92487 18.0751 1 12 1ZM3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12Z" fill="currentColor" /></svg>'),e),this.id=Math.floor(1e4*Math.random());var n=null;this.elements.controls=null;var r={id:this.id},a=!0;x(this.config.controls)&&(this.config.controls=this.config.controls.call(this.props)),this.config.controls||(this.config.controls=[]),S(this.config.controls)||o.str(this.config.controls)?n=this.config.controls:(n=ut.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality}),a=!1);var i,s=function(e){var t=e;return Object.entries(r).forEach((function(e){var n,r,o=(r=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),a=o[0],i=o[1];t=fe(t,"{".concat(a,"}"),i)})),t};if(a&&(o.str(this.config.controls)?n=s(n):S(n)&&(n.innerHTML=s(n.innerHTML))),o.str(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),S(i)||(i=this.elements.container),i[S(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),S(this.elements.controls)||ut.findElements.call(this),!O(this.elements.buttons)){var c=function(e){var n=t.config.classNames.controlPressed;Object.defineProperty(e,"pressed",{enumerable:!0,get:function(){return z(e,n)},set:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];G(e,n,t)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(e){T(e)||E(e)?Array.from(e).filter(Boolean).forEach(c):c(e)}))}window.navigator.userAgent.includes("Edge")&&te(i),ut.fixMenuPos.call(this)}};function dt(){if(this.enabled){var e=this.player.elements.buttons.fullscreen;S(e)&&(e.pressed=this.active),I.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0),se||q.call(this.player,this.target,this.active)}}function ft(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",G(this.target,this.player.config.classNames.fullscreen.fallback,e),dt.call(this)}class pt{constructor(e){var t=this;this.player=e,this.scrollPosition={x:0,y:0},P.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){dt.call(t)})),this.update()}update(){this.enabled,G(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}enter(){this.enabled&&(this.native?this.prefix?O(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen():ft.call(this,!0))}exit(){if(this.enabled)if(this.native)if(this.prefix){if(!O(this.prefix)){var e="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(e).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document);else ft.call(this,!1)}toggle(){this.active?this.exit():this.enter()}get enabled(){return this.native}get active(){return!!this.enabled&&(this.native?(this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement)===this.target:z(this.target,this.player.config.classNames.fullscreen.fallback))}get target(){return oe?this.player.game:this.player.elements.container}get native(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get property(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}get prefix(){if(x(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!x(document["".concat(t,"ExitFullscreen")])&&!x(document["".concat(t,"CancelFullScreen")])||(e=t,0))})),e}}class ht{lastKey=null;focusTimer=null;lastKeyDown=null;constructor(e){let t=this;t.emulator=e,t.toggleMenu=t.toggleMenu.bind(t),t.setTabFocus=t.setTabFocus.bind(t),t.firstTouch=t.firstTouch.bind(t)}toggleMenu(e){ut.toggleMenu.call(this.emulator,e)}firstTouch(){var e=this.emulator,t=e.elements;e.touch=!0,G(t.container,e.config.classNames.isTouch,!0)}setTabFocus(e){var t=this.emulator,n=t.elements,r=t;if(clearTimeout(this.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);var o,a=e.timeStamp-this.lastKeyDown<=20;("focus"!==e.type||a)&&(o=r.config.classNames.tabFocus,G(Y.call(r,".".concat(o)),o,!1),this.focusTimer=setTimeout((function(){var e=document.activeElement;n.container.contains(e)&&G(document.activeElement,r.config.classNames.tabFocus,!0)}),10))}}global(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.emulator;A.call(t,document.body,"click",this.toggleMenu,e),N.call(t,document.body,"touchstart",this.firstTouch),A.call(t,document.body,"keydown focus blur",this.setTabFocus,e,!1,!0),P.call(t,document.body,"keyup",(function(e){t.started&&(113===e.which&&(e.shiftKey?null===t.elements.buttons.saveState.getAttribute("hidden")&&I.call(t,t.elements.buttons.saveState,"click"):ct.quickSaveState()),115===e.which&&(e.shiftKey?null===t.elements.buttons.loadState.getAttribute("hidden")&&I.call(t,t.elements.buttons.loadState,"click"):ct.quickLoadState()),120===e.which&&I.call(t,t.elements.buttons.mute,"click"))}))}container(){var e,t=this.emulator,n=t.elements;P.call(t,n.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen start-game",(function(r){var o=n.controls;o&&"enterfullscreen"===r.type&&(o.pressed=!1,o.hover=!1);var a=0;["touchstart","touchmove","mousemove","start-game"].includes(r.type)&&(t.callaction("toggleControls",!0),a=t.touch?3e3:2e3),clearTimeout(e),e=setTimeout((function(){return t.callaction("toggleControls",!1)}),a),n.controls.setAttribute("data-timer",e)})),P.call(t,window,"resize",(function(e){var n=t.elements.container.clientHeight,r=Y.call(t,".".concat(J("ejs__menu__container"),' [role="menu"]'));Array.from(r).forEach((function(e){e.style.maxHeight="".concat(n-137,"px"),e.style.overflow="auto"})),He.Module&&He.Module.canvas,t.elements.container.clientWidth/t.elements.container.clientHeight<1.3?G(t.elements.container,J("portrait"),!0):G(t.elements.container,J("portrait"),!1)})),I.call(t,window,"resize"),P.call(t,t.elements.container,"enterfullscreen",(function(e){setTimeout((function(){I.call(t,window,"resize")}),300)})),P.call(t,t.elements.container,"exitfullscreen",(function(e){setTimeout((function(){I.call(t,window,"resize")}),300)})),P.call(t,t.elements.container,"start-game",(function(e){var n=window.document.createEvent("UIEvents");n.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(n),G(t.elements.container,J("game-started"),!0)})),P.call(t,t.elements.container,"blur",(function(e){var n=e.currentTarget;setTimeout((function(){n.contains(document.activeElement)||I.call(t,t.elements,"blurgame")}),0)})),P.call(t,t.elements.container,"focus",(function(e){var n=e.currentTarget;setTimeout((function(){n.contains(document.activeElement)&&I.call(t,t.elements,"focusgame")}),0)}))}media(){var e=this.emulator,t=e.elements,n=e;P.call(n,n.game,"volumechange",(function(e){return ut.updateVolume.call(n,e)})),P.call(n,t.container,"contextmenu",(function(e){n.touch||n.lightgun||n.mouse||ut.toggleContextMenu.call(n,e,!0),e.preventDefault()}),!1),P.call(n,t.container,"mousewheel",(function(e){e.stopPropagation()}),!1),P.call(n,t.container,"mousedown",(function(e){n.touch||n.mouse||ut.toggleContextMenu.call(n,e,!1)}),!1),P.call(n,n.game,"volumechange",(function(){n.storage.set({volume:n.volume,muted:n.muted}),ct.setVolume&&ct.setVolume()}));var r=n.config.events.concat(["keyup","keydown"]).join(" ");P.call(n,n.game,r,(function(e){var r=e.detail,o=void 0===r?{}:r;"error"===e.type&&(o=n.game.error),I.call(n,t.container,e.type,!0,o)}))}proxy(e,t,n){var r=this.emulator,o=r.config.listeners[n],a=!0;x(o)&&(a=o.call(r,e)),a&&x(t)&&t.call(r,e)}bind(e,t,n,r){var o=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=this.emulator,s=i.config.listeners[r],c=x(s);P.call(i,e,t,(function(e){return o.proxy(e,n,r)}),a&&!c)}controls(){var e=this,t=this.emulator,n=t.elements,r=ae?"change":"input";if(this.bind(n.buttons.mute,"click",(function(){t.muted=!t.muted}),"mute"),this.bind(n.buttons.fullscreen,"click",(function(){t.fullscreen.toggle()}),"fullscreen"),this.bind(n.buttons.gamepad,"click",(function(){t.callaction("toggleControls",!1),U(n.dialogs.gamepad,!1)}),"mute"),this.bind(n.buttons.saveState,"click",(function(){I.call(t,t.elements.container,"savestate-start",!1,{});var e=ct.saveState(),n=ct.getScreenData();I.call(t,t.elements.container,"savestate",!1,{state:e,screenshot:n})}),"mute"),this.bind(n.buttons.loadState,"click",(function(){I.call(t,t.elements.container,"loadstate",!1,{})}),"mute"),this.bind(n.buttons.settings,"click",(function(e){e.stopPropagation(),ut.toggleMenu.call(t,e)})),this.bind(n.buttons.settings,"keyup",(function(e){var n=e.which;[13,32].includes(n)&&(13!==n?(e.preventDefault(),e.stopPropagation(),ut.toggleMenu.call(t,e)):ut.focusFirstMenuItem.call(t,null,!0))}),null,!1),this.bind(n.settings.menu,"keydown",(function(e){27===e.which&&ut.toggleMenu.call(t,e)})),se){var o=Y.call(t,'input[type="range"]');Array.from(o).forEach((function(t){return e.bind(t,r,(function(e){return te(e.target)}))}))}ie&&Array.from(Y.call(t,'input[type="range"]')).forEach((function(n){e.bind(n,"input",(function(e){return ut.updateRangeFill.call(t,e.target)}))})),this.bind(n.inputs.volume,r,(function(e){t.volume=e.target.value}),"volume"),this.bind(n.controls,"mouseenter mouseleave",(function(e){"mouseleave"===e.type&&null===e.toElement?n.controls.hover=!0:n.controls.hover=!t.touch&&"mouseenter"===e.type})),this.bind(n.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){if(["mousedown","touchstart"].includes(e.type)){n.controls.pressed=!0;var t=n.controls.getAttribute("data-timer2");clearTimeout(t)}else{var r=setTimeout((function(){n.controls.pressed=!1}),4e3);n.controls.setAttribute("data-timer2",r)}})),this.bind(n.controls,"focusin focusout",(function(n){var r=t.config,o=t.elements,a="focusin"===n.type,i=o.controls.getAttribute("data-timer");if(G(o.controls,r.classNames.noTransition,a),t.callaction("toggleControls",a),a){setTimeout((function(){G(o.controls,r.classNames.noTransition,!1)}),0);var s=e.touch?3e3:4e3;clearTimeout(i),i=setTimeout((function(){return t.callaction("toggleControls",!1)}),s),o.controls.setAttribute("data-timer",i)}})),this.bind(n.inputs.volume,"wheel",(function(e){var n,r,o=e.webkitDirectionInvertedFromDevice,a=(n=[e.deltaX,-e.deltaY].map((function(e){return o?-e:e})),r=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),i=a[0],s=a[1],c=Math.sign(Math.abs(i)>Math.abs(s)?i:s);t.increaseVolume(c/50);var l=t.game.volume;(1===c&&l<1||-1===c&&l>0)&&e.preventDefault()}),"volume",!1),this.bind(n.controls,"contextmenu",(function(e){e.stopPropagation()})),this.bind(n.contextMenu,"contextmenu",(function(e){e.stopPropagation()}))}}class mt{constructor(e,t){this.enabled=!0,this.key=t}get(e){var t=window.localStorage.getItem(this.key);if(O(t))return null;var n=JSON.parse(t);return o.str(e)&&e.length?n[e]:n}set(e){var t=this.get();O(t)&&(t={}),de(t,e),window.localStorage.setItem(this.key,JSON.stringify(t))}}class vt{defaultConfig={volume:.5,muted:!1,i18n:{restart:"Restart",play:"Play",pause:"Pause",played:"Played",volume:"Volume",mute:"Mute (F9)",unmute:"Unmute (F9)",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",settings:"Settings",saveState:"Save State",loadState:"Load State",disk:"Disk",netplay:"Netplay",gamepad:"Controls Settings",cheat:"Cheats",menuBack:"Go back to previous menu",normal:"Normal",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",playNow:"Play Now"},listeners:{play:null,pause:null,restart:null,rewind:null,mute:null,volume:null,fullscreen:null},events:["ready"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".ejs",controls:{container:null,wrapper:".jes__controls"},buttons:{play:'[data-btn="play"]',pause:'[data-btn="pause"]',mute:'[data-btn="mute"]',fullscreen:'[data-btn="fullscreen"]',settings:'[data-btn="settings"]',saveState:'[data-btn="save-state"]',loadState:'[data-btn="load-state"]',gamepad:'[data-btn="gamepad"]',netplay:'[data-btn="netplay"]',cheat:'[data-btn="cheat"]'},inputs:{volume:'[data-range="volume"]'}},classNames:{type:"ejs--video",video:"ejs__video-wrapper",poster:"ejs__poster",posterEnabled:"ejs__poster-enabled",control:"ejs__control",controlPressed:"ejs__control--pressed",playing:"ejs--playing",paused:"ejs--paused",stopped:"ejs--stopped",loading:"ejs--loading",hover:"ejs--hover",tooltip:"ejs__tooltip",hotkey:"ejs__hotkey",hidden:"ejs__sr-only",hideControls:"ejs--hide-controls",isIos:"ejs--is-ios",isTouch:"ejs--is-touch",uiSupported:"ejs--full-ui",noTransition:"ejs--no-transition",menu:{value:"ejs__menu__value",badge:"ejs__badge",open:"ejs--menu-open"},fullscreen:{enabled:"ejs--fullscreen-enabled",fallback:"ejs--fullscreen-fallback"},tabFocus:"ejs__tab-focus"},gameParentUrl:[],offline:!1};elements={container:null,buttons:{},display:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}},dialogs:{gamepad:null,loading:null,netplay:null},widgets:{}};fullscreen={active:!1};mode=2;hash="";lightgun=!1;mouse=!1;multitap=!1;keyboard=!1;savename="";ready=!1;paused=!0;started=!1;focused=!1;RootPath=r.RootPath||location.pathname;constructor(e,t){var n=this;o.elm(e)?n.game=e:o.str(e)?n.game=r.$(e):o.obj(e)&&e.length&&(n.game=e[0]),n.game.emulator||(o.defines(n,{T:r,I:o},1),n.runaction=r.runaction,n.callaction=r.callaction,t.gameParentUrl=t.gameParentUrl||[],o.str(t.gameParentUrl)&&(t.gameParentUrl=[t.gameParentUrl]),n.version=i.a,"undefined"!=typeof EJS_savename&&""!=EJS_savename&&(n.savename=EJS_savename),t.savename=n.savename,n.storageSupported=!0,n.touch=le.touch,n.game.innerHTML="",n.config=o.assign({},n.defaultConfig,vt.defaults,t||{}),n.lightgun=n.config.lightgun,n.mouse=n.config.mouse,n.multitap=n.config.multitap,n.cheats=n.config.cheats,n.savepath=n.config.system,n.cheats||(n.cheats=[]),n.color=n.config.color,"mame"==n.system&&(n.system="mame0.193"),n.config.url="",o.toArr(n.config.classNames,(e=>{o.str(e[1])?n.config.classNames[e[0]]=W(o.toObj([[e[1],!0]])):o.toArr(e[1],(t=>{n.config.classNames[e[0]][t[0]]=W(o.toObj([[t[1],!0]]))}))})),r.lang.restart||o.assign(r.lang,n.config.i18n),n.config.selectors.controls.wrapper=".".concat(J("ejs__controls")),n.config.selectors.container=".".concat(J("ejs")),n.config.mute=!0,n.eventListeners=[],n.listeners=new ht(n),n.storage=new mt(n,"ejs_settings"),o.elm(n.elements.container)||(n.elements.container=r.$append(n.game.parentNode,r.$ce("div")),r.$append(n.elements.container,n.game)),o.defines(n.game,{emulator:n,loader:He,controller:ct},1),o.defines(n.game,{Module:{get:()=>He.Module}}),vt.elements.push(n.game),n.elements.container.appendChild(D("div",{class:J("ejs__widgets")})),n.elements.container.appendChild(D("div",{class:J("ejs__dialogs")})),n.callaction("addStyleHook"),ct.setup.call(n),n.callaction("build"),n.listeners.container(),n.listeners.global(),n.fullscreen=new pt(n),n.create())}restart(){this.currentTime=0}increaseVolume(e){var t=this.game.muted?0:this.volume;this.volume=t+(y(e)?e:0)}decreaseVolume(e){this.increaseVolume(-e)}toggleControls(e){if(this.started){var t=void 0===e?void 0:!e,n=G(this.elements.container,this.config.classNames.hideControls,t);return n&&ut.toggleMenu.call(this,!1),!n}return!1}loadState(e){ct.loadState(e,0)}on(e,t){P.call(this,this.elements.container,e,t)}once(e,t){N.call(this,this.elements.container,e,t)}off(e,t){M(this.elements.container,e,t)}set playing(e){Array.from(this.elements.buttons.play||[]).forEach((function(t){t.pressed=e})),this.paused=!e}get playing(){return Boolean(this.ready&&!this.paused)}set volume(e){var t=e;o.str(t)&&(t=Number(t)),y(t)||(t=this.storage.get("volume")),y(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.game.volume=t,!O(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.game.volume)}set muted(e){var t=e;b(t)||(t=this.storage.get("muted")),b(t)||(t=this.config.muted),this.config.muted=t,this.game.muted=t}get muted(){return Boolean(this.game.muted)}get system(){return this.config.system}set system(e){this.config.system=e}SelectorAll(e){return this.elements.container.querySelectorAll(e)}Selector(e){return this.elements.container.querySelector(e)}action={addStyleHook(){G(this.elements.container,this.config.selectors.container.replace(".",""),!0),G(this.elements.container,this.config.classNames.uiSupported,!0),G(this.elements.container,this.config.classNames.hideControls,!0)},build(){let e=this;e.listeners.media(),S(e.elements.controls)||(ut.inject.call(e),e.listeners.controls()),e.volume=null,e.muted=null,ut.updateVolume.call(e),G(e.elements.container,e.config.classNames.isTouch,e.touch),e.ready=!0},toggleControls(e){let t=this;var n=t.elements.controls;if(n){var r=0,o=Y.call(t,".".concat(J("ejs__dialogs")," > .").concat(J("ejs__dialog")));Array.from(o).forEach((function(e,t){!0!==e.hidden&&(r+=1)})),r>0?t.toggleControls(!1):t.toggleControls(Boolean(e||t.paused||n.pressed||n.hover))}}};create(){var e,t,n=this,i=n.elements.container,s=0,c={psx:["bin","iso","cue","img","mdf","pbp","toc","cbn","m3u"],nds:["nds","bin"],nes:["fds","nes","unif","unf"],mesen:["fds","nes","unif","unf"],snes:["smc","fig","sfc","gd3","gd7","dx2","bsx","swc"],snes2002:["smc","fig","sfc","gd3","gd7","dx2","bsx","swc"],snes2005:["smc","fig","sfc","gd3","gd7","dx2","bsx","swc"],snes2010:["smc","fig","sfc","gd3","gd7","dx2","bsx","swc"],gb:["gb","gbc","dmg"],gba:["gb","gbc","gba"],vbanext:["gba"],vb:["vb","vboy","bin"],"3do":["iso","bin","cue"],lynx:["lnx"],jaguar:["j64","jag","rom","abs","cof","bin","prg"],a7800:["a78","bin"],a2600:["a26","bin"],ngp:["ngp","ngc"],n64:["n64","v64","z64","bin","u1","ndd"],pce:["pce","bin","iso","cue","ccd","img","chd"],pcfx:["ccd","toc","chd","cue"],sega:["mdx","md","smd","gen","bin","iso","cue","sms","gg","sg","68k","chd"],segacd:["mdx","md","smd","gen","bin","iso","cue","sms","gg","sg","68k","chd","m3u"],"32x":["32x","bin","gen","smd","md","cue","iso","sms"],saturn:["bin","cue","iso"],msx:["rom","mx1","mx2","dsk","cas"],bluemsx:["rom","ri","mx1","mx2","col","dsk","cas","sg","sc","m3u"],ws:["ws","wsc"],arcade:["zip"],"fba0.2.97.29":["zip"],mame2003:["zip"],mame:["zip"]},l={psx:"psx",nds:"nds",nes:"nes",mesen:"mesen",snes:"snes",snes2002:"snes2002",snes2005:"snes2005",snes2010:"snes2010",gb:"gb",gbc:"gb",gba:"gba",vbanext:"vbanext",vb:"vb",n64:"n64","3do":"3do",segaMS:"sega",segaGG:"sega",segaMD:"sega",segaCD:"segacd",sega32x:"32x",segaSaturn:"saturn",ngp:"ngp",pce:"pce",pcfx:"pcfx",msx:"bluemsx",atari2600:"a2600",atari7800:"a7800",lynx:"lynx",ws:"ws",arcade:"arcade","fba0.2.97.29":"fba0.2.97.29",fbneo:"fbneo",jaguar:"jaguar",mame2003:"mame2003","mame0.193":"mame","mame0.243":"mame0.243"},u=document.createElement("canvas"),d=document.createElement("input");U(d,!0),n.game.appendChild(u),n.game.appendChild(d),He.loading=D("div",{class:n.config.classNames.loading}),i.appendChild(He.loading),He.loading.innerHTML=`\n            <div>\n                <div class="${J("loading-info")}" style="position: absolute;bottom: 20px;left: 50%;transform: translateX(-50%);z-index:2">\n                    <div class="${J("p1")}"></div>\n                    <div class="${J("p2")}"></div>\n                    <div class="${J("p3")}"></div>\n                </div>\n                <div style="position: absolute;bottom: 20px;left: 50%;transform: translateX(-50%);width: 100%;text-align: center;z-index: 1;">\n                    <a href="#" onclick="return false" class="${J("start-game")}">${r.getLang("play Now")}</a>\n                    <div style="font-size: 18px;padding-top:5px;display:none">\n                        ${r.getLang("Save Game Roms")}: \n                        <label for="ejs-save-rom-1">\n                            <input id="ejs-save-rom-1" name="ejs-save-rom" type="radio"> ${r.getLang("Local Directory")} \n                        </label>\n                        <label for="ejs-save-rom-2">\n                            <input id="ejs-save-rom-2" name="ejs-save-rom" type="radio"> ${r.getLang("Browser Storage")} \n                        </label>\n                        <label for="ejs-save-rom-3">\n                            <input id="ejs-save-rom-3" name="ejs-save-rom" type="radio"> ${r.getLang("Don't Save")} \n                        </label>\n                    </div>\n                </div>\n            </div>`;var f=e=>He.loading.querySelector(e),p=f(J("loading-info",1)),h=f(J("p1",1)),m=f(J("p2",1)),v=f(J("p3",1)),_=f(J("start-game",1));o.assign(n,{LoadingP1:h,LoadingP2:m,LoadingP3:v}),P.call(n,i,"click",(function(e){if(n.started){var t=n.Selector(J("ejs__dialogs",1)).querySelector(J("ejs__focus_notice__container",1));t&&t.contains(e.target)&&setTimeout((function(){U(t,!0)}),5)}})),P.call(n,i,"focusin",(function(e){if(document.activeElement!=i)return!1;n.focused=!0,U(n.Selector(J("ejs__dialogs",1)).querySelector(J("ejs__focus_notice__container",1)),!0)})),P.call(n,i,"focusout",(function(e){if(n.started&&!e.relatedTarget)if(i==e.srcElement){var t=document.querySelectorAll(".".concat(J("ejs")," > *")),o=!0;if(t.forEach((function(e,t){z(e,J("ejs__controls"))||z(e,n.config.classNames.video)||z(e,J("ejs__widgets"))||z(e,J("ejs__dialogs"))||z(e,J("ejs__contextmenu"))||z(e,J("ejs--loading"))||e.clientWidth>=.8*i.clientWidth&&e.clientHeight>=.8*i.clientHeight&&(o=!1)})),!o)return n.focused=!1,!1;var a=n.Selector(J("ejs__dialogs",1)).querySelector(J("ejs__focus_notice__container",1));if(a)U(a,!1);else{var s=D("div",{class:W({ejs__dialog:!0,ejs__focus_notice__container:!0})}),c=D("div",{style:"color:#fff !important"});c.innerHTML=r.getLang("Click to make keyboard keys work"),s.appendChild(c),n.Selector(J("ejs__dialogs",1)).appendChild(s)}n.focused=!1}else i.focus()})),le.webgl.DETECTED||(U(_,!0),v.innerHTML='<strong style="color:#f00;text-shadow: 0px 0px 3px;">Failed to initialize WebGL.</strong>');window.URL||window.webkitURL;xe.a.interceptors.request.use((function(e){return e.headers["Content-Type"]="application/x-www-form-urlencoded","options"===e.method.toLowerCase()&&(e.method="get"),e}),(function(e){return Promise.reject(e)})),P.call(n,i,"start-game",(function(e){n.started=!0,n.playing=!0,U(p,!0),n.callaction("toggleControls",!0);var t=J("ejs__tooltip--visible"),r=n.elements.buttons.gamepad.querySelector(J("ejs__tooltip",1));G(r,t,!0),setTimeout((function(){G(r,t,!1)}),5e3),U(_,!0);var o=de(ut.defaultCoreOptionsValues.call(n),ut.storage.get("core-options")||{});"n64"===n.system&&o&&Object.keys(o).forEach((function(e){"glupen64-aspect"===e&&"16:9"===o[e]&&(u.height=u.width/16*9,He.aspectRatio=16/9)})),"arcade"!==n.system&&"fba0.2.97.29"!==n.system||o&&Object.keys(o).forEach((function(e){"fba-aspect"===e&&"PAR"===o[e]&&(u.height=u.width/16*9,He.aspectRatio=16/9)})),"gba"===n.system&&(u.height=u.width/1.5,He.aspectRatio=1.5),window.setTimeout((function(){}),150),function(){var e=n;if("undefined"!=typeof RI){document.removeEventListener("mousemove",RI.eventHandler,!1),u.removeEventListener("mousedown",RI.canvasEventHandler,!1),u.removeEventListener("mouseup",RI.canvasEventHandler,!1),e.elements.container.addEventListener("mousemove",(function(e){var t=0,n=0,r=e.offsetX-He.Module.canvas.offsetLeft,o=e.offsetY-He.Module.canvas.offsetTop;switch(e.type){case"mousemove":r<0?(r=0,t=-He.Module.canvas.offsetWidth):r>He.Module.canvas.offsetWidth?(r=He.Module.canvas.offsetWidth,t=He.Module.canvas.offsetWidth):t=r-RI.currentX,o<0?(o=0,n=-He.Module.canvas.offsetHeight):o>He.Module.canvas.offsetHeight?(o=He.Module.canvas.offsetHeight,n=He.Module.canvas.offsetHeight):n=o-RI.currentY,RI.currentX=r,RI.currentY=o;for(var a=0;a<RI.contexts.length;a+=1)HEAP32[RI.contexts[a].state+32>>2]=t,HEAP32[RI.contexts[a].state+36>>2]=n}}),!1),e.elements.container.addEventListener("mousedown",RI.canvasEventHandler,!1),e.elements.container.addEventListener("mouseup",RI.canvasEventHandler,!1);var t=function(e){if(e.targetTouches[0]){var t,n,r=0,o=0,a=e.target.getBoundingClientRect(),i=e.targetTouches[0].clientX-a.left,s=e.targetTouches[0].clientY-a.top;i<0?(i=0,r=-He.Module.canvas.offsetWidth):i>He.Module.canvas.offsetWidth?(i=He.Module.canvas.offsetWidth,r=He.Module.canvas.offsetWidth):r=i-RI.currentX,s<0?(s=0,o=-He.Module.canvas.offsetHeight):s>He.Module.canvas.offsetHeight?(s=He.Module.canvas.offsetHeight,o=He.Module.canvas.offsetHeight):o=s-RI.currentY,RI.currentX=i,RI.currentY=s;for(var c=0;c<RI.contexts.length;c+=1)HEAP32[RI.contexts[c].state+32>>2]=r,HEAP32[RI.contexts[c].state+36>>2]=o;switch(e.type){case"touchend":case"touchstart":if(0===e.button)n=40;else{if(2!==e.button)break;n=41}t="touchend"===e.type?0:1;for(var l=0;l<RI.contexts.length;l+=1)HEAP8[RI.contexts[l].state+n>>0]=t}}};e.elements.container.addEventListener("touchstart",t,!1),e.elements.container.addEventListener("touchend",t,!1)}else{var r=function(t){var n=new MouseEvent(t.type,{isTrusted:!1,altKey:t.altKey,bubbles:!1,button:t.button,buttons:t.buttons,cancelBubble:!1,cancelable:!0,clientX:t.clientX,clientY:t.clientY,composed:!0,ctrlKey:!1,defaultPrevented:!1,detail:t.detail,eventPhase:t.eventPhase,layerX:t.layerX,layerY:t.layerY,metaKey:t.metaKey,movementX:t.movementX,movementY:t.movementY,offsetX:t.offsetX,offsetY:t.offsetY,pageX:t.pageX,pageY:t.pageY,which:t.which,x:t.x,y:t.y});He.Module.canvas.dispatchEvent(n),e.elements.wrapper.dispatchEvent(n),e.system};He.Module.canvas.addEventListener("mousemove",(function(e){e.stopPropagation()})),He.Module.canvas.addEventListener("mousedown",(function(e){e.stopPropagation()})),He.Module.canvas.addEventListener("mouseup",(function(e){e.stopPropagation()})),He.Module.canvas.addEventListener("touchstart",(function(e){e.stopPropagation()})),He.Module.canvas.addEventListener("touchsend",(function(e){e.stopPropagation()})),He.Module.canvas.addEventListener("touchmove",(function(e){e.stopPropagation()}));var o=function(t){var n,r={isTrusted:!1,altKey:t.altKey,bubbles:!1,button:t.button,buttons:t.buttons,cancelBubble:!1,cancelable:!0,clientX:t.clientX,clientY:t.clientY,composed:!0,ctrlKey:!1,defaultPrevented:!1,detail:t.detail,eventPhase:t.eventPhase,layerX:t.layerX,layerY:t.layerY,metaKey:t.metaKey,movementX:t.movementX,movementY:t.movementY,offsetX:t.offsetX,offsetY:t.offsetY,pageX:t.pageX,pageY:t.pageY,which:t.which,x:t.x,y:t.y};"touchstart"==t.type?n=new MouseEvent("mousedown",r):"touchsend"==t.type?n=new MouseEvent("mouseup",r):"touchmove"==t.type&&(n=new MouseEvent("mousemove",r)),n&&(He.Module.canvas.dispatchEvent(n),e.elements.wrapper.dispatchEvent(n),e.system)};e.elements.container.addEventListener("mousemove",r,!1),e.elements.container.addEventListener("mousedown",r,!1),e.elements.container.addEventListener("mouseup",r,!1),e.elements.container.addEventListener("touchstart",o,!1),e.elements.container.addEventListener("touchend",o,!1),e.elements.container.addEventListener("touchmove",o,!1)}}(),"msx"===n.system&&function(e){if("undefined"!=typeof RI){document.removeEventListener("keydown",RI.eventHandler,!1),document.removeEventListener("keyup",RI.eventHandler,!1);var t=function(e){var t=e.keyCode,n=t>>3,r=1<<(7&t);switch(e.type){case"keyup":case"keydown":if(n>=32)throw"key code error! bad code: "+t;for(var o=0;o<RI.contexts.length;o++){var a=HEAP8[RI.contexts[o].state+n>>0];"keyup"===e.type?a&=~r:a|=r,HEAP8[RI.contexts[o].state+n>>0]=a}}};document.addEventListener("keydown",t,!1),document.addEventListener("keyup",t,!1)}}(),setTimeout((function(){var e;e=ce(),null===ct.setVolume&&"undefined"!=typeof RA?(RA.queueAudio=function(){var t,r=n.volume,o=RA.bufIndex;t=RA.bufIndex?RA.buffers[RA.bufIndex-1].endTime:RA.context.currentTime,RA.buffers[o].endTime=t+RA.buffers[o].duration;var a=RA.context.createBufferSource();if(a.buffer=RA.buffers[o],n.muted&&(r=0),1===r)a.connect(RA.context.destination);else{var i=RA.context.createGain();a.connect(i),i.connect(RA.context.destination),oe||"chrome"===e.name&&parseInt(e.version,10)<=60||"firefox"===e.name&&parseInt(e.version,10)<=56||"opera"===e.name&&parseInt(e.version,10)<=44?i.gain.value=r:"firefox"===e.name?i.gain.setValueAtTime(r,RA.context.currentTime):i.gain.setValueAtTime(r,RA.context.currentTime,0)}a.start(t),RA.bufIndex+=1,RA.bufOffset=0},se&&window.addEventListener("touchstart",(function(){if(RA.context){RA.context.resume();var e=RA.context.createBufferSource();e.connect(RA.context.destination),e.start()}}),!1)):ct.setVolume&&ct.setVolume()}),100),setTimeout((function(){i.focus()}),30),void 0===window.addRunDependency&&(window.Module=void 0);var a=He.FS.readFile(n.startName);if(a.length<=134217728){var s;if(["snes","snes2002","snes2005","snes2010"].includes(n.system)){var c=a.length%1024;s=new Se(c?a.slice?a.slice(c):a.subarray(c):a)}else s=new Se(a);var l=Ge.a.create(),d=new FileReader,f=0,h=s._u8array.length;if(d.onload=function(e){try{l.update(e.target.result),function(){if(f<h){var e=Math.min(f+2097152,h);d.readAsArrayBuffer(new Blob([s._u8array.slice(f,e)])),f=e}else n.hash=l.hex(),"function"==typeof window.ejsromshash&&window.ejsromshash(n.startName,n.hash)}()}catch(e){}},String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),ut.supportNetPlay.call(n)&&ct.netPlayHost)if(ct.contentCrc32)ct.romcrc32=ct.contentCrc32();else{var m=Ae(s);ct.romcrc32=m.toString(16),ct.romcrc32=ct.romcrc32.padStart(8,"0")}}ct.setDiskContainer.call(n)}));if(o.assign(n.action,{PlayNow(){v.innerHTML=r.getLang("Loading...");let e=n.system;return r.FetchItem({url:`https://www.emulatorjs.com/api/v?name=${e}&_t=${r.time}`,type:"json",success:(e,t)=>n.callaction("Wasm_ReadInfo",e,t),error:()=>(n.offline=!0,r.FetchItem({url:n.RootPath+"json/"+e+".json",type:"json",success:(e,t)=>n.callaction("Wasm_ReadInfo",e,t)}))})},async Wasm_ReadInfo(r,a){var s,u=l[n.system],d=!1,f=!1,p=!0,h=!0,m=!0,_=!0,g=!0,y=1,b=!1,x=!1,T=!1,E=!1,S=!1,C=n.elements.buttons;u||(u=n.system),e=u;var w=r[n.system];if(r.extensions&&(c[u]=r.extensions),t=c[u],r.options&&(He.coreOptions=r.options),!1===r["disk-control"]&&(He.diskControl=!1),"undefined"!=typeof SharedArrayBuffer&&(d=!0),r.threads&&(f=r.threads),r.buttons&&(He.buttonMaps=r.buttons),r.savepath&&(n.savepath=r.savepath),r.servers&&(He.servers=r.servers),"restart"in r&&(p=r.restart),"pause"in r&&(h=r.pause),"settings"in r&&(m=r.settings),"volume"in r&&(_=r.volume),"screenshot"in r&&(g=r.screenshot),"keyboard"in r&&r.keyboard&&(n.keyboard=!0),!p&&o.elm(C.restart)&&U(C.restart,!0),h||o.toArr(C.play,(e=>U(e,!0))),m||U(C.settings,!0),_||U(i.querySelector(J("ejs__volume",1)),!0),m||_||(C.fullscreen.style.marginLeft="auto"),g||U(i.querySelector(".".concat(J("ejs__contextmenu")," li:nth-child(1)")),!0),w instanceof Array?(y=w[0]?w[0]:1,b=Boolean(w[1]),x=Boolean(w[2]),T=Boolean(w[3]),E=Boolean(w[4])):w&&(Boolean(w.netplay),y=w.version?w.version:1,b=Boolean(w.state),x=Boolean(w.asmjs),T=Boolean(w.wasm),E=Boolean(w.cheat)),E&&(ct.allowCheat=!0),a&&(He.newCoreKey=a.key,He.newCoreKey2=a.key2),"nds"!=n.system||le.wasm||(b=!1),He.coreFileVersion=y,He.coreFileName=u,["webgl2","experimental-webgl2"].includes(le.webgl.WEBGL_CONTEXT)&&(S=!0),"undefined"!=typeof EJS_N64_LEGACY&&1==EJS_N64_LEGACY&&(S=!1),He.arcadeCores.includes(n.system)&&(He.isArcadeCore=!0),"mame"==n.system||"mame0.193"==n.system||"mame0.243"==n.system)return await n.callaction("Wasm_Mame_Check_Rooms");var O="Please upgrade your browser to the latest version";le.wasm&&T?(s=u+"-wasm.data","n64"!==n.system||S||(s=u+"-legacy-wasm.data",b=!1),!0):x&&(s=u,"n64"!==n.system||S||(s=u+"-legacy-asmjs.data")),f&&d&&(s=u+"-wasm-threads.data"),"undefined"!=typeof EJS_CUSTOM_COREFILE&&(s=EJS_CUSTOM_COREFILE),["mupen64plus","mupen64plus-nx"].includes(n.system)&&!S&&(O="Your browser does not support WebGL2",s=null),s?n.callaction("Wasm_Download",s,y):v.innerHTML='<strong style="color:#f00;text-shadow: 0px 0px 3px;">'+O+"</strong>",o.elm(C.saveState)&&U(C.saveState,!b),o.elm(C.loadState)&&U(C.loadState,!b),ct.stateSupported=b},async Wasm_Mame_Check_Rooms(){if(!n.config.gameUrl)return n.callaction("MAME_NENGE_SET_ROOMS");{r.F.getname(n.config.gameUrl);let e="mame0.243"==n.system?"mame0.243":"mame";r.FetchItem({url:"https://www.emulatorjs.com/api/"+e+"?name=",type:"text",success(t){let o=n.callaction("MAME_SHOW_INFO",t);o?n.callaction("Wasm_Download",e+"-"+o+"-wasm.data",He.coreFileVersion):v.innerHTML='<strong style="color:#f00;text-shadow: 0px 0px 3px;">'+r.getLang("Unsupported Game")+"</strong>"},error(){v.innerHTML='<strong style="color:#f00;text-shadow: 0px 0px 3px;">'+r.getLang("Network Error")+"</strong>"}})}},NENGE_ROOMS_WELCOME_UI(e){let t=r.$append(He.loading,r.$ca("div",{class:"nenge-write-rooms"}));return t.innerHTML=`\n                        <ul class="nenge-menu">\n                            ${e.map((e=>`<li>${r.getLang(e)}</li>`)).join("")}\n                        </ul>\n                        <div class="is_down"></div>\n                        <div class="is_write"></div>\n                        <div class="storage_data"></div>\n                        <p class="info-message">${r.getLang("uncompressed:auto check zip/7z/rar4,BIOS awayls to uncompressed load.")}</p>`,t},MAME_NENGE_SET_ROOMS(){let e=n.callaction("NENGE_ROOMS_WELCOME_UI",["Import rooms","Import and decompressed*","View Rooms Storage"]),t=n.system,a=Nttr(e),i=a.$(".is_down"),s=a.$(".is_write"),c=a.$(".storage_data"),l=o.toArr(a.$(".nenge-menu").children),u="mame0.243"==n.system?"mame0.243":"mame";n.MAMEDATA={},a.$(".info-message").innerHTML+="<hr>"+r.getLang("MAME must select a rooms name to check!"),l&&l.length>0&&([0,1].forEach((e=>Nttr(l[e]).click((o=>n.callaction("upload",(async o=>await n.callaction("GAME_NENGE_ADD_LIST",o.name,o,t,s,e,"Set Rooms",(async e=>{if("zip"!=r.F.getExt(e))return!0})))))))),Nttr(l[2]).click((e=>n.callaction("GAME_NENGE_ADD_ROOMS",t,c,"Set Rooms")))),Nttr(s).click((async e=>{let t=e.target;if(o.elm(t)){let e=t.dataset;if(!e)return;if(e.path){let t=e.path,r=await n.callaction("MAME_CHECK_ROOM_NAME",t,u);n.callaction("MAME_SHOW_INFO",r,i,t)}}})),Nttr(c).click((async e=>{let t=e.target;if(o.elm(t)){let e=t.dataset;if(!e)return;if(e.name){let t=e.name.replace(n.system+"-",""),r=await n.callaction("MAME_CHECK_ROOM_NAME",t,u);n.callaction("MAME_SHOW_INFO",r,i,t)}else e.remove&&(vt.DB.rooms.remove(e.remove),t.parentNode.parentNode.remove())}})),Nttr(i).click((e=>{let t=e.target;if(o.elm(t)){let e=t.dataset;e.bios?(n.config.biosUrl&&o.str(n.config.biosUrl)?n.config.biosUrl=[n.config.biosUrl]:n.config.biosUrl=[],n.config.biosUrl.includes(e.bios)||n.config.biosUrl.push(e.bios)):e.name&&e.index&&(Nttr(s).remove(),Nttr(c).remove(),Nttr(i).remove(),a.remove(),n.config.gameUrl=e.name,n.callaction("Wasm_Download",u+"-"+e.index+"-wasm.data",He.coreFileVersion))}}))},MAME_CHECK_ROOM_NAME:(e,t)=>r.FetchItem({url:"https://www.emulatorjs.com/api/"+t+"?name="+e,type:"text"}),MAME_SHOW_INFO(e,t,a){let i,s="",c=!0,l=n.elements.buttons;if("{"==e.charAt(0)){let a=o.Json(e);c="supported"==a.savestate,i=a.index,t?o.toArr(a,(e=>{o.str(e[1])?s+=`<p>${r.getLang("mame "+e[0])}:${e[1]}</p>`:"files"==e[0]&&e.length>0&&(s+=`<h6>${r.getLang("mame "+e[0])}</h6>`,o.toArr(e[1],(e=>{s+=`<p>${e}<button data-bios="${e}">${r.getLang("must click when you run")}</button></p>`})))})):a.files&&(n.config.biosUrl=a.files)}else if(e&&"|"!=e.charAt(0)){let n=e.split("|");n[0]&&(i=n[0]),n[1]&&(c=1==n[1]),t&&(s+=`<p>${r.getLang("mame index")}:${n[0]}</p>`,s+=`<p>${r.getLang("mame savestate")}:${n[1]}</p>`)}if(o.elm(l.saveState)&&U(l.saveState,!c),o.elm(l.loadState)&&U(l.loadState,!c),ct.stateSupported=c,!t)return i;t.innerHTML=i?`<h3>${a}</h3>${s}<p><button data-index="${i}" data-name="${a}">${r.getLang("Run this!")}</button></p>`:`<h3>${a}</h3>`+r.getLang("this rooms can not run in:")+n.system},Wasm_Download(e,t){let a=`//www.emulatorjs.com/cores/${e}?v=${t}`,i=e;return n.offline&&(e=e.replace(/\.data$/,".7z"),a=n.RootPath+"/oldcores/"+e+"?v="+t,i="old-"+e),r.FetchItem({url:a,key:i,store:vt.DB.system,dataOption:{version:t,system:"vbanext"==n.system?"gba":n.system},version:t,unpack:!0,Filter:e.endsWith(".data")?e=>{let t=r.F.CheckExt(e);return t&&["zip","7z","rar"].includes(t)||(e=e.slice(12)).set([55,122,188,175,39,28,0,3],0),e}:void 0,success(e){if(o.u8obj(e)){let t=r.F.CheckExt(e);t&&["zip","7z","rar"].includes(t)||(e=e.slice(12)).set([55,122,188,175,39,28,0,3],0),r.unFile(e,(e=>{h.innerHTML=`${r.getLang("Decompress Game Core")} ${e}`})).then((e=>n.callaction("Wasm_ReadFile",e)))}else e&&n.callaction("Wasm_ReadFile",e);e=null},process(e){v.innerHTML=`${r.getLang("Download Game Core")}   ${e}`},error(){v.innerHTML='<strong style="color:#f00;text-shadow: 0px 0px 3px;">Network Error</strong>'}})},Wasm_ReadFile(t){let a;const i={noInitialRun:!0,arguments:[],preRun:[],postRun:[],canvas:u,print:function(e){"undefined"!=typeof EJS_DEBUG_&&EJS_DEBUG_},printErr:function(t){"undefined"!=typeof EJS_DEBUG_&&EJS_DEBUG_,e&&s[e]&&s[e].includes(t)&&(ct.saveSavFiles(),n.isAutoSave=!0)},totalDependencies:0,monitorRunDependencies:function(e){},locateFile:function(e){return He.coreFileData[e]?window.URL.createObjectURL(new Blob([He.coreFileData[e]],{type:e.endsWith(".worker.js")?"application/javascript":"application/octet-stream"})):e},readAsync:function(e,t,n){return e.byteLength?t(e):r.FetchItem({url:e,success(e){if(e instanceof Uint8Array)return t(e);n("404")},error(){n("404")}})}};o.toArr(t,(e=>{var t=r.F.getname(e[0]),n=t.split(".").pop();He.coreFileData[t]=e[1],"js"!==n||t.includes(".worker.js")?"mem"===n?He.memData=e[1]:"wasm"===n&&(i.wasmBinary=e[1]):a=(new TextDecoder).decode(e[1])})),t=null;const s={gba:["[libretro INFO] GBA Savedata: Savedata synced","[libretro INFO] GB Memory: Savedata synced"]};o.defines(He,{Module:i},1,1),"openbor"==n.system&&(i.preRun=[function(){ENV.SDL_EMSCRIPTEN_KEYBOARD_ELEMENT="#canvas"}]),null!==i.wasmBinary?(i.monitorRunDependencies=function(e){0===e&&n.callaction("Wasm_Ready")},i.onRuntimeInitialized=function(){}):(i.monitorRunDependencies=function(e){},i.onRuntimeInitialized=function(){He.Module&&He.Module.FS?He.FS=He.Module.FS:He.FS=window.FS,n.callaction("Wasm_Ready")}),a=a.replace(/Module\["run"\]\*=\s*run;/,'if(!Module.FS)Module.FS=FS;Module["run"] = run;');let c=new Function("Module",a+"if(typeof ENV !='undefined')window.ENV = ENV;var EmulatorJS,EmulatorJS_;return {EmulatorJS,EmulatorJS_};")(i)||{};if(void 0===window.addRunDependency){if(void 0!==c.EmulatorJS&&c.EmulatorJS(i),void 0!==c.EmulatorJS_){var l=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.EmulatorJS_(i);case 2:o.defines(He,{Module:e.sent},1,1),null!==He.memData&&n.callaction("MemData_Reset",He.memData);case 4:case"end":return e.stop()}}),e)}));!function(){new Promise(((e,t)=>{var n=l.apply(this,arguments);function r(a){ze(n,e,t,r,o,"next",a)}function o(a){ze(n,e,t,r,o,"throw",a)}r(void 0)}))}(),He.newCore=!0}null===He.memData||He.newCore||n.callaction("MemData_Reset",He.memData),o.defines(He,{FS:i.FS},1),"undefined"!=typeof EJS_DEBUG_&&!0===EJS_DEBUG_&&(window.EJS_MODULE=He.Module,window.ejs_loader=He,window.ejs_media=ct)}a=null},async Wasm_Ready(){var e=He.Module,t=He.FS;delete e.wasmBinary,h.innerHTML=r.getLang("Game Core ready"),ct.bindFunction.call(n),ct.setGamepadDialog.call(n),ct.setCacheDialog.call(n),ct.setLoadingDialog.call(n),ct.setNetplayDialog.call(n),ct.setCheatDialog.call(n),ct.initGamepad.call(n),ct.initKeyboard.call(n),ct.listeners.call(n),e.FS||o.defines(e,{FS:t},1,1),a.SetModule(e),a.DB={"/data":vt.DB.saves,"/Saves":vt.DB.openbor},o.defines(He,{DISK:a},1),t.createFolder?t.createFolder("/","etc",!0,!0):t.createPath("/","etc",!0,!0),t.createPath("/","data",!0,!0),t.createPath("/","Saves",!0,!0),t.mkdir("/shader"),He.savefullpath="/data/saves/"+n.savepath,"openbor"!=n.system?(t.mount(a,{},"/data"),t.mkdir("/data/saves"),t.mkdir(He.savefullpath)):t.mount(a,{},"/Saves"),await a.mountReady();ct.initShaders();var s="";s+="savefile_directory = "+He.savefullpath+"\nsystem_directory = /\n\nsavestate_directory = "+He.savefullpath+"\nvideo_vsync = true\nscreenshot_directory = /\nvideo_shader = /shader/shader.glslp\nvideo_shader_enable = true\nvideo_font_enable = false\nvideo_scale = 1.0\nvideo_gpu_screenshot = false\n";var c=ut.defaultCoreOptionsValues.call(n);n.lightgun&&("nes"===n.system&&(s+='input_libretro_device_p2 = "258"\n'),"segaMS"!==n.system&&"segaMD"!==n.system&&"segaCD"!==n.system||(c.genesis_plus_gx_gun_cursor="yes",c.genesis_plus_gx_invert_mouse="yes",c.genesis_plus_gx_bram="per game",1==n.lightgun?s+='input_libretro_device_p2 = "260"\n':2==n.lightgun?s+='input_libretro_device_p2 = "516"\n':3==n.lightgun&&(s+='input_libretro_device_p2 = "772"\n')),"snes"===n.system&&(s+='input_libretro_device_p2 = "260"\n'),["snes2002","snes2005","snes2010"].includes(n.system)&&(s+='input_libretro_device_p2 = "260"\n'),["fbneo"].includes(n.system)&&(s+='input_libretro_device_p1 = "514"\n')),n.mouse&&("snes"===n.system&&(s+="input_libretro_device_p1 = 2\n"),["snes2002","snes2005","snes2010"].includes(n.system)&&(s+="input_libretro_device_p1 = 2\n"),"segaMD"===n.system&&(s+="input_libretro_device_p2 = 2\n")),n.multitap&&("snes"===n.system&&(s+="input_libretro_device_p2 = 257\n"),["snes2002","snes2005","snes2010"].includes(n.system)&&(s+="input_libretro_device_p2 = 257\n")),["n64","mupen64plus","mupen64plus2","mupen64plus-nx"].includes(n.system)&&(s+="input_libretro_device_p1 = 5\n",s+="input_libretro_device_p2 = 5\n",s+="input_libretro_device_p3 = 5\n",s+="input_libretro_device_p4 = 5\n"),He.arcadeCores.includes(n.system)&&(s+="input_libretro_device_p1 = 5\n",s+="input_libretro_device_p2 = 5\n",s+="input_libretro_device_p3 = 5\n",s+="input_libretro_device_p4 = 5\n"),n.system,"fmsx"===n.system&&(s+="input_libretro_device_p1 = 513\n"),s+="video_smooth = false\n";var l=de(c,ut.storage.get("core-options")||{}),u="";"psx"==n.system&&(u='pcsx_rearmed_memcard2 = "disabled"\n'),l&&Object.keys(l).forEach((function(e){u+="".concat(e,' = "').concat(l[e],'"\n'),P.call(n,i,"start-game",(function(t){setTimeout((function(){"pcsx_rearmed_frameskip"!=e&&"pcsx_rearmed_memcard2"!=e&&ct.setVariable(e,l[e])}),50)}))})),t.createDataFile("/etc","retroarch.cfg",s,!0,!0),t.createFolder?(t.createFolder("/home/web_user",".config",!0,!0),t.createFolder("/home/web_user/.config","retroarch",!0,!0)):(t.createPath("/home/web_user",".config",!0,!0),t.createPath("/home/web_user/.config","retroarch",!0,!0)),1==n.lightgun&&"mame0.243"==n.system&&(He.Module.canvas.addEventListener("mousemove",(function(e){var t=He.Module.canvas.clientWidth,n=He.Module.canvas.clientHeight,r=t/2,o=n/2,a=0,i=0,s=0;e.offsetX<0||e.offsetY>t||(e.offsetX>r?(a=(e.offsetX-r)/t*2*32767,s=16,ct.simulateInput(0,17,0),ct.simulateInput(0,s,a)):(a=(e.offsetX-r)/t*2*32767,s=17,ct.simulateInput(0,16,0),ct.simulateInput(0,s,a)),e.offsetY>o?(i=(e.offsetY-o)/n*2*32767,s=18,ct.simulateInput(0,19,0),ct.simulateInput(0,s,i)):(i=(e.offsetY-o)/n*2*32767,s=19,ct.simulateInput(0,18,0),ct.simulateInput(0,s,i)))}),!1),i.addEventListener("mousedown",(function(e){switch(e.which){case 1:ct.simulateInput(0,8,1);break;case 2:break;case 3:ct.simulateInput(0,0,1)}}),!1),i.addEventListener("mouseup",(function(e){switch(e.which){case 1:ct.simulateInput(0,8,0);break;case 2:break;case 3:ct.simulateInput(0,0,0)}}),!1)),t.createDataFile("/home/web_user/.config/retroarch","retroarch-core-options.cfg",u,!0,!0),t.createDataFile("/etc","retroarch-core-options.cfg",u,!0,!0),n.config.biosUrl?n.callaction("GAME_ReadBios"):n.callaction("GAME_ParentData")},async GAME_ReadBios(){let e=n.config.biosUrl,t="vbanext"==n.system?"gba":n.system;e&&(o.str(e)&&(e=[e]),await o.Async(e.map((async e=>{r.FetchItem({url:e,store:vt.DB.bios,autounpack:!n.system.startsWith("mame"),dataOption:{system:t},success(t){o.u8obj(t)?(a.MKFILE(r.F.getname(e),t,1),s+=t.byteLength):t&&o.toArr(t,(e=>{a.MKFILE(e[0],e[1],1),s+=e[1].byteLength})),t=null},process(e){m.innerHTML=r.getLang("Download BIOS")+" "+e},error(e){m.innerHTML='<strong style="color:#f00;text-shadow: 0px 0px 3px;">'+e.message,n.callaction("GAME_ParentData")}})}))),n.callaction("GAME_ParentData"))},async GAME_ParentData(){var e=n.config.gameParentUrl,t=0,i=n.config.system;o.str(e)&&(e=[e]),e&&e.length>0&&await Promise.all(e.map((async n=>{let c=r.F.getname(n),l=c.split(".").pop(),u=!1,d=!1,f=i+"-"+c;return-1!=n.indexOf("/sample/")&&(u=!0,f=i+"-sample-"+c),-1!=n.indexOf("/nvram/")&&(d=!0,f=i+"-nvram-"+c),r.FetchItem({url:n,store:vt.DB.rooms,key:f,dataOption:{system:i},success(e){s+=e.byteLength,"chd"==l?(_0x1839c0=!1,a.MKFILE(c,e)):d?r.unFile(e).then((t=>{t instanceof Uint8Array?(s+=e.byteLength,a.MKFILE(c,e)):o.toArr(t,(e=>{s+=e[1].byteLength,a.MKFILE(He.savefullpath+"/mame/"+e[0],e[1],1)}))})):u?a.MKFILE("/samples/"+c,e,1):a.MKFILE("/"+c,e,!0,!1),t++},process(n){v.innerHTML=`${r.getLang("Download Game Data")}   ${c}${n}(${t}/${e.length})`},error(){t++}})}))),n.callaction("GAME_Patch")},async GAME_Patch(){if(n.config.gamePatchUrl){let e=n.config.gamePatchUrl,t=r.F.getname(e);return r.FetchItem({url:e,upack:!0,success(e){o.u8obj(e)?(s+=e.length,a.MKFILE(t,e),["ips","bps","ups"].includes(t.split(".").pop())&&!He.gamePatch&&(He.gamePatch="/"+entry[0])):o.toArr(e,(e=>{let t=r.F.getname(e[0]);a.MKFILE(t,e[1]),s+=e[1].byteLength,["ips","bps","ups"].includes(t.split(".").pop())&&!He.gamePatch&&(He.gamePatch="/"+e[0]),e[1]=null})),e=null,n.callaction("GAME_Rooms")},error(e){v.innerHTML=`<strong style="color:#f00;text-shadow: 0px 0px 3px;">${e.message}</strong>`,n.callaction("GAME_Rooms")},process(e){v.innerHTML=`${r.getLang("Loading Game Data")} ${e}`}})}n.callaction("GAME_Rooms")},async GAME_Rooms(){var e=n.config,t=e.gameUrl||"",i=e.system,c=r.F.getname(t),l=0;"vbanext"==i&&(i="gba"),n.savepath&&(i=n.savepath);let u=r.getLang("Download Game Data");return He.arcadeCores.includes(n.system)&&n.config.gameParentUrl.length?l+=n.config.gameParentUrl.length:n.config.gamePatchUrl&&(l+=1),l&&(v.innerHTML=u+`${l-1}/${l}`),t?r.FetchItem({url:t,key:i+"-"+c,store:vt.DB.rooms,dataOption:{system:i},autounpack:!He.arcadeCores.includes(n.system),success(e){o.u8obj(e)?(s+=e.byteLength,a.MKFILE(n.callaction("GAME_GET_PATH",c),e)):e&&o.toArr(e,(e=>{/^__MACOSX/.test(e[0])||(s+=e[1].byteLength,a.MKFILE(n.callaction("GAME_GET_PATH",e[0]),e[1]))})),n.callaction("GAME_START"),e=null},error(e){v.innerHTML=`<strong style="color:#f00;text-shadow: 0px 0px 3px;">${e.message}</strong>`},process(e){v.innerHTML=`${r.getLang("Loading Game Data")}    ${e}`}}):n.callaction("GAME_NENGE_WriteRooms",i)},GAME_GET_PATH(e){e=r.F.getname(e);let o=r.F.getExt(e);return t.includes(o)&&("openbor"==n.system?(e="Paks/"+e,n.startName=e):n.startName=e),e},async GAME_NENGE_WriteRooms(e){let t=n.callaction("NENGE_ROOMS_WELCOME_UI",["Import rooms","Import and decompressed*","View Rooms Storage","Import Bios*"]),a=Nttr(t),i=a.$(".is_write"),s=a.$(".storage_data");i.innerHTML=await n.callaction("GAME_NENGE_GET_BIOS_LIST",e),o.toArr(Nttr(t).$(".nenge-menu").children,((t,o)=>{3==o?Nttr(t).click((t=>{n.callaction("upload",(async t=>{let o=await r.unFile(t);n.callaction("GAME_NENGE_ADD_BIOS",t.name,o,e,i)}))})):2==o?Nttr(t).click((t=>n.callaction("GAME_NENGE_ADD_ROOMS",e,s))):0!=o&&1!=o||Nttr(t).click((t=>{n.callaction("upload",(async t=>{await n.callaction("GAME_NENGE_ADD_LIST",t.name,t,e,i,o),t=null}))}))})),Nttr(Nttr(t).$(".storage_data")).click((async t=>{let r=t.target;if(o.elm(r)){let t=r.dataset.name;t?(r.removeAttribute("data-name"),await n.callaction("GAME_NENGE_ADD_LIST",t,null,e,i)):r.dataset.remove&&(r.parentNode.parentNode.remove(),vt.DB.rooms.remove(r.dataset.remove))}})),Nttr(Nttr(t).$(".is_write")).click((async r=>{let a=r.target;if(o.elm(a)){let r=a.dataset.path;r?(n.startName=r,Nttr(t).remove(),n.callaction("GAME_START")):a.dataset.removebios?(a.parentNode.parentNode.remove(),vt.DB.bios.remove(a.dataset.removebios)):a.dataset.writebios&&n.callaction("GAME_NENGE_ADD_BIOS",a.dataset.writebios,null,e,a)}}))},async GAME_NENGE_ADD_LIST(e,t,i,c,l,u,d){let f=e,p=!1;if(u||(u="Run Start"),t?t&&(l?t=await r.unFile(t):o.blob(t)&&(t=new Uint8Array(await t.arrayBuffer())),p=!0,f=e):(t=await vt.DB.rooms.data(e),f=e.replace(/^[a-z0-9\-]+\-/i,"")),o.u8obj(t)){if(d&&await d(f))return;p&&await vt.DB.rooms.setData(i+"-"+f,t,{filesize:t.byteLength,system:i}),f=n.callaction("GAME_GET_PATH",f),a.MKFILE(f,t),s+=t.byteLength,r.$append(c,r.$ct("div",`${f}<span data-path="${f}">${r.getLang(u)}</span>`))}else o.toArr(t,(async e=>{if(/^(__MACOSX|\.)/.test(e[0]))return;let t=r.F.getname(e[0]);d&&await d(t)||(t=n.callaction("GAME_GET_PATH",t),p&&await vt.DB.rooms.setData(i+"-"+t,e[1],{filesize:e[1].byteLength,system:i}),a.MKFILE(t,e[1]),s+=e[1].byteLength,r.$append(c,r.$ct("div",`${t}<span data-path="${t}">${r.getLang(u)}</span>`)))}));t=null},async GAME_NENGE_ADD_ROOMS(e,t,a){let i,s;i=IDBKeyRange.only(e);let c=await vt.DB.rooms.keys({only:1,index:"system",Range:IDBKeyRange.only(e)}),l="";"gba"==n.config.system&&(s=await vt.DB.rooms.keys({only:1,index:"system",Range:IDBKeyRange.only("gb")}),s&&o.array(s)&&(c=(c||[]).concat(s))),c&&o.toArr(c,(e=>{let t,i;if(o.str(e)){if("vbanext"==n.config.system&&/\.(gb|gbc)$/i.test(e))return;i=e.replace(/^[a-z0-9]+\-/,""),t=e}l+=`<li><p>${t}</p><p><span data-remove="${t}">${r.getLang("Delete")}</span><span data-name="${t}">${r.getLang(a||"Write in")}</span></p></li>`})),t.innerHTML=`<ul>${l}</ul>`},async GAME_NENGE_ADD_BIOS(e,t,n,i){t?(o.blob(t)&&(t=new Uint8Array(await file.arrayBuffer())),await vt.DB.bios.setData(e,t,{system:n}),r.$append(i,r.$ct("div",`<div><p>BIOS:${e}</p><p><span>${r.getLang("Write complete")}</span></p></div>`))):(i.removeAttribute("data-writebios"),i.innerHTML=r.getLang("Write complete"),t=await vt.DB.bios.data(e)),o.u8obj(t)?(s+=t.byteLength,a.MKFILE(e)):o.toArr(t,(e=>{!/^(__MACOSX|\.)/.test(e[0])&&o.u8obj(e[1])&&(s+=e[1].byteLength,a.MKFILE(e[0],e[1]))})),t=null},async GAME_NENGE_GET_BIOS_LIST(e){let t="";return o.toArr(await vt.DB.bios.keys({index:"system",Range:IDBKeyRange.only(e)}),(e=>{let n=o.str(e)?e:e[0];t+=`<div><p>BIOS:${n}</p><p><span data-remvebios="${n}">${r.getLang("Delete")}</span><span data-writebios="${n}">${r.getLang("Write Bios")}</span></p></div>`})),t},GAME_START(e){if(!n.startName&&e&&(n.startName=e),!n.startName)return v.innerHTML="Core name error",n.callaction("GAME_NENGE_WriteRooms",n.config.system);n.gameName=r.F.getKeyName(n.startName);var t="srm";"nds"===n.system&&(t="dsv"),["melonds","zc210"].includes(n.system)&&(t="sav"),n.gameSaveExt=t;try{!function(){if(He.gamePatch){var e=n.startName.split("/"),t=e.pop().split(".").pop(),r=(He.gamePatch.split(".").pop(),He.gamePatch.split("/").pop().split(".").shift()),o="".concat(e.join("/"),"/").concat(r,".").concat(t);o=o.replace(/\#/g,"");var a=He.gamePatch;if(He.FS.rename(n.startName,o),n.startName=o,"snes"===n.system||["snes2002","snes2005","snes2010"].includes(n.system)){var i=new Se(He.FS.readFile(n.startName)),s=Ae(i);ct.romcrc32=s.toString(16);var c,l,u,d=new Se(He.FS.readFile(a)),f=d.readString(6),p=i._u8array.length%1024;f.startsWith("PATCH")?(c=we(d),0===p&&"B19ED489"===s.toString(16).toUpperCase()&&((l=new Uint8Array(i._u8array.length+512)).set(new Uint8Array(512),0),l.set(i._u8array,512),i=new Se(l))):f.startsWith(Le)?c=Fe(d):f.startsWith("BPS1")&&(c=Me(d),p>0&&"A31BEAD4"===s.toString(16).toUpperCase()&&(l=i._u8array.slice?i._u8array.slice(p):i._u8array.subarray(p),i=new Se(l)));try{if(u=c.apply(i,!1)){var h=u._u8array.length%1024;h>0&&(l=u._u8array.slice?u._u8array.slice(h):u._u8array.subarray(h),u=new Se(l)),He.FS.unlink(a),He.FS.unlink(n.startName),He.FS.writeFile(n.startName,u._u8array)}}catch(e){}}else{var m,v,_=new Se(He.FS.readFile(n.startName)),g=new Se(He.FS.readFile(a)),y=g.readString(6);y.startsWith("PATCH")?m=we(g):y.startsWith(Le)?m=Fe(g):y.startsWith("BPS1")&&(m=Me(g));try{(v=m.apply(_,!1))&&(He.FS.unlink(a),He.FS.unlink(n.startName),He.FS.writeFile(n.startName,v._u8array))}catch(e){}}}}();var o=[n.startName,He.hash+He.hash2+He.hash3];He.newCore&&(o=[n.startName,He.newCoreKey]),He.Module._get_content_crc&&(o=[n.startName,He.newCoreKey2]),He.Module.specialHTMLTargets&&(He.Module.specialHTMLTargets["#canvas"]=He.Module.canvas,He.Module.specialHTMLTargets["#canvas-input"]=He.Module.canvas.parentElement.querySelector("input"),He.Module.specialHTMLTargets["#canvas-mouse"]=n.elements.wrapper,"amiga"==n.system&&(He.Module.specialHTMLTargets["#canvas-mouse"]=n.elements.wrapper)),"undefined"!=typeof EJS_DEBUG_&&!0===EJS_DEBUG_&&o.unshift("-v"),"openbor"==n.system&&(o=[He.newCoreKey2]),He.Module.callMain(o),I.call(n,i,"start-game")}catch(e){v.innerHTML='<strong style="color:#f00;text-shadow: 0px 0px 3px;">Failed to start game</strong>'}},upload(e,t){let n=r.$ce("input");n.type="file",t||(n.multiple=!0),n.onchange=t=>{let r=t.target.files;r&&r.length>0&&o.toArr(r,(t=>e(t))),n.remove()},n.click()},Memory_Reset(){"nes"==n.system&&(He.Module.TOTAL_MEMORY=134217728),He.Module.TOTAL_MEMORY=s+67108864,He.arcadeCores.includes(n.system)&&(He.Module.TOTAL_MEMORY=s+268435456,He.isMobileDevice&&(He.Module.TOTAL_MEMORY=314572800)),["n64","nds","jaguar"].includes(n.system)&&(He.Module.TOTAL_MEMORY=s+268435456,He.isMobileDevice&&(He.Module.TOTAL_MEMORY=314572800)),"gba"==n.system&&(He.Module.TOTAL_MEMORY=268435456),"undefined"!=typeof EJS_MEMORY&&(He.Module.TOTAL_MEMORY=EJS_MEMORY)},MemData_Reset(e){let t=He.Module.HEAPU8;"undefined"!=typeof GLOBAL_BASE?t.set(e,GLOBAL_BASE):"undefined"!=typeof Runtime&&Runtime.GLOBAL_BASE?t.set(e,Runtime.GLOBAL_BASE):He.newCore?t.set(e,1024):t.set(e,8)}}),!n.config.gameUrl)return U(_,!0),n.callaction("PlayNow");N(_,"click touchstart",(function(e){return U(_,!0),n.callaction("PlayNow"),!1}))}}o.defines(vt,{setup:{value:(e,t)=>(o.str(e)&&(e=document.querySelectorAll(e)),o.toArr(e).map((e=>o.elm(e)&&new vt(e,t))))},defaults:{value:{},writable:!0},elements:{value:[],writable:!0}}),o.defines(e,{exports:vt},1,1)}]);